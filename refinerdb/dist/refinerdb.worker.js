parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"dqWB":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=function(){return(n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},r=Object.keys,i=Array.isArray,o="undefined"!=typeof self?self:"undefined"!=typeof window?window:e;function u(e,n){return"object"!==t(n)?e:(r(n).forEach(function(t){e[t]=n[t]}),e)}"undefined"==typeof Promise||o.Promise||(o.Promise=Promise);var a=Object.getPrototypeOf,s={}.hasOwnProperty;function c(e,t){return s.call(e,t)}function l(e,t){"function"==typeof t&&(t=t(a(e))),r(t).forEach(function(n){h(e,n,t[n])})}var f=Object.defineProperty;function h(e,t,n,r){f(e,t,u(n&&c(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function p(e){return{from:function(t){return e.prototype=Object.create(t.prototype),h(e.prototype,"constructor",e),{extend:l.bind(null,e.prototype)}}}}var d=Object.getOwnPropertyDescriptor;function y(e,t){var n;return d(e,t)||(n=a(e))&&y(n,t)}var v=[].slice;function m(e,t,n){return v.call(e,t,n)}function g(e,t){return t(e)}function b(e){if(!e)throw new Error("Assertion Failed")}function _(e){o.setImmediate?setImmediate(e):setTimeout(e,0)}function w(e,t){return e.reduce(function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e},{})}function x(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function k(e,t){if(c(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=k(e,t[r]);n.push(o)}return n}var u=t.indexOf(".");if(-1!==u){var a=e[t.substr(0,u)];return void 0===a?void 0:k(a,t.substr(u+1))}}function O(e,t,n){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){b("string"!=typeof n&&"length"in n);for(var r=0,o=t.length;r<o;++r)O(e,t[r],n[r])}else{var u=t.indexOf(".");if(-1!==u){var a=t.substr(0,u),s=t.substr(u+1);if(""===s)void 0===n?i(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var c=e[a];c||(c=e[a]={}),O(c,s,n)}}else void 0===n?i(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function P(e,t){"string"==typeof t?O(e,t,void 0):"length"in t&&[].map.call(t,function(t){O(e,t,void 0)})}function E(e){var t={};for(var n in e)c(e,n)&&(t[n]=e[n]);return t}var j=[].concat;function K(e){return j.apply([],e)}var C="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(K([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return o[e]}),A=C.map(function(e){return o[e]}),S=w(C,function(e){return[e,!0]});function I(e){if(!e||"object"!==t(e))return e;var n;if(i(e)){n=[];for(var r=0,o=e.length;r<o;++r)n.push(I(e[r]))}else if(A.indexOf(e.constructor)>=0)n=e;else for(var u in n=e.constructor?Object.create(e.constructor.prototype):{},e)c(e,u)&&(n[u]=I(e[u]));return n}var D={}.toString;function T(e){return D.call(e).slice(8,-1)}var B=function(e,t){return"Array"===t?""+e.map(function(e){return B(e,T(e))}):"ArrayBuffer"===t?""+new Uint8Array(e):"Date"===t?e.getTime():ArrayBuffer.isView(e)?""+new Uint8Array(e.buffer):e};function R(e,n,i,o){return i=i||{},o=o||"",r(e).forEach(function(r){if(c(n,r)){var u=e[r],a=n[r];if("object"===t(u)&&"object"===t(a)&&u&&a){var s=T(u),l=T(a);s===l?S[s]?B(u,s)!==B(a,l)&&(i[o+r]=n[r]):R(u,a,i,o+r+"."):i[o+r]=n[r]}else u!==a&&(i[o+r]=n[r])}else i[o+r]=void 0}),r(n).forEach(function(t){c(e,t)||(i[o+t]=n[t])}),i}var F="undefined"!=typeof Symbol&&Symbol.iterator,q=F?function(e){var t;return null!=e&&(t=e[F])&&t.apply(e)}:function(){return null},M={};function N(e){var t,n,r,o;if(1===arguments.length){if(i(e))return e.slice();if(this===M&&"string"==typeof e)return[e];if(o=q(e)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var U="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function V(e,t){U=e,W=t}var W=function(){return!0},z=!new Error("").stack;function L(){if(z)try{throw new Error}catch(e){return e}return new Error}function Y(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(W).map(function(e){return"\n"+e}).join("")):""}var G=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],H=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Q=G.concat(H),X={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function J(e,t){this._e=L(),this.name=e,this.message=t}function $(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function Z(e,t,n,r){this._e=L(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=$(e,t)}function ee(e,t){this._e=L(),this.name="BulkError",this.failures=t,this.message=$(e,t)}p(J).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Y(this._e,2))}},toString:function(){return this.name+": "+this.message}}),p(Z).from(J),p(ee).from(J);var te=Q.reduce(function(e,t){return e[t]=t+"Error",e},{}),ne=J,re=Q.reduce(function(e,n){var r=n+"Error";function i(e,i){this._e=L(),this.name=r,e?"string"==typeof e?(this.message=e+(i?"\n "+i:""),this.inner=i||null):"object"===t(e)&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=X[n]||r,this.inner=null)}return p(i).from(ne),e[n]=i,e},{});re.Syntax=SyntaxError,re.Type=TypeError,re.Range=RangeError;var ie=H.reduce(function(e,t){return e[t+"Error"]=re[t],e},{});function oe(e,t){if(!e||e instanceof J||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ie[e.name])return e;var n=new ie[e.name](t||e.message,e);return"stack"in e&&h(n,"stack",{get:function(){return this.inner.stack}}),n}var ue=Q.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=re[t]),e},{});function ae(){}function se(e){return e}function ce(e,t){return null==e||e===se?t:function(n){return t(e(n))}}function le(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function fe(e,t){return e===ae?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?le(r,this.onsuccess):r),i&&(this.onerror=this.onerror?le(i,this.onerror):i),void 0!==o?o:n}}function he(e,t){return e===ae?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?le(n,this.onsuccess):n),r&&(this.onerror=this.onerror?le(r,this.onerror):r)}}function pe(e,t){return e===ae?t:function(n){var r=e.apply(this,arguments);u(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?le(i,this.onsuccess):i),o&&(this.onerror=this.onerror?le(o,this.onerror):o),void 0===r?void 0===a?void 0:a:u(r,a)}}function de(e,t){return e===ae?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function ye(e,t){return e===ae?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}ue.ModifyError=Z,ue.DexieError=J,ue.BulkError=ee;var ve={},me=100,ge=20,be=100,_e="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,e.__proto__,e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,t.__proto__,e]}(),we=_e[0],xe=_e[1],ke=_e[2],Oe=xe&&xe.then,Pe=we&&we.constructor,Ee=!!ke,je=!1,Ke=ke?function(){ke.then(Je)}:o.setImmediate?setImmediate.bind(null,Je):o.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){Je(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Je,0)},Ce=function(e,t){qe.push([e,t]),Se&&(Ke(),Se=!1)},Ae=!0,Se=!0,Ie=[],De=[],Te=null,Be=se,Re={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Pt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{Pt(e[0],e[1])}catch(t){}})}},Fe=Re,qe=[],Me=0,Ne=[];function Ue(e){if("object"!==t(this))throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ae,this._lib=!1;var n=this._PSD=Fe;if(U&&(this._stackHolder=L(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==ve)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Le(this,this._value))}this._state=null,this._value=null,++n.ref,ze(this,e)}var Ve={get:function(){var e=Fe,t=lt;function n(n,r){var i=this,o=!e.global&&(e!==Fe||t!==lt);o&&dt();var u=new Ue(function(t,u){Ge(i,new We(xt(n,e,o),xt(r,e,o),t,u,e))});return U&&Xe(u,this),u}return n.prototype=ve,n},set:function(e){h(this,"then",e&&e.prototype===ve?Ve:{get:function(){return e},set:Ve.set})}};function We(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function ze(e,t){try{t(function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&$e();t&&"function"==typeof t.then?ze(e,function(e,n){t instanceof Ue?t._then(e,n):t.then(e,n)}):(e._state=!0,e._value=t,Ye(e)),n&&Ze()}},Le.bind(null,e))}catch(n){Le(e,n)}}function Le(e,n){if(De.push(n),null===e._state){var r=e._lib&&$e();n=Be(n),e._state=!1,e._value=n,U&&null!==n&&"object"===t(n)&&!n._promise&&x(function(){var t=y(n,"stack");n._promise=e,h(n,"stack",{get:function(){return je?t&&(t.get?t.get.apply(n):t.value):e.stack}})}),nt(e),Ye(e),r&&Ze()}}function Ye(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ge(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===Me&&(++Me,Ce(function(){0==--Me&&et()},[]))}function Ge(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Me,Ce(He,[n,e,t])}else e._listeners.push(t)}function He(e,t,n){try{Te=t;var r,i=t._value;t._state?r=e(i):(De.length&&(De=[]),r=e(i),-1===De.indexOf(i)&&rt(t)),n.resolve(r)}catch(o){n.reject(o)}finally{Te=null,0==--Me&&et(),--n.psd.ref||n.psd.finalize()}}function Qe(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,o,u=e._value;null!=u?(i=u.name||"Error",o=u.message||u,r=Y(u,0)):(i=u,o=""),t.push(i+(o?": "+o:"")+r)}return U&&((r=Y(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&Qe(e._prev,t,n)),t}function Xe(e,t){var n=t?t._numPrev+1:0;n<me&&(e._prev=t,e._numPrev=n)}function Je(){$e()&&Ze()}function $e(){var e=Ae;return Ae=!1,Se=!1,e}function Ze(){var e,t,n;do{for(;qe.length>0;)for(e=qe,qe=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(qe.length>0);Ae=!0,Se=!0}function et(){var e=Ie;Ie=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=Ne.slice(0),n=t.length;n;)t[--n]()}function tt(e){Ne.push(function t(){e(),Ne.splice(Ne.indexOf(t),1)}),++Me,Ce(function(){0==--Me&&et()},[])}function nt(e){Ie.some(function(t){return t._value===e._value})||Ie.push(e)}function rt(e){for(var t=Ie.length;t;)if(Ie[--t]._value===e._value)return void Ie.splice(t,1)}function it(e){return new Ue(ve,!1,e)}function ot(e,t){var n=Fe;return function(){var r=$e(),i=Fe;try{return gt(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{gt(i,!1),r&&Ze()}}}l(Ue.prototype,{then:Ve,_then:function(e,t){Ge(this,new We(null,null,e,t,Fe))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,function(e){return e instanceof t?n(e):it(e)}):this.then(null,function(e){return e&&e.name===t?n(e):it(e)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),it(t)})},stack:{get:function(){if(this._stack)return this._stack;try{je=!0;var e=Qe(this,[],ge).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{je=!1}}},timeout:function(e,t){var n=this;return e<1/0?new Ue(function(r,i){var o=setTimeout(function(){return i(new re.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,o))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&h(Ue.prototype,Symbol.toStringTag,"Dexie.Promise"),Re.env=bt(),l(Ue,{all:function(){var e=N.apply(null,arguments).map(yt);return new Ue(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(i,o){return Ue.resolve(i).then(function(n){e[o]=n,--r||t(e)},n)})})},resolve:function(e){if(e instanceof Ue)return e;if(e&&"function"==typeof e.then)return new Ue(function(t,n){e.then(t,n)});var t=new Ue(ve,!0,e);return Xe(t,Te),t},reject:it,race:function(){var e=N.apply(null,arguments).map(yt);return new Ue(function(t,n){e.map(function(e){return Ue.resolve(e).then(t,n)})})},PSD:{get:function(){return Fe},set:function(e){return Fe=e}},newPSD:ht,usePSD:_t,scheduler:{get:function(){return Ce},set:function(e){Ce=e}},rejectionMapper:{get:function(){return Be},set:function(e){Be=e}},follow:function(e,t){return new Ue(function(n,r){return ht(function(t,n){var r=Fe;r.unhandleds=[],r.onunhandled=n,r.finalize=le(function(){var e=this;tt(function(){0===e.unhandleds.length?t():n(e.unhandleds[0])})},r.finalize),e()},t,n,r)})}});var ut={awaits:0,echoes:0,id:0},at=0,st=[],ct=0,lt=0,ft=0;function ht(e,t,n,r){var i=Fe,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++ft;var a=Re.env;o.env=Ee?{Promise:Ue,PromiseProp:{value:Ue,configurable:!0,writable:!0},all:Ue.all,race:Ue.race,resolve:Ue.resolve,reject:Ue.reject,nthen:kt(a.nthen,o),gthen:kt(a.gthen,o)}:{},t&&u(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=_t(o,e,n,r);return 0===o.ref&&o.finalize(),s}function pt(){return ut.id||(ut.id=++at),++ut.awaits,ut.echoes+=be,ut.id}function dt(e){!ut.awaits||e&&e!==ut.id||(0==--ut.awaits&&(ut.id=0),ut.echoes=ut.awaits*be)}function yt(e){return ut.echoes&&e&&e.constructor===Pe?(pt(),e.then(function(e){return dt(),e},function(e){return dt(),Et(e)})):e}function vt(e){++lt,ut.echoes&&0!=--ut.echoes||(ut.echoes=ut.id=0),st.push(Fe),gt(e,!0)}function mt(){var e=st[st.length-1];st.pop(),gt(e,!1)}function gt(e,t){var n=Fe;if((t?!ut.echoes||ct++&&e===Fe:!ct||--ct&&e===Fe)||wt(t?vt.bind(null,e):mt),e!==Fe&&(Fe=e,n===Re&&(Re.env=bt()),Ee)){var r=Re.env.Promise,i=e.env;xe.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(o,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject)}}function bt(){var e=o.Promise;return Ee?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:e.all,race:e.race,resolve:e.resolve,reject:e.reject,nthen:xe.then,gthen:e.prototype.then}:{}}function _t(e,t,n,r,i){var o=Fe;try{return gt(e,!0),t(n,r,i)}finally{gt(o,!1)}}function wt(e){Oe.call(we,e)}function xt(e,t,n){return"function"!=typeof e?e:function(){var r=Fe;n&&pt(),gt(t,!0);try{return e.apply(this,arguments)}finally{gt(r,!1)}}}function kt(e,t){return function(n,r){return e.call(this,xt(n,t,!1),xt(r,t,!1))}}-1===(""+Oe).indexOf("[native code]")&&(pt=dt=ae);var Ot="unhandledrejection";function Pt(e,t){var n;try{n=t.onuncatched(e)}catch(a){}if(!1!==n)try{var r,i={promise:t,reason:e};if(o.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Ot,!0,!0),u(r,i)):o.CustomEvent&&u(r=new CustomEvent(Ot,{detail:i}),i),r&&o.dispatchEvent&&(dispatchEvent(r),!o.PromiseRejectionEvent&&o.onunhandledrejection))try{o.onunhandledrejection(r)}catch(s){}U&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(a){}}var Et=Ue.reject;function jt(e,t,n,r){if(e._state.openComplete||Fe.letThrough){var i=e._createTransaction(t,n,e._dbSchema);try{i.create()}catch(o){return Et(o)}return i._promise(t,function(e,t){return ht(function(){return Fe.trans=i,r(e,t,i)})}).then(function(e){return i._completion.then(function(){return e})})}if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Et(new re.DatabaseClosed);e.open().catch(ae)}return e._state.dbReadyPromise.then(function(){return jt(e,t,n,r)})}var Kt="3.0.0-rc.1",Ct=String.fromCharCode(65535),At=-1/0,St="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",It="String expected.",Dt=[],Tt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Bt=Tt,Rt=Tt,Ft=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},qt="__dbnames",Mt="readonly",Nt="readwrite";function Ut(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Vt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1},Wt=function(){function e(){}return e.prototype._trans=function(e,t,n){var r=this._tx||Fe.trans,i=this.name;function o(e,n,r){if(!r.schema[i])throw new re.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var u=$e();try{return r&&r.db===this.db?r===Fe.trans?r._promise(e,o,n):ht(function(){return r._promise(e,o,n)},{trans:r,transless:Fe.transless||Fe}):jt(this.db,e,[this.name],o)}finally{u&&Ze()}},e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",function(t){return n.core.get({trans:t,key:e}).then(function(e){return n.hook.reading.fire(e)})}).then(t)},e.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(i(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=r(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(e){return e.compound&&t.every(function(t){return e.keyPath.indexOf(t)>=0})&&e.keyPath.every(function(e){return t.indexOf(e)>=0})})[0];if(n&&this.db._maxKey!==Ct)return this.where(n.name).equals(n.keyPath.map(function(t){return e[t]}));!n&&U&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var o=this.schema.idxByName,u=this.db._deps.indexedDB;function a(e,t){try{return 0===u.cmp(e,t)}catch(n){return!1}}var s=t.reduce(function(t,n){var r=t[0],u=t[1],s=o[n],c=e[n];return[r||s,r||!s?Ut(u,s&&s.multi?function(e){var t=k(e,n);return i(t)&&t.some(function(e){return a(c,e)})}:function(e){return a(c,k(e,n))}):u]},[null,null]),c=s[0],l=s[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,i(e)?"["+e.join("+")+"]":e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(c(t,r))try{n[r]=t[r]}catch(i){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},e.prototype.defineClass=function(){return this.mapToClass(function(e){u(this,e)})},e.prototype.add=function(e,t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"add",keys:null!=t?[t]:null,values:[e]})}).then(function(e){return e.numFailures?Ue.reject(e.failures[0]):e.lastResult}).then(function(t){if(!n.core.schema.primaryKey.outbound)try{O(e,n.core.schema.primaryKey.keyPath,t)}catch(r){}return t})},e.prototype.update=function(e,n){if("object"!==t(n)||i(n))throw new re.InvalidArgument("Modifications must be an object.");if("object"!==t(e)||i(e))return this.where(":id").equals(e).modify(n);r(n).forEach(function(t){O(e,t,n[t])});var o=k(e,this.schema.primKey.keyPath);return void 0===o?Et(new re.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(n)},e.prototype.put=function(e,t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"put",values:[e],keys:null!=t?[t]:null})}).then(function(e){return e.numFailures?Ue.reject(e.failures[0]):e.lastResult}).then(function(t){if(!n.core.schema.primaryKey.outbound)try{O(e,n.core.schema.primaryKey.keyPath,t)}catch(r){}return t})},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(e){return e.numFailures?Ue.reject(e.failures[0]):void 0})},e.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Vt})}).then(function(e){return e.numFailures?Ue.reject(e.failures[0]):void 0})},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n})})},e.prototype.bulkAdd=function(e,t){var n=this;return this._trans("readwrite",function(r){if(!n.core.schema.primaryKey.outbound&&t)throw new re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var i=e.length;return n.core.mutate({trans:r,type:"add",keys:t,values:e}).then(function(e){var t=e.numFailures,r=e.lastResult,o=e.failures;if(0===t)return r;throw new ee(n.name+".bulkAdd(): "+t+" of "+i+" operations failed",Object.keys(o).map(function(e){return o[e]}))})})},e.prototype.bulkPut=function(e,t){var n=this;return this._trans("readwrite",function(r){if(!n.core.schema.primaryKey.outbound&&t)throw new re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var i=e.length;return n.core.mutate({trans:r,type:"put",keys:t,values:e}).then(function(e){var t=e.numFailures,r=e.lastResult,o=e.failures;if(0===t)return r;throw new ee(n.name+".bulkPut(): "+t+" of "+i+" operations failed",Object.keys(o).map(function(e){return o[e]}))})})},e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:e})}).then(function(e){var r=e.numFailures,i=e.lastResult,o=e.failures;if(0===r)return i;throw new ee(t.name+".bulkDelete(): "+r+" of "+n+" operations failed",o)})},e}();function zt(e){var n={},o=function(t,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return n[t].subscribe.apply(null,o),e}if("string"==typeof t)return n[t]};o.addEventType=s;for(var u=1,a=arguments.length;u<a;++u)s(arguments[u]);return o;function s(e,u,a){if("object"!==t(e)){var c;u||(u=de),a||(a=ae);var l={subscribers:[],fire:a,subscribe:function(e){-1===l.subscribers.indexOf(e)&&(l.subscribers.push(e),l.fire=u(l.fire,e))},unsubscribe:function(e){l.subscribers=l.subscribers.filter(function(t){return t!==e}),l.fire=l.subscribers.reduce(u,a)}};return n[e]=o[e]=l,l}r(c=e).forEach(function(e){var t=c[e];if(i(t))s(e,c[e][0],c[e][1]);else{if("asap"!==t)throw new re.InvalidArgument("Invalid event config");var n=s(e,se,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach(function(e){_(function(){e.apply(null,t)})})})}})}}function Lt(e,t){return p(t).from({prototype:e}),t}function Yt(e){return Lt(Wt.prototype,function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:zt(null,{creating:[fe,ae],reading:[ce,se],updating:[pe,ae],deleting:[he,ae]})})}function Gt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ht(e,t){e.filter=Ut(e.filter,t)}function Qt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Ut(r(),t())}:t,e.justLimit=n&&!r}function Xt(e,t){e.isMatch=Ut(e.isMatch,t)}function Jt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new re.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function $t(e,t,n){var r=Jt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Zt(e,t,n,r){var i=e.replayFilter?Ut(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},u=function(e,n,r){if(!i||i(n,r,function(e){return n.stop(e)},function(e){return n.fail(e)})){var u=n.primaryKey,a=""+u;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(u)),c(o,a)||(o[a]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(u,n),en($t(e,r,n),e.algorithm,u,!e.keysOnly&&e.valueMapper)])}return en($t(e,r,n),Ut(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function en(e,t,n,r){var i=ot(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then(function(e){if(e)return e.start(function(){var n=function(){return e.continue()};t&&!t(e,function(e){return n=e},function(t){e.stop(t),n=ae},function(t){e.fail(t),n=ae})||i(e.value,e,function(e){return n=e}),n()})})}var tn=function(){function e(){}return e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Et.bind(null,n.error)):n.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Et.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Ut(t.algorithm,e)},e.prototype._iterate=function(e,t){return Zt(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&u(n,e),t._ctx=n,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Zt(t,e,n,t.table.core)})},e.prototype.count=function(e){var t=this;return this._read(function(e){var n=t._ctx,r=n.table.core;if(Gt(n,!0))return r.count({trans:e,query:{index:Jt(n,r.schema),range:n.range}}).then(function(e){return Math.min(e,n.limit)});var i=0;return Zt(n,function(){return++i,!1},e,r).then(function(){return i})}).then(e)},e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var u="next"===this._ctx.dir?1:-1;function a(e,t){var n=o(e,i),r=o(t,i);return n<r?-u:n>r?u:0}return this.toArray(function(e){return e.sort(a)}).then(t)},e.prototype.toArray=function(e){var t=this;return this._read(function(e){var n=t._ctx;if("next"===n.dir&&Gt(n,!0)&&n.limit>0){var r=n.valueMapper,i=Jt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then(function(e){var t=e.result;return r?t.map(r):t})}var o=[];return Zt(n,function(e){return o.push(e)},e,n.table.core).then(function(){return o})},e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0?this:(t.offset+=e,Gt(t)?Qt(t,function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n(function(){e.advance(t),t=0}),!1))}}):Qt(t,function(){var t=e;return function(){return--t<0}}),this)},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Qt(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}},!0),this},e.prototype.until=function(e,t){return Ht(this._ctx,function(n,r,i){return!e(n.value)||(r(i),t)}),this},e.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){return Ht(this._ctx,function(t){return e(t.value)}),Xt(this._ctx,e),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&Gt(t,!0)&&t.limit>0)return this._read(function(e){var n=Jt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})}).then(function(e){return e.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Ht(this._ctx,function(e){var t=e.primaryKey.toString(),r=c(n,t);return n[t]=!0,!r}),this},e.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(i){var o;if("function"==typeof e)o=e;else{var u=r(e),a=u.length;o=function(t){for(var n=!1,r=0;r<a;++r){var i=u[r],o=e[i];k(t,i)!==o&&(O(t,i,o),n=!0)}return n}}var s=n.table.core,c=s.schema.primaryKey,l=c.outbound,f=c.extractKey,h="testmode"in cr?1:2e3,p=t.db.core.cmp,d=[],y=0,v=[],m=function(e,t){var n=t.failures,r=t.numFailures;for(var i in y+=e-r,n)d.push(n[i])};return t.clone().primaryKeys().then(function(e){var t=function(n){var r=Math.min(h,e.length-n);return s.getMany({trans:i,keys:e.slice(n,n+r)}).then(function(u){for(var a=[],c=[],d=l?[]:null,y=[],v=0;v<r;++v){var g=u[v],b={value:I(g),primKey:e[n+v]};!1!==o.call(b,b.value,b)&&(null==b.value?y.push(e[n+v]):l||0===p(f(g),f(b.value))?(c.push(b.value),l&&d.push(e[n+v])):(y.push(e[n+v]),a.push(b.value)))}return Promise.resolve(a.length>0&&s.mutate({trans:i,type:"add",values:a}).then(function(e){for(var t in e.failures)y.splice(parseInt(t),1);m(a.length,e)})).then(function(e){return c.length>0&&s.mutate({trans:i,type:"put",keys:d,values:c}).then(function(e){return m(c.length,e)})}).then(function(){return y.length>0&&s.mutate({trans:i,type:"delete",keys:y}).then(function(e){return m(y.length,e)})}).then(function(){return e.length>n+r&&t(n+h)})})};return t(0).then(function(){if(d.length>0)throw new Z("Error modifying one or more objects",d,y,v);return e.length})})})},e.prototype.delete=function(){var e=this._ctx,t=e.range;return Gt(e)&&(e.isPrimKey&&!Rt||3===t.type)?this._write(function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then(function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then(function(e){var n=e.failures,r=(e.lastResult,e.results,e.numFailures);if(r)throw new Z("Could not delete some values",Object.keys(n).map(function(e){return n[e]}),t-r);return t-r})})}):this.modify(function(e,t){return t.value=null})},e}();function nn(e){return Lt(tn.prototype,function(t,n){this.db=e;var r=Vt,i=null;if(n)try{r=n()}catch(s){i=s}var o=t._ctx,u=o.table,a=u.hook.reading.fire;this._ctx={table:u,index:o.index,isPrimKey:!o.index||u.schema.primKey.keyPath&&o.index===u.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:o.or,valueMapper:a!==se?a:null}})}function rn(e,t){return e<t?-1:e===t?0:1}function on(e,t){return e>t?-1:e===t?0:1}function un(e,t,n){var r=e instanceof dn?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function an(e){return new e.Collection(e,function(){return pn("")}).limit(0)}function sn(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function cn(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function ln(e,t,n,r,i,o){for(var u=Math.min(e.length,r.length),a=-1,s=0;s<u;++s){var c=t[s];if(c!==r[s])return i(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;i(e[s],c)<0&&(a=s)}return u<r.length&&"next"===o?e+n.substr(e.length):u<e.length&&"prev"===o?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function fn(e,t,n,r){var i,o,u,a,s,c,l,f=n.length;if(!n.every(function(e){return"string"==typeof e}))return un(e,It);function h(e){i=sn(e),o=cn(e),u="next"===e?rn:on;var t=n.map(function(e){return{lower:o(e),upper:i(e)}}).sort(function(e,t){return u(e.lower,t.lower)});a=t.map(function(e){return e.upper}),s=t.map(function(e){return e.lower}),c=e,l="next"===e?"":r}h("next");var p=new e.Collection(e,function(){return hn(a[0],s[f-1]+r)});p._ondirectionchange=function(e){h(e)};var d=0;return p._addAlgorithm(function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var h=o(i);if(t(h,s,d))return!0;for(var p=null,y=d;y<f;++y){var v=ln(i,h,a[y],s[y],u,c);null===v&&null===p?d=y+1:(null===p||u(p,v)>0)&&(p=v)}return n(null!==p?function(){e.continue(p+l)}:r),!1}),p}function hn(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function pn(e){return{type:1,lower:e,upper:e}}var dn=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!0,configurable:!0}),e.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?an(this):new this.Collection(this,function(){return hn(e,t,!n,!r)})}catch(i){return un(this,St)}},e.prototype.equals=function(e){return new this.Collection(this,function(){return pn(e)})},e.prototype.above=function(e){return null==e?un(this,St):new this.Collection(this,function(){return hn(e,void 0,!0)})},e.prototype.aboveOrEqual=function(e){return null==e?un(this,St):new this.Collection(this,function(){return hn(e,void 0,!1)})},e.prototype.below=function(e){return null==e?un(this,St):new this.Collection(this,function(){return hn(void 0,e,!1,!0)})},e.prototype.belowOrEqual=function(e){return null==e?un(this,St):new this.Collection(this,function(){return hn(void 0,e)})},e.prototype.startsWith=function(e){return"string"!=typeof e?un(this,It):this.between(e,e+Ct,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):fn(this,function(e,t){return 0===e.indexOf(t[0])},[e],Ct)},e.prototype.equalsIgnoreCase=function(e){return fn(this,function(e,t){return e===t[0]},[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=N.apply(M,arguments);return 0===e.length?an(this):fn(this,function(e,t){return-1!==t.indexOf(e)},e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=N.apply(M,arguments);return 0===e.length?an(this):fn(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,Ct)},e.prototype.anyOf=function(){var e=this,t=N.apply(M,arguments),n=this._cmp;try{t.sort(n)}catch(o){return un(this,St)}if(0===t.length)return an(this);var r=new this.Collection(this,function(){return hn(t[0],t[t.length-1])});r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm(function(e,r,o){for(var u=e.key;n(u,t[i])>0;)if(++i===t.length)return r(o),!1;return 0===n(u,t[i])||(r(function(){e.continue(t[i])}),!1)}),r},e.prototype.notEqual=function(e){return this.inAnyRange([[At,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=N.apply(M,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(n){return un(this,St)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[At,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,i=this._ascending,o=this._descending,u=this._min,a=this._max;if(0===e.length)return an(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0}))return un(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",re.InvalidArgument);var s=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers;var l,f=i;function h(e,t){return f(e[0],t[0])}try{(l=e.reduce(function(e,t){for(var n=0,i=e.length;n<i;++n){var o=e[n];if(r(t[0],o[1])<0&&r(t[1],o[0])>0){o[0]=u(o[0],t[0]),o[1]=a(o[1],t[1]);break}}return n===i&&e.push(t),e},[])).sort(h)}catch(g){return un(this,St)}var p=0,d=c?function(e){return i(e,l[p][1])>0}:function(e){return i(e,l[p][1])>=0},y=s?function(e){return o(e,l[p][0])>0}:function(e){return o(e,l[p][0])>=0};var v=d,m=new this.Collection(this,function(){return hn(l[0][0],l[l.length-1][1],!s,!c)});return m._ondirectionchange=function(e){"next"===e?(v=d,f=i):(v=y,f=o),l.sort(h)},m._addAlgorithm(function(e,t,r){for(var o=e.key;v(o);)if(++p===l.length)return t(r),!1;return!!function(e){return!d(e)&&!y(e)}(o)||0!==n._cmp(o,l[p][1])&&0!==n._cmp(o,l[p][0])&&(t(function(){f===i?e.continue(l[p][0]):e.continue(l[p][1])}),!1)}),m},e.prototype.startsWithAnyOf=function(){var e=N.apply(M,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?an(this):this.inAnyRange(e.map(function(e){return[e,e+Ct]})):un(this,"startsWithAnyOf() only works with strings")},e}();function yn(e){return Lt(dn.prototype,function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};var i=e._deps.indexedDB;if(!i)throw new re.MissingAPI("indexedDB API missing");this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(e,t){return i.cmp(t,e)},this._max=function(e,t){return i.cmp(e,t)>0?e:t},this._min=function(e,t){return i.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange})}function vn(e){return 1===e.length?e[0]:e}function mn(e){try{return e.only([[]]),[[]]}catch(t){return Ct}}function gn(e){return ot(function(t){return bn(t),e(t.target.error),!1})}function bn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var _n=function(){function e(){}return e.prototype._lock=function(){return b(!Fe.global),++this._reculock,1!==this._reculock||Fe.global||(Fe.lockOwnerFor=this),this},e.prototype._unlock=function(){if(b(!Fe.global),0==--this._reculock)for(Fe.global||(Fe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{_t(e[1],e[0])}catch(t){}}return this},e.prototype._locked=function(){return this._reculock&&Fe.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(b(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new re.DatabaseClosed(r);case"MissingAPIError":throw new re.MissingAPI(r.message,r);default:throw new re.OpenFailed(r)}if(!this.active)throw new re.TransactionInactive;return b(null===this._completion._state),(e=this.idbtrans=e||n.transaction(vn(this.storeNames),this.mode)).onerror=ot(function(n){bn(n),t._reject(e.error)}),e.onabort=ot(function(n){bn(n),t.active&&t._reject(new re.Abort(e.error)),t.active=!1,t.on("abort").fire(n)}),e.oncomplete=ot(function(){t.active=!1,t._resolve()}),this},e.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return Et(new re.ReadOnly("Transaction is readonly"));if(!this.active)return Et(new re.TransactionInactive);if(this._locked())return new Ue(function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},Fe])});if(n)return ht(function(){var e=new Ue(function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)});return e.finally(function(){return r._unlock()}),e._lib=!0,e});var i=new Ue(function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)});return i._lib=!0,i},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),n=Ue.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then(function(){return n});else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new Ue(function(e,r){n.then(function(n){return t._waitingQueue.push(ot(e.bind(null,n)))},function(e){return t._waitingQueue.push(ot(r.bind(null,e)))}).finally(function(){t._waitingFor===i&&(t._waitingFor=null)})})},e.prototype.abort=function(){this.active&&this._reject(new re.Abort),this.active=!1},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(c(t,e))return t[e];var n=this.schema[e];if(!n)throw new re.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r},e}();function wn(e){return Lt(_n.prototype,function(t,n,r,i){var o=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.idbtrans=null,this.on=zt(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ue(function(e,t){o._resolve=e,o._reject=t}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(e){var t=o.active;return o.active=!1,o.on.error.fire(e),o.parent?o.parent._reject(e):t&&o.idbtrans&&o.idbtrans.abort(),Et(e)})})}function xn(e,t,n,r,i,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n?"&":"")+(r?"*":"")+(i?"++":"")+kn(t)}}function kn(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function On(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:w(n,function(e){return[e.name,e]})}}function Pn(e){return null==e?function(){}:"string"==typeof e?En(e):function(t){return k(t,e)}}function En(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return k(t,e)}}function jn(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}function Kn(e,t,n){return"add"===t.type?Promise.resolve(new Array(t.values.length)):e.getMany({trans:t.trans,keys:n})}function Cn(e){return[].slice.call(e)}var An=0;function Sn(e){return null==e?":id":"string"==typeof e?e:"["+e.join("+")+"]"}function In(e,t,n,r){var o=t.cmp.bind(t);function u(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var t=e.lower,r=e.upper,i=e.lowerOpen,o=e.upperOpen;return void 0===t?void 0===r?null:n.upperBound(r,!!o):void 0===r?n.lowerBound(t,!!i):n.bound(t,r,!!i,!!o)}var a=function(e,t){var n=Cn(e.objectStoreNames);return{schema:{name:e.name,tables:n.map(function(e){return t.objectStore(e)}).map(function(e){var t=e.keyPath,n=e.autoIncrement,r=i(t),o=null==t,u={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:o,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Pn(t)},indexes:Cn(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,n=e.unique,r=e.multiEntry,o=e.keyPath,a={name:t,compound:i(o),keyPath:o,unique:n,multiEntry:r,extractKey:Pn(o)};return u[Sn(o)]=a,a}),getIndexByKeyPath:function(e){return u[Sn(e)]}};return u[":id"]=a.primaryKey,null!=t&&(u[Sn(t)]=a.primaryKey),a})},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,r),s=a.schema,c=a.hasGetAll,l=s.tables.map(function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(n){var r=n.trans,i=n.type,o=n.keys,a=n.values,s=n.range,c=n.wantResults;return new Promise(function(n,l){n=ot(n);var f=r.objectStore(t),h=null==f.keyPath,p="put"===i||"add"===i;if(!p&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var d=(o||a||{length:1}).length;if(o&&a&&o.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===d)return n({numFailures:0,failures:{},results:[],lastResult:void 0});var y,v=c&&(o||jn(e.primaryKey,{type:i,keys:o,values:a})).slice(),m=[],g=0,b=function(e){++g,bn(e),v&&(v[e.target._reqno]=void 0),m[e.target._reqno]=e.target.error},_=function(e){var t=e.target;v[t._reqno]=t.result};if("deleteRange"===i){if(4===s.type)return n({numFailures:g,failures:m,results:v,lastResult:void 0});y=3===s.type?f.clear():f.delete(u(s))}else{var w=p?h?[a,o]:[a,null]:[o,null],x=w[0],k=w[1];if(p)for(var O=0;O<d;++O)(y=k&&void 0!==k[O]?f[i](x[O],k[O]):f[i](x[O]))._reqno=O,v&&void 0===v[O]&&(y.onsuccess=_),y.onerror=b;else for(O=0;O<d;++O)(y=f[i](x[O]))._reqno=O,y.onerror=b}var P=function(e){var t=e.target.result;v&&(v[d-1]=t),n({numFailures:g,failures:m,results:v,lastResult:t})};y.onerror=function(e){b(e),P(e)},y.onsuccess=P})},getMany:function(e){var n=e.trans,r=e.keys;return new Promise(function(e,i){e=ot(e);for(var o,u=n.objectStore(t),a=r.length,s=new Array(a),c=0,l=0,f=function(t){var n=t.target;s[n._pos]=n.result,++l===c&&e(s)},h=gn(i),p=0;p<a;++p)null!=r[p]&&((o=u.get(r[p]))._pos=p,o.onsuccess=f,o.onerror=h,++c);0===c&&e(s)})},get:function(e){var n=e.trans,r=e.key;return new Promise(function(e,i){e=ot(e);var o=n.objectStore(t).get(r);o.onsuccess=function(t){return e(t.target.result)},o.onerror=gn(i)})},query:function(e){return function(n){return new Promise(function(r,i){r=ot(r);var o=n.trans,a=n.values,s=n.limit,c=n.query,l=s===1/0?void 0:s,f=c.index,h=c.range,p=o.objectStore(t),d=f.isPrimaryKey?p:p.index(f.name),y=u(h);if(0===s)return r({result:[]});if(e){var v=a?d.getAll(y,l):d.getAllKeys(y,l);v.onsuccess=function(e){return r({result:e.target.result})},v.onerror=gn(i)}else{var m=0,g=!a&&"openKeyCursor"in d?d.openKeyCursor(y):d.openCursor(y),b=[];g.onsuccess=function(e){var t=g.result;return t?(b.push(a?t.value:t.primaryKey),++m===s?r({result:b}):void t.continue()):r({result:b})},g.onerror=gn(i)}})}}(c),openCursor:function(e){var n=e.trans,r=e.values,i=e.query,o=e.reverse,a=e.unique;return new Promise(function(e,s){e=ot(e);var c=i.index,l=i.range,f=n.objectStore(t),h=c.isPrimaryKey?f:f.index(c.name),p=o?a?"prevunique":"prev":a?"nextunique":"next",d=!r&&"openKeyCursor"in h?h.openKeyCursor(u(l),p):h.openCursor(u(l),p);d.onerror=gn(s),d.onsuccess=ot(function(t){var r=d.result;if(r){r.___id=++An,r.done=!1;var i=r.continue.bind(r),o=r.continuePrimaryKey;o&&(o=o.bind(r));var u=r.advance.bind(r),a=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=ot(s),r.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},r.start=function(e){var t=new Promise(function(e,t){e=ot(e),d.onerror=gn(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=a,e(t)}}),n=function(){if(d.result)try{e()}catch(t){r.fail(t)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return d.onsuccess=ot(function(e){d.onsuccess=n,n()}),r.continue=i,r.continuePrimaryKey=o,r.advance=u,n(),t},e(r)}else e(null)},s)})},count:function(e){var n=e.query,r=e.trans,i=n.index,o=n.range;return new Promise(function(e,n){var a=r.objectStore(t),s=i.isPrimaryKey?a:a.index(i.name),c=u(o),l=c?s.count(c):s.count();l.onsuccess=ot(function(t){return e(t.target.result)}),l.onerror=gn(n)})}}}(e)}),f={};return l.forEach(function(e){return f[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!f[e])throw new Error("Table '"+e+"' not found");return f[e]},cmp:o,MIN_KEY:-1/0,MAX_KEY:mn(n),schema:s}}function Dn(e,t){return t.reduce(function(e,t){var r=t.create;return n({},e,r(e))},e)}function Tn(e,t,n,r){var i=n.IDBKeyRange;return{dbcore:Dn(In(t,n.indexedDB,i,r),e.dbcore)}}function Bn(e,t){var n=t.db,r=Tn(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(function(t){var n=t.name;e.core.schema.tables.some(function(e){return e.name===n})&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))})}function Rn(e,t,n,r){n.forEach(function(n){var i=r[n];t.forEach(function(t){n in t||(t===e.Transaction.prototype||t instanceof e.Transaction?h(t,n,{get:function(){return this.table(n)}}):t[n]=new e.Table(n,i))})})}function Fn(e,t){t.forEach(function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]})}function qn(e,t){return e._cfg.version-t._cfg.version}function Mn(e,t,n,i){var o=e._dbSchema,u=e._createTransaction("readwrite",e._storeNames,o);u.create(n),u._completion.catch(i);var a=u._reject.bind(u),s=Fe.transless||Fe;ht(function(){Fe.trans=u,Fe.transless=s,0===t?(r(o).forEach(function(e){Vn(n,e,o[e].primKey,o[e].indexes)}),Bn(e,n),Ue.follow(function(){return e.on.populate.fire(u)}).catch(a)):Nn(e,t,u,n).catch(a)})}function Nn(e,t,n,i){var o=[],u=e._versions,a=u.filter(function(e){return e._cfg.version===t})[0];if(!a)throw new re.Upgrade("Dexie specification of currently installed DB version is missing");var s=e._dbSchema=a._cfg.dbschema,c=!1;return u.filter(function(e){return e._cfg.version>t}).forEach(function(t){o.push(function(){var o=s,u=t._cfg.dbschema;Gn(e,o,i),Gn(e,u,i),s=e._dbSchema=u;var a=Un(o,u);a.add.forEach(function(e){Vn(i,e[0],e[1].primKey,e[1].indexes)}),a.change.forEach(function(e){if(e.recreate)throw new re.Upgrade("Not yet support for changing primary key");var t=i.objectStore(e.name);e.add.forEach(function(e){return Ln(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),Ln(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var l=t._cfg.contentUpgrade;if(l){Bn(e,i),c=!0;var f,h=E(u);a.del.forEach(function(e){h[e]=o[e]}),Fn(e,[e.Transaction.prototype]),Rn(e,[e.Transaction.prototype],r(h),h),n.schema=h,pt();var p=Ue.follow(function(){if(f=l(n))if(f.constructor===Pe){var e=dt.bind(null,null);f.then(e,e)}else dt();else dt()});return f&&"function"==typeof f.then?Ue.resolve(f):p.then(function(){return f})}}),o.push(function(r){c&&Bt||zn(t._cfg.dbschema,r);Fn(e,[e.Transaction.prototype]),Rn(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema})}),function e(){return o.length?Ue.resolve(o.shift()(n.idbtrans)).then(e):Ue.resolve()}().then(function(){Wn(s,i)})}function Un(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],o=t[n];if(i){var u={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)u.recreate=!0,r.change.push(u);else{var a=i.idxByName,s=o.idxByName,c=void 0;for(c in a)s[c]||u.del.push(c);for(c in s){var l=a[c],f=s[c];l?l.src!==f.src&&u.change.push(f):u.add.push(f)}(u.del.length>0||u.add.length>0||u.change.length>0)&&r.change.push(u)}}else r.add.push([n,o])}return r}function Vn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){return Ln(i,e)}),i}function Wn(e,t){r(e).forEach(function(n){t.db.objectStoreNames.contains(n)||Vn(t,n,e[n].primKey,e[n].indexes)})}function zn(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}function Ln(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Yn(e,t,n){e.verno=t.version/10;var i=e._dbSchema={},o=e._storeNames=m(t.objectStoreNames,0);0!==o.length&&(o.forEach(function(e){for(var t=n.objectStore(e),r=t.keyPath,o=xn(kn(r),r||"",!1,!1,!!t.autoIncrement,r&&"string"!=typeof r),u=[],a=0;a<t.indexNames.length;++a){var s=t.index(t.indexNames[a]);r=s.keyPath;var c=xn(s.name,r,!!s.unique,!!s.multiEntry,!1,r&&"string"!=typeof r);u.push(c)}i[e]=On(e,o,u)}),Rn(e,[e._allTables],r(i),i))}function Gn(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var u=r[i],a=n.objectStore(u);e._hasGetAll="getAll"in a;for(var s=0;s<a.indexNames.length;++s){var c=a.indexNames[s],l=a.index(c).keyPath,f="string"==typeof l?l:"["+m(l).join("+")+"]";if(t[u]){var h=t[u].idxByName[f];h&&(h.name=c)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Hn(e){var t=[];return e.split(",").forEach(function(e){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;t.push(xn(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),i(r)))}),t}var Qn,Xn=function(){function e(){}return e.prototype._parseStoresSpec=function(e,t){r(e).forEach(function(n){if(null!==e[n]){var r=Hn(e[n]),i=r.shift();if(i.multi)throw new re.Schema("Primary key cannot be multi-valued");r.forEach(function(e){if(e.auto)throw new re.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new re.Schema("Index must have a name and cannot be an empty string")}),t[n]=On(n,i,r)}})},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,e):e;var n=t._versions,i={},o={};return n.forEach(function(e){u(i,e._cfg.storesSource),o=e._cfg.dbschema={},e._parseStoresSpec(i,o)}),t._dbSchema=o,Fn(t,[t._allTables,t,t.Transaction.prototype]),Rn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],r(o),o),t._storeNames=r(o),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=e,this},e}();function Jn(e){return Lt(Xn.prototype,function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function $n(e){var t,n=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);if(!n){var r=new cr(qt,{addons:[]});r.version(1).stores({dbnames:"name"}),t=r.table("dbnames")}return{getDatabaseNames:function(){return n?new Ue(function(t,r){var i=n.call(e);i.onsuccess=function(e){return t(m(e.target.result,0))},i.onerror=gn(r)}):t.toCollection().primaryKeys()},add:function(e){return!n&&e!==qt&&t.put({name:e}).catch(ae)},remove:function(e){return!n&&e!==qt&&t.delete(e).catch(ae)}}}function Zn(e){try{Qn=$n(e)}catch(t){}}function er(e){return ht(function(){return Fe.letThrough=!0,e()})}function tr(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Et(t.dbOpenError):e});U&&(t.openCanceller._stackHolder=L()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.dbReadyResolve,i=null;return Ue.race([t.openCanceller,new Ue(function(r,o){if(!n)throw new re.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var u=e.name,a=t.autoSchema?n.open(u):n.open(u,Math.round(10*e.verno));if(!a)throw new re.MissingAPI("IndexedDB API not available");a.onerror=gn(o),a.onblocked=ot(e._fireOnBlocked),a.onupgradeneeded=ot(function(r){if(i=a.transaction,t.autoSchema&&!e._options.allowEmptyDB){a.onerror=bn,i.abort(),a.result.close();var s=n.deleteDatabase(u);s.onsuccess=s.onerror=ot(function(){o(new re.NoSuchDatabase("Database "+u+" doesnt exist"))})}else{i.onerror=gn(o);var c=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;Mn(e,c/10,i,o)}},o),a.onsuccess=ot(function(){i=null;var n=e.idbdb=a.result,o=m(n.objectStoreNames);if(o.length>0)try{var s=n.transaction(vn(o),"readonly");t.autoSchema?Yn(e,n,s):Gn(e,e._dbSchema,s),Bn(e,s)}catch(c){}Dt.push(e),n.onversionchange=ot(function(n){t.vcFired=!0,e.on("versionchange").fire(n)}),Qn.add(u),r()},o)})]).then(function(){return t.onReadyBeingFired=[],Ue.resolve(er(e.on.ready.fire)).then(function e(){if(t.onReadyBeingFired.length>0){var n=t.onReadyBeingFired.reduce(ye,ae);return t.onReadyBeingFired=[],Ue.resolve(er(n)).then(e)}})}).finally(function(){t.onReadyBeingFired=null}).then(function(){return t.isBeingOpened=!1,e}).catch(function(n){try{i&&i.abort()}catch(r){}return t.isBeingOpened=!1,e.close(),t.dbOpenError=n,Et(t.dbOpenError)}).finally(function(){t.openComplete=!0,r()})}function nr(e){var t=function(t){return e.next(t)},n=o(t),r=o(function(t){return e.throw(t)});function o(e){return function(t){var o=e(t),u=o.value;return o.done?u:u&&"function"==typeof u.then?u.then(n,r):i(u)?Promise.all(u).then(n,r):n(u)}}return o(t)()}function rr(e,t,n){var r=arguments.length;if(r<2)throw new re.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,K(i),n]}function ir(e,t,n,r,i){return Ue.resolve().then(function(){var o,u=Fe.transless||Fe,a=e._createTransaction(t,n,e._dbSchema,r),s={trans:a,transless:u};r?a.idbtrans=r.idbtrans:a.create(),pt();var c=Ue.follow(function(){if(o=i.call(a,a))if(o.constructor===Pe){var e=dt.bind(null,null);o.then(e,e)}else dt(),"function"==typeof o.next&&"function"==typeof o.throw&&(o=nr(o));else dt()},s);return(o&&"function"==typeof o.then?Ue.resolve(o).then(function(e){return a.active?e:Et(new re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return o})).then(function(e){return r&&a._resolve(),a._completion.then(function(){return e})}).catch(function(e){return a._reject(e),Et(e)})})}function or(e,t,n){for(var r=i(e)?e.slice():[e],o=0;o<n;++o)r.push(t);return r}function ur(e){return n({},e,{table:function(t){var r=e.table(t),i=r.schema,o={},u=[];function a(e,t,r){var i=Sn(e),s=o[i]=o[i]||[],c=null==e?0:"string"==typeof e?1:e.length,l=t>0,f=n({},r,{isVirtual:l,isPrimaryKey:!l&&r.isPrimaryKey,keyTail:t,keyLength:c,extractKey:Pn(e),unique:!l&&r.unique});(s.push(f),f.isPrimaryKey||u.push(f),c>1)&&a(2===c?e[0]:e.slice(0,c-1),t+1,r);return s.sort(function(e,t){return e.keyTail-t.keyTail}),f}var s=a(i.primaryKey.keyPath,0,i.primaryKey);o[":id"]=[s];for(var c=0,l=i.indexes;c<l.length;c++){var f=l[c];a(f.keyPath,0,f)}function h(t){var r,i,o=t.query.index;return o.isVirtual?n({},t,{query:{index:o,range:(r=t.query.range,i=o.keyTail,{type:1===r.type?2:r.type,lower:or(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:or(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}):t}return n({},r,{schema:n({},i,{primaryKey:s,indexes:u,getIndexByKeyPath:function(e){var t=o[Sn(e)];return t&&t[0]}}),count:function(e){return r.count(h(e))},query:function(e){return r.query(h(e))},openCursor:function(t){var n=t.query.index,i=n.keyTail,o=n.isVirtual,u=n.keyLength;if(!o)return r.openCursor(t);return r.openCursor(h(t)).then(function(n){return n&&function(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(or(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(or(n.key,t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(or(t,e.MAX_KEY,i),r)}},key:{get:function(){var e=n.key;return 1===u?e[0]:e.slice(0,u)}},value:{get:function(){return n.value}}})}(n)})}})}})}var ar={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:ur},sr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return n({},e,{table:function(t){var r=e.table(t),i=r.schema.primaryKey;return n({},r,{mutate:function(e){var o=Fe.trans,u=o.table(t).hook,a=u.deleting,s=u.creating,c=u.updating;switch(e.type){case"add":if(s.fire===ae)break;return o._promise("readwrite",function(){return l(e)},!0);case"put":if(s.fire===ae&&c.fire===ae)break;return o._promise("readwrite",function(){return l(e)},!0);case"delete":if(a.fire===ae)break;return o._promise("readwrite",function(){return l(e)},!0);case"deleteRange":if(a.fire===ae)break;return o._promise("readwrite",function(){return function(e){return function e(t,o,u){return r.query({trans:t,values:!1,query:{index:i,range:o},limit:u}).then(function(r){var i=r.result;return l({type:"delete",keys:i,trans:t}).then(function(r){return r.numFailures>0?Promise.reject(r.failures[0]):i.length<u?{failures:[],numFailures:0,lastResult:void 0}:e(t,n({},o,{lower:i[i.length-1],lowerOpen:!0}),u)})})}(e.trans,e.range,1e4)}(e)},!0)}return r.mutate(e);function l(e){var t=Fe.trans,o=e.keys||jn(i,e);if(!o)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?n({},e,{keys:o,wantResults:!0}):n({},e)).type&&(e.values=e.values.slice()),e.keys&&(e.keys=e.keys.slice()),Kn(r,e,o).then(function(n){var u=o.map(function(r,o){var u=n[o],l={onerror:null,onsuccess:null};if("delete"===e.type)a.fire.call(l,r,u,t);else if("add"===e.type||void 0===u){var f=s.fire.call(l,r,e.values[o],t);null==r&&null!=f&&(r=f,e.keys[o]=r,i.outbound||O(e.values[o],i.keyPath,r))}else{var h=R(u,e.values[o]),p=c.fire.call(l,h,r,u,t);if(p){var d=e.values[o];Object.keys(p).forEach(function(e){O(d,e,p[e])})}}return l});return r.mutate(e).then(function(t){for(var r=t.failures,i=t.results,a=t.numFailures,s=t.lastResult,c=0;c<o.length;++c){var l=i?i[c]:o[c],f=u[c];null==l?f.onerror&&f.onerror(r[c]):f.onsuccess&&f.onsuccess("put"===e.type&&n[c]?e.values[c]:l)}return{failures:r,results:i,numFailures:a,lastResult:s}}).catch(function(e){return u.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}}})}})}},cr=function(){function e(t,r){var i=this;this._middlewares={},this.verno=0;var o=e.dependencies;this._options=r=n({addons:e.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var u=r.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ae,dbReadyPromise:null,cancelOpen:ae,openCanceller:null,autoSchema:!0};a.dbReadyPromise=new Ue(function(e){a.dbReadyResolve=e}),a.openCanceller=new Ue(function(e,t){a.cancelOpen=t}),this._state=a,this.name=t,this.on=zt(this,"populate","blocked","versionchange",{ready:[ye,ae]}),this.on.ready.subscribe=g(this.on.ready.subscribe,function(t){return function(n,r){e.vip(function(){var e=i._state;if(e.openComplete)e.dbOpenError||Ue.resolve().then(n),r&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),r&&t(n);else{t(n);var o=i;r||t(function e(){o.on.ready.unsubscribe(n),o.on.ready.unsubscribe(e)})}})}}),this.Collection=nn(this),this.Table=Yt(this),this.Transaction=wn(this),this.Version=Jn(this),this.WhereClause=yn(this),this.on("versionchange",function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+i.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+i.name+"'. Closing db now to resume the delete request."),i.close()}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+i.name+"') was blocked"):console.warn("Upgrade '"+i.name+"' blocked by other connection holding version "+e.oldVersion/10)}),this._maxKey=mn(r.IDBKeyRange),this._createTransaction=function(e,t,n,r){return new i.Transaction(e,t,n,r)},this._fireOnBlocked=function(e){i.on("blocked").fire(e),Dt.filter(function(e){return e.name===i.name&&e!==i&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(ar),this.use(sr),u.forEach(function(e){return e(i)})}return e.prototype.version=function(e){if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(t){return t._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(qn),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(e){var t=this;return this._state.openComplete||Fe.letThrough?e():new Ue(function(e,n){if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new re.DatabaseClosed);t.open().catch(ae)}t._state.dbReadyPromise.then(e,n)}).then(e)},e.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;i&&this.unuse({stack:t,name:i});var o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:null==r?10:r,name:i}),o.sort(function(e,t){return e.level-t.level}),this},e.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return r?e.create!==r:!!n&&e.name!==n})),this},e.prototype.open=function(){return tr(this)},e.prototype.close=function(){var e=Dt.indexOf(this),t=this._state;if(e>=0&&Dt.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(n){}this.idbdb=null}this._options.autoOpen=!1,t.dbOpenError=new re.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError),t.dbReadyPromise=new Ue(function(e){t.dbReadyResolve=e}),t.openCanceller=new Ue(function(e,n){t.cancelOpen=n})},e.prototype.delete=function(){var e=this,t=arguments.length>0,n=this._state;return new Ue(function(r,i){var o=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=ot(function(){Qn.remove(e.name),r()}),t.onerror=gn(i),t.onblocked=e._fireOnBlocked};if(t)throw new re.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return r(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!0,configurable:!0}),e.prototype.transaction=function(){var e=rr.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,n){var r=this,i=Fe.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var o,u,a=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(u=t.map(function(e){var t=e instanceof r.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}),"r"==e||e===Mt)o=Mt;else{if("rw"!=e&&e!=Nt)throw new re.InvalidArgument("Invalid transaction mode: "+e);o=Nt}if(i){if(i.mode===Mt&&o===Nt){if(!a)throw new re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&u.forEach(function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!a)throw new re.SubTransaction("Table "+e+" not included in parent transaction.");i=null}}),a&&i&&!i.active&&(i=null)}}catch(c){return i?i._promise(null,function(e,t){t(c)}):Et(c)}var s=ir.bind(null,this,o,u,i,n);return i?i._promise(o,s,"lock"):Fe.trans?_t(Fe.transless,function(){return r._whenReady(s)}):this._whenReady(s)},e.prototype.table=function(e){if(!c(this._allTables,e))throw new re.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},e}(),lr=cr;l(lr,n({},ue,{delete:function(e){return new lr(e).delete()},exists:function(e){return new lr(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){return Qn?Qn.getDatabaseNames().then(e):Ue.resolve([])},defineClass:function(){return function(e){u(this,e)}},ignoreTransaction:function(e){return Fe.trans?_t(Fe.transless,e):e()},vip:er,async:function(e){return function(){try{var t=nr(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Ue.resolve(t)}catch(n){return Et(n)}}},spawn:function(e,t,n){try{var r=nr(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Ue.resolve(r)}catch(i){return Et(i)}},currentTransaction:{get:function(){return Fe.trans||null}},waitFor:function(e,t){var n=Ue.resolve("function"==typeof e?lr.ignoreTransaction(e):e).timeout(t||6e4);return Fe.trans?Fe.trans.waitFor(n):n},Promise:Ue,debug:{get:function(){return U},set:function(e){V(e,"dexie"===e?function(){return!0}:Ft)}},derive:p,extend:u,props:l,override:g,Events:zt,getByKeyPath:k,setByKeyPath:O,delByKeyPath:P,shallowClone:E,deepClone:I,getObjectDiff:R,asap:_,minKey:At,addons:[],connections:Dt,errnames:te,dependencies:function(){try{return{indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:Kt,version:Kt.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)}),default:lr,Dexie:lr})),lr.maxKey=mn(lr.dependencies.IDBKeyRange),Zn(cr.dependencies.indexedDB),Ue.rejectionMapper=oe,V(U,Ft);var fr=cr;exports.default=fr;
},{}],"qu0L":[function(require,module,exports) {
"use strict";var e,t,n;Object.defineProperty(exports,"__esModule",{value:!0}),exports.IndexEvent=exports.IndexState=exports.IndexType=void 0,exports.IndexType=e,function(e){e.String="string",e.Number="number",e.Date="Date"}(e||(exports.IndexType=e={})),exports.IndexState=t,function(e){e.IDLE="idle",e.STALE="stale",e.PENDING="pending",e.QUERYING="querying",e.FAILED="error"}(t||(exports.IndexState=t={})),exports.IndexEvent=n,function(e){e.INDEX_START="index:start",e.INVALIDATE="index:invalidate",e.RETRY="index:retry",e.QUERY_START="query:start"}(n||(exports.IndexEvent=n={}));
},{}],"fqhO":[function(require,module,exports) {
"use strict";let e;function t(){return e||(e=n()),e}function n(){try{throw new Error}catch(e){const t=(""+e.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(t)return r(t[0])}return"/"}function r(e){return(""+e).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^\/]+(?:\?.*)?$/,"$1")+"/"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBaseURL=r,exports.getBundleURL=t;
},{}],"qJxi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.selectWorkerImplementation=n,exports.defaultPoolSize=void 0;var e=require("./get-bundle-url.browser");const r="undefined"!=typeof navigator&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4;exports.defaultPoolSize=r;const t=e=>/^(file|https?:)?\/\//i.test(e);function o(e){const r=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(r)}function n(){return"undefined"==typeof Worker?class{constructor(){throw Error("No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.")}}:class extends Worker{constructor(r,n){"string"==typeof r&&n&&n._baseURL?r=new URL(r,n._baseURL):"string"==typeof r&&!t(r)&&(0,e.getBundleURL)().match(/^file:\/\//i)&&(r=new URL(r,(0,e.getBundleURL)().replace(/\/[^\/]+$/,"/")),r=o(`importScripts(${JSON.stringify(r)});`)),"string"==typeof r&&t(r)&&(r=o(`importScripts(${JSON.stringify(r)});`)),super(r,n)}}}
},{"./get-bundle-url.browser":"fqhO"}],"cLff":[function(require,module,exports) {

},{}],"FT5O":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"YHZA":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.selectWorkerImplementation=exports.defaultPoolSize=void 0;var t=n(require("./implementation.browser")),r=n(require("./implementation.node"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var l=n?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}const i=void 0!==e&&"browser"!==e.arch&&"pid"in e,l=i?r:t,p=l.defaultPoolSize;exports.defaultPoolSize=p;const a=l.selectWorkerImplementation;exports.selectWorkerImplementation=a;
},{"./implementation.browser":"qJxi","./implementation.node":"cLff","process":"FT5O"}],"MJiE":[function(require,module,exports) {
var s=1e3,e=60*s,r=60*e,a=24*r,n=7*a,c=365.25*a;function t(t){if(!((t=String(t)).length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(u){var i=parseFloat(u[1]);switch((u[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*c;case"weeks":case"week":case"w":return i*n;case"days":case"day":case"d":return i*a;case"hours":case"hour":case"hrs":case"hr":case"h":return i*r;case"minutes":case"minute":case"mins":case"min":case"m":return i*e;case"seconds":case"second":case"secs":case"sec":case"s":return i*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function u(n){var c=Math.abs(n);return c>=a?Math.round(n/a)+"d":c>=r?Math.round(n/r)+"h":c>=e?Math.round(n/e)+"m":c>=s?Math.round(n/s)+"s":n+"ms"}function i(n){var c=Math.abs(n);return c>=a?o(n,c,a,"day"):c>=r?o(n,c,r,"hour"):c>=e?o(n,c,e,"minute"):c>=s?o(n,c,s,"second"):n+" ms"}function o(s,e,r,a){var n=e>=1.5*r;return Math.round(s/r)+" "+a+(n?"s":"")}module.exports=function(s,e){e=e||{};var r=typeof s;if("string"===r&&s.length>0)return t(s);if("number"===r&&isFinite(s))return e.long?i(s):u(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};
},{}],"G8Vo":[function(require,module,exports) {
function e(e){function n(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]}function t(e){let o;function i(...e){if(!i.enabled)return;const n=i,s=Number(new Date),r=s-(o||s);n.diff=r,n.prev=o,n.curr=s,o=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(s,r)=>{if("%%"===s)return s;a++;const o=t.formatters[r];if("function"==typeof o){const t=e[a];s=o.call(n,t),e.splice(a,1),a--}return s}),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=n(e),i.destroy=s,i.extend=r,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function s(){const e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}function r(e,n){const s=t(this.namespace+(void 0===n?":":n)+e);return s.log=this.log,s}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.names=[],t.skips=[];const s=("string"==typeof e?e:"").split(/[\s,]+/),r=s.length;for(n=0;n<r;n++)s[n]&&("-"===(e=s[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){const e=t.instances[n];e.enabled=t.enabled(e.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,s;for(n=0,s=t.skips.length;n<s;n++)if(t.skips[n].test(e))return!1;for(n=0,s=t.names.length;n<s;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=require("ms"),Object.keys(e).forEach(n=>{t[n]=e[n]}),t.instances=[],t.names=[],t.skips=[],t.formatters={},t.selectColor=n,t.enable(t.load()),t}module.exports=e;
},{"ms":"MJiE"}],"c4FO":[function(require,module,exports) {
var process = require("process");
var e=require("process");function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function C(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+module.exports.humanize(this.diff),!this.useColors)return;const o="color: "+this.color;e.splice(1,0,o,"color: inherit");let C=0,t=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(C++,"%c"===e&&(t=C))}),e.splice(t,0,o)}function t(...e){return"object"==typeof console&&console.log&&console.log(...e)}function r(e){try{e?exports.storage.setItem("debug",e):exports.storage.removeItem("debug")}catch(o){}}function n(){let o;try{o=exports.storage.getItem("debug")}catch(C){}return!o&&void 0!==e&&"env"in e&&(o=void 0),o}function s(){try{return localStorage}catch(e){}}exports.log=t,exports.formatArgs=C,exports.save=r,exports.load=n,exports.useColors=o,exports.storage=s(),exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],module.exports=require("./common")(exports);const{formatters:F}=module.exports;F.j=function(e){try{return JSON.stringify(e)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}};
},{"./common":"G8Vo","process":"FT5O"}],"ys2b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AsyncSerialScheduler=void 0;var e=function(e,s,r,t){return new(r||(r=Promise))(function(i,n){function o(e){try{h(t.next(e))}catch(s){n(s)}}function c(e){try{h(t.throw(e))}catch(s){n(s)}}function h(e){e.done?i(e.value):new r(function(s){s(e.value)}).then(o,c)}h((t=t.apply(e,s||[])).next())})};class s{constructor(e){this._baseObserver=e,this._pendingPromises=new Set}complete(){Promise.all(this._pendingPromises).then(()=>this._baseObserver.complete()).catch(e=>this._baseObserver.error(e))}error(e){this._baseObserver.error(e)}schedule(s){const r=Promise.all(this._pendingPromises),t=[],i=e=>t.push(e),n=Promise.resolve().then(()=>e(this,void 0,void 0,function*(){yield r,yield s(i),this._pendingPromises.delete(n);for(const e of t)this._baseObserver.next(e)})).catch(e=>{this._pendingPromises.delete(n),this._baseObserver.error(e)});this._pendingPromises.add(n)}}exports.AsyncSerialScheduler=s;
},{}],"Ahzu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerObservableSymbol=t,exports.getSymbol=exports.hasSymbol=exports.hasSymbols=void 0;const o=()=>"function"==typeof Symbol;exports.hasSymbols=o;const e=e=>o()&&Boolean(Symbol[e]);exports.hasSymbol=e;const s=o=>e(o)?Symbol[o]:"@@"+o;function t(){o()&&!e("observable")&&(Symbol.observable=Symbol("observable"))}exports.getSymbol=s,e("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));
},{}],"p0FZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Observable=exports.SubscriptionObserver=exports.Subscription=void 0;var e=require("./_symbols");const t=(0,e.getSymbol)("iterator"),r=(0,e.getSymbol)("observable"),o=(0,e.getSymbol)("species");function n(e,t){const r=e[t];if(null!=r){if("function"!=typeof r)throw new TypeError(r+" is not a function");return r}}function s(e){let t=e.constructor;return void 0!==t&&null===(t=t[o])&&(t=void 0),void 0!==t?t:d}function i(e){return e instanceof d}function c(e){c.log?c.log(e):setTimeout(()=>{throw e},0)}function u(e){Promise.resolve().then(()=>{try{e()}catch(t){c(t)}})}function l(e){const t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{const e=n(t,"unsubscribe");e&&e.call(t)}}catch(r){c(r)}}function a(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function f(e){const t=e._queue;if(t){e._queue=void 0,e._state="ready";for(const r of t)if(b(e,r.type,r.value),"closed"===e._state)break}}function b(e,t,r){e._state="running";const o=e._observer;try{const i=o?n(o,t):void 0;switch(t){case"next":i&&i.call(o,r);break;case"error":if(a(e),!i)throw r;i.call(o,r);break;case"complete":a(e),i&&i.call(o)}}catch(s){c(s)}"closed"===e._state?l(e):"running"===e._state&&(e._state="ready")}function p(e,t,r){if("closed"!==e._state)return"buffering"===e._state?(e._queue=e._queue||[],void e._queue.push({type:t,value:r})):"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:r}],void u(()=>f(e))):void b(e,t,r)}class h{constructor(e,t){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";const r=new y(this);try{this._cleanup=t.call(void 0,r)}catch(o){r.error(o)}"initializing"===this._state&&(this._state="ready")}get closed(){return"closed"===this._state}unsubscribe(){"closed"!==this._state&&(a(this),l(this))}}exports.Subscription=h;class y{constructor(e){this._subscription=e}get closed(){return"closed"===this._subscription._state}next(e){p(this._subscription,"next",e)}error(e){p(this._subscription,"error",e)}complete(){p(this._subscription,"complete")}}exports.SubscriptionObserver=y;class d{constructor(e){if(!(this instanceof d))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof e)throw new TypeError("Observable initializer must be a function");this._subscriber=e}subscribe(e,t,r){return"object"==typeof e&&null!==e||(e={next:e,error:t,complete:r}),new h(e,this._subscriber)}pipe(e,...t){let r=this;for(const o of[e,...t])r=o(r);return r}tap(e,t,r){const o="object"!=typeof e||null===e?{next:e,error:t,complete:r}:e;return new d(e=>this.subscribe({next(t){o.next&&o.next(t),e.next(t)},error(t){o.error&&o.error(t),e.error(t)},complete(){o.complete&&o.complete(),e.complete()},start(e){o.start&&o.start(e)}}))}forEach(e){return new Promise((t,r)=>{if("function"!=typeof e)return void r(new TypeError(e+" is not a function"));function o(){n.unsubscribe(),t()}const n=this.subscribe({next(t){try{e(t,o)}catch(s){r(s),n.unsubscribe()}},error:r,complete:t})})}map(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(s(this))(t=>this.subscribe({next(r){let o=r;try{o=e(r)}catch(n){return t.error(n)}t.next(o)},error(e){t.error(e)},complete(){t.complete()}}))}filter(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(s(this))(t=>this.subscribe({next(r){try{if(!e(r))return}catch(o){return t.error(o)}t.next(r)},error(e){t.error(e)},complete(){t.complete()}}))}reduce(e,t){if("function"!=typeof e)throw new TypeError(e+" is not a function");const r=s(this),o=arguments.length>1;let n=!1,i=t;return new r(t=>this.subscribe({next(r){const s=!n;if(n=!0,!s||o)try{i=e(i,r)}catch(c){return t.error(c)}else i=r},error(e){t.error(e)},complete(){if(!n&&!o)return t.error(new TypeError("Cannot reduce an empty sequence"));t.next(i),t.complete()}}))}concat(...e){const t=s(this);return new t(r=>{let o,n=0;return function s(i){o=i.subscribe({next(e){r.next(e)},error(e){r.error(e)},complete(){n===e.length?(o=void 0,r.complete()):s(t.from(e[n++]))}})}(this),()=>{o&&(o.unsubscribe(),o=void 0)}})}flatMap(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");const t=s(this);return new t(r=>{const o=[],n=this.subscribe({next(n){let i;if(e)try{i=e(n)}catch(u){return r.error(u)}else i=n;const c=t.from(i).subscribe({next(e){r.next(e)},error(e){r.error(e)},complete(){const e=o.indexOf(c);e>=0&&o.splice(e,1),s()}});o.push(c)},error(e){r.error(e)},complete(){s()}});function s(){n.closed&&0===o.length&&r.complete()}return()=>{o.forEach(e=>e.unsubscribe()),n.unsubscribe()}})}[r](){return this}static from(o){const s="function"==typeof this?this:d;if(null==o)throw new TypeError(o+" is not an object");const c=n(o,r);if(c){const e=c.call(o);if(Object(e)!==e)throw new TypeError(e+" is not an object");return i(e)&&e.constructor===s?e:new s(t=>e.subscribe(t))}if((0,e.hasSymbol)("iterator")){const e=n(o,t);if(e)return new s(t=>{u(()=>{if(!t.closed){for(const r of e.call(o))if(t.next(r),t.closed)return;t.complete()}})})}if(Array.isArray(o))return new s(e=>{u(()=>{if(!e.closed){for(const t of o)if(e.next(t),e.closed)return;e.complete()}})});throw new TypeError(o+" is not observable")}static of(...e){return new("function"==typeof this?this:d)(t=>{u(()=>{if(!t.closed){for(const r of e)if(t.next(r),t.closed)return;t.complete()}})})}static get[o](){return this}}exports.Observable=d,(0,e.hasSymbols)()&&Object.defineProperty(d,Symbol("extensions"),{value:{symbol:r,hostReportError:c},configurable:!0});var _=d;exports.default=_;
},{"./_symbols":"Ahzu"}],"cvG9":[function(require,module,exports) {
"use strict";function e(e){"function"==typeof e?e():e&&"function"==typeof e.unsubscribe&&e.unsubscribe()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e;exports.default=t;
},{}],"oI3Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./_scheduler"),r=n(require("./observable")),t=n(require("./unsubscribe"));function n(e){return e&&e.__esModule?e:{default:e}}var u=function(e,r,t,n){return new(t||(t=Promise))(function(u,o){function c(e){try{l(n.next(e))}catch(r){o(r)}}function i(e){try{l(n.throw(e))}catch(r){o(r)}}function l(e){e.done?u(e.value):new t(function(r){r(e.value)}).then(c,i)}l((n=n.apply(e,r||[])).next())})};function o(n){return o=>new r.default(r=>{const c=new e.AsyncSerialScheduler(r),i=o.subscribe({complete(){c.complete()},error(e){c.error(e)},next(e){c.schedule(r=>u(this,void 0,void 0,function*(){(yield n(e))&&r(e)}))}});return()=>(0,t.default)(i)})}var c=o;exports.default=c;
},{"./_scheduler":"ys2b","./observable":"p0FZ","./unsubscribe":"cvG9"}],"kpZ2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isAsyncIterator=t,exports.isIterator=e;var r=require("./_symbols");function t(t){return t&&(0,r.hasSymbol)("asyncIterator")&&t[Symbol.asyncIterator]}function e(t){return t&&(0,r.hasSymbol)("iterator")&&t[Symbol.iterator]}
},{"./_symbols":"Ahzu"}],"bNVn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./_scheduler"),r=require("./_util"),t=o(require("./observable")),n=o(require("./unsubscribe"));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e,r,t,n){return new(t||(t=Promise))(function(o,u){function i(e){try{l(n.next(e))}catch(r){u(r)}}function c(e){try{l(n.throw(e))}catch(r){u(r)}}function l(e){e.done?o(e.value):new t(function(r){r(e.value)}).then(i,c)}l((n=n.apply(e,r||[])).next())})},i=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,t=e[Symbol.asyncIterator];return t?t.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(t){r[t]=e[t]&&function(r){return new Promise(function(n,o){(function(e,r,t,n){Promise.resolve(n).then(function(r){e({value:r,done:t})},r)})(n,o,(r=e[t](r)).done,r.value)})}}};function c(o){return c=>new t.default(t=>{const l=new e.AsyncSerialScheduler(t),a=c.subscribe({complete(){l.complete()},error(e){l.error(e)},next(e){l.schedule(t=>u(this,void 0,void 0,function*(){var n,u;const c=yield o(e);if((0,r.isIterator)(c)||(0,r.isAsyncIterator)(c))try{for(var l,a=i(c);!(l=yield a.next()).done;){const e=l.value;t(e)}}catch(s){n={error:s}}finally{try{l&&!l.done&&(u=a.return)&&(yield u.call(a))}finally{if(n)throw n.error}}else c.map(e=>t(e))}))}});return()=>(0,n.default)(a)})}var l=c;exports.default=l;
},{"./_scheduler":"ys2b","./_util":"kpZ2","./observable":"p0FZ","./unsubscribe":"cvG9"}],"Q19s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./observable");function r(r){return new e.Observable(e=>{let t=0;const n=setInterval(()=>{e.next(t++)},r);return()=>clearInterval(n)})}
},{"./observable":"p0FZ"}],"WDYN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./_scheduler"),r=n(require("./observable")),t=n(require("./unsubscribe"));function n(e){return e&&e.__esModule?e:{default:e}}var u=function(e,r,t,n){return new(t||(t=Promise))(function(u,o){function c(e){try{l(n.next(e))}catch(r){o(r)}}function i(e){try{l(n.throw(e))}catch(r){o(r)}}function l(e){e.done?u(e.value):new t(function(r){r(e.value)}).then(c,i)}l((n=n.apply(e,r||[])).next())})};function o(n){return o=>new r.default(r=>{const c=new e.AsyncSerialScheduler(r),i=o.subscribe({complete(){c.complete()},error(e){c.error(e)},next(e){c.schedule(r=>u(this,void 0,void 0,function*(){const t=yield n(e);r(t)}))}});return()=>(0,t.default)(i)})}var c=o;exports.default=c;
},{"./_scheduler":"ys2b","./observable":"p0FZ","./unsubscribe":"cvG9"}],"hkmL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./observable"),r=t(require("./unsubscribe"));function t(e){return e&&e.__esModule?e:{default:e}}function u(...t){return 0===t.length?e.Observable.from([]):new e.Observable(e=>{let u=0;const o=t.map(r=>r.subscribe({error(r){e.error(r),l()},next(r){e.next(r)},complete(){++u===t.length&&(e.complete(),l())}})),l=()=>{o.forEach(e=>(0,r.default)(e))};return l})}var o=u;exports.default=o;
},{"./observable":"p0FZ","./unsubscribe":"cvG9"}],"JEZU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./observable"));function r(e){return e&&e.__esModule?e:{default:e}}class s extends e.default{constructor(){super(e=>(this._observers.add(e),()=>this._observers.delete(e))),this._observers=new Set}next(e){for(const r of this._observers)r.next(e)}error(e){for(const r of this._observers)r.error(e)}complete(){for(const e of this._observers)e.complete()}}var t=s;exports.default=t;
},{"./observable":"p0FZ"}],"jrLi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./observable")),r=t(require("./subject")),u=t(require("./unsubscribe"));function t(e){return e&&e.__esModule?e:{default:e}}function s(t){const s=new r.default;let n,i=0;return new e.default(e=>{n||(n=t.subscribe(s));const r=s.subscribe(e);return i++,()=>{i--,r.unsubscribe(),0===i&&((0,u.default)(n),n=void 0)}})}var n=s;exports.default=n;
},{"./observable":"p0FZ","./subject":"JEZU","./unsubscribe":"cvG9"}],"IUXm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./_scheduler"),t=n(require("./observable")),r=n(require("./unsubscribe"));function n(e){return e&&e.__esModule?e:{default:e}}var u=function(e,t,r,n){return new(r||(r=Promise))(function(u,o){function c(e){try{l(n.next(e))}catch(t){o(t)}}function i(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){e.done?u(e.value):new r(function(t){t(e.value)}).then(c,i)}l((n=n.apply(e,t||[])).next())})};function o(n,o){return c=>new t.default(t=>{let i,l=0;const s=new e.AsyncSerialScheduler(t),d=c.subscribe({complete(){s.complete()},error(e){s.error(e)},next(e){s.schedule(t=>u(this,void 0,void 0,function*(){const r=0===l?void 0===o?e:o:i;i=yield n(r,e,l++),t(i)}))}});return()=>(0,r.default)(d)})}var c=o;exports.default=c;
},{"./_scheduler":"ys2b","./observable":"p0FZ","./unsubscribe":"cvG9"}],"MIfF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"filter",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"flatMap",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"interval",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"map",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"merge",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"multicast",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Observable",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"scan",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"Subject",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"unsubscribe",{enumerable:!0,get:function(){return l.default}});var e=b(require("./filter")),r=b(require("./flatMap")),t=b(require("./interval")),u=b(require("./map")),n=b(require("./merge")),i=b(require("./multicast")),a=b(require("./observable")),f=b(require("./scan")),o=b(require("./subject")),l=b(require("./unsubscribe"));function b(e){return e&&e.__esModule?e:{default:e}}
},{"./filter":"oI3Q","./flatMap":"bNVn","./interval":"Q19s","./map":"WDYN","./merge":"hkmL","./multicast":"jrLi","./observable":"p0FZ","./scan":"IUXm","./subject":"JEZU","./unsubscribe":"cvG9"}],"XR5n":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.PoolEventType=void 0,exports.PoolEventType=e,function(e){e.initialized="initialized",e.taskCanceled="taskCanceled",e.taskCompleted="taskCompleted",e.taskFailed="taskFailed",e.taskQueued="taskQueued",e.taskQueueDrained="taskQueueDrained",e.taskStart="taskStart",e.terminated="terminated"}(e||(exports.PoolEventType=e={}));
},{}],"ZKJ0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.$worker=exports.$transferable=exports.$terminate=exports.$events=exports.$errors=void 0;const e=Symbol("thread.errors");exports.$errors=e;const r=Symbol("thread.events");exports.$events=r;const t=Symbol("thread.terminate");exports.$terminate=t;const o=Symbol("thread.transferable");exports.$transferable=o;const s=Symbol("thread.worker");exports.$worker=s;
},{}],"GsWA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Thread=void 0;var e=require("../symbols");function r(e){throw Error(e)}const s={errors:s=>s[e.$errors]||r("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise."),events:s=>s[e.$events]||r("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise."),terminate:r=>r[e.$terminate]()};exports.Thread=s;
},{"../symbols":"ZKJ0"}],"diRb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"PoolEventType",{enumerable:!0,get:function(){return i.PoolEventType}}),Object.defineProperty(exports,"Thread",{enumerable:!0,get:function(){return s.Thread}}),exports.Pool=void 0;var e=r(require("debug")),t=require("observable-fns"),n=require("./implementation"),i=require("./pool-types"),s=require("./thread");function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t,n,i){return new(n||(n=Promise))(function(s,r){function o(e){try{a(i.next(e))}catch(t){r(t)}}function u(e){try{a(i.throw(e))}catch(t){r(t)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,u)}a((i=i.apply(e,t||[])).next())})};let u=1;function a(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}function l(e){return new Promise(t=>setTimeout(t,e))}function h(e,t){return e.reduce((e,n)=>[...e,...t(n)],[])}function c(e){return e.replace(/\W/g," ").trim().replace(/\s+/g,"-")}function d(e,t){return a(t).map(()=>({init:e(),runningTasks:[]}))}class p{constructor(s,r){this.eventSubject=new t.Subject,this.initErrors=[],this.isClosing=!1,this.nextTaskID=1,this.taskQueue=[];const o="number"==typeof r?{size:r}:r||{},{size:a=n.defaultPoolSize}=o;this.debug=(0,e.default)(`threads:pool:${c(o.name||String(u++))}`),this.options=o,this.workers=d(s,a),this.eventObservable=(0,t.multicast)(t.Observable.from(this.eventSubject)),Promise.all(this.workers.map(e=>e.init)).then(()=>this.eventSubject.next({type:i.PoolEventType.initialized,size:this.workers.length}),e=>{this.debug("Error while initializing pool worker:",e),this.eventSubject.error(e),this.initErrors.push(e)})}findIdlingWorker(){const{concurrency:e=1}=this.options;return this.workers.find(t=>t.runningTasks.length<e)}runPoolTask(e,t){return o(this,void 0,void 0,function*(){const n=this.workers.indexOf(e)+1;this.debug(`Running task #${t.id} on worker #${n}...`),this.eventSubject.next({type:i.PoolEventType.taskStart,taskID:t.id,workerID:n});try{const r=yield t.run(yield e.init);this.debug(`Task #${t.id} completed successfully`),this.eventSubject.next({type:i.PoolEventType.taskCompleted,returnValue:r,taskID:t.id,workerID:n})}catch(s){this.debug(`Task #${t.id} failed`),this.eventSubject.next({type:i.PoolEventType.taskFailed,taskID:t.id,error:s,workerID:n})}})}run(e,t){return o(this,void 0,void 0,function*(){const n=(()=>o(this,void 0,void 0,function*(){yield l(0);try{yield this.runPoolTask(e,t)}finally{e.runningTasks=e.runningTasks.filter(e=>e!==n),this.isClosing||this.scheduleWork()}}))();e.runningTasks.push(n)})}scheduleWork(){this.debug("Attempt de-queueing a task in order to run it...");const e=this.findIdlingWorker();if(!e)return;const t=this.taskQueue.shift();if(!t)return this.debug("Task queue is empty"),void this.eventSubject.next({type:i.PoolEventType.taskQueueDrained});this.run(e,t)}taskCompletion(e){return new Promise((t,n)=>{const s=this.events().subscribe(r=>{r.type===i.PoolEventType.taskCompleted&&r.taskID===e?(s.unsubscribe(),t(r.returnValue)):r.type===i.PoolEventType.taskFailed&&r.taskID===e?(s.unsubscribe(),n(r.error)):r.type===i.PoolEventType.terminated&&(s.unsubscribe(),n(Error("Pool has been terminated before task was run.")))})})}completed(e=!1){return o(this,void 0,void 0,function*(){const t=()=>h(this.workers,e=>e.runningTasks);return this.initErrors.length>0?Promise.reject(this.initErrors[0]):e&&0===this.taskQueue.length?Promise.all(t()):(yield new Promise((e,t)=>{const n=this.eventObservable.subscribe({next(s){s.type===i.PoolEventType.taskQueueDrained?(n.unsubscribe(),e()):s.type===i.PoolEventType.taskFailed&&(n.unsubscribe(),t(s.error))},error:t})}),void(yield Promise.all(t())))})}events(){return this.eventObservable}queue(e){const{maxQueuedJobs:t=1/0}=this.options;if(this.isClosing)throw Error("Cannot schedule pool tasks after terminate() has been called.");if(this.initErrors.length>0)throw this.initErrors[0];const n=()=>this.taskCompletion(r.id);let s;const r={id:this.nextTaskID++,run:e,cancel:()=>{-1!==this.taskQueue.indexOf(r)&&(this.taskQueue=this.taskQueue.filter(e=>e!==r),this.eventSubject.next({type:i.PoolEventType.taskCanceled,taskID:r.id}))},get then(){if(!s){const e=n();s=e.then.bind(e)}return s}};if(this.taskQueue.length>=t)throw Error("Maximum number of pool tasks queued. Refusing to queue another one.\nThis usually happens for one of two reasons: We are either at peak workload right now or some tasks just won't finish, thus blocking the pool.");return this.debug(`Queueing task #${r.id}...`),this.taskQueue.push(r),this.eventSubject.next({type:i.PoolEventType.taskQueued,taskID:r.id}),this.scheduleWork(),r}terminate(e){return o(this,void 0,void 0,function*(){this.isClosing=!0,e||(yield this.completed(!0)),this.eventSubject.next({type:i.PoolEventType.terminated,remainingQueue:[...this.taskQueue]}),this.eventSubject.complete(),yield Promise.all(this.workers.map(e=>o(this,void 0,void 0,function*(){return s.Thread.terminate(yield e.init)})))})}}function k(e,t){return new p(e,t)}p.EventType=i.PoolEventType,k.EventType=i.PoolEventType;const v=k;exports.Pool=v;
},{"debug":"c4FO","observable-fns":"MIfF","./implementation":"YHZA","./pool-types":"XR5n","./thread":"GsWA"}],"Asj5":[function(require,module,exports) {
"use strict";function e(e){return Object.assign(Error(e.message),{name:e.name,stack:e.stack})}function r(e){return{message:e.message,name:e.name,stack:e.stack}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.rehydrateError=e,exports.serializeError=r;
},{}],"pRJ0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPromiseWithResolver=t;const e=()=>void 0;function t(){let t,r=!1,o=e;return[new Promise(e=>{r?e(t):o=e}),e=>{r=!0,t=e,o()}]}
},{}],"elkI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WorkerEventType=void 0;var e,r=require("../symbols");exports.WorkerEventType=e,function(e){e.internalError="internalError",e.message="message",e.termination="termination"}(e||(exports.WorkerEventType=e={}));
},{"../symbols":"ZKJ0"}],"gaoG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ObservablePromise=void 0;var t=require("observable-fns");const e=()=>void 0,s=t=>t,r=t=>Promise.resolve().then(t);function i(t){throw t}class o extends t.Observable{constructor(t){super(e=>{const s=this,r=Object.assign(Object.assign({},e),{complete(){e.complete(),s.onCompletion()},error(t){e.error(t),s.onError(t)},next(t){e.next(t),s.onNext(t)}});try{return this.initHasRun=!0,t(r)}catch(i){r.error(i)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state="pending"}onNext(t){this.firstValueSet||(this.firstValue=t,this.firstValueSet=!0)}onError(t){this.state="rejected",this.rejection=t;for(const e of this.rejectionCallbacks)r(()=>e(t))}onCompletion(){this.state="fulfilled";for(const t of this.fulfillmentCallbacks)r(()=>t(this.firstValue))}then(t,e){const r=t||s,o=e||i;let n=!1;return new Promise((t,e)=>{const s=s=>{if(!n){n=!0;try{t(o(s))}catch(r){e(r)}}};return this.initHasRun||this.subscribe({error:s}),"fulfilled"===this.state?t(r(this.firstValue)):"rejected"===this.state?(n=!0,t(o(this.rejection))):(this.fulfillmentCallbacks.push(e=>{try{t(r(e))}catch(i){s(i)}}),void this.rejectionCallbacks.push(s))})}catch(t){return this.then(void 0,t)}finally(t){const s=t||e;return this.then(t=>(s(),t),()=>s())}}exports.ObservablePromise=o;
},{"observable-fns":"MIfF"}],"U4Yc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isTransferDescriptor=t,exports.Transfer=s;var r=require("./symbols");function e(r){return!(!r||"object"!=typeof r)}function t(e){return e&&"object"==typeof e&&e[r.$transferable]}function s(t,s){if(!s){if(!e(t))throw Error();s=[t]}return{[r.$transferable]:!0,send:t,transferables:s}}
},{"./symbols":"ZKJ0"}],"Uh4r":[function(require,module,exports) {
"use strict";var e,r;Object.defineProperty(exports,"__esModule",{value:!0}),exports.WorkerMessageType=exports.MasterMessageType=void 0,exports.MasterMessageType=e,function(e){e.run="run"}(e||(exports.MasterMessageType=e={})),exports.WorkerMessageType=r,function(e){e.error="error",e.init="init",e.result="result",e.running="running",e.uncaughtError="uncaughtError"}(r||(exports.WorkerMessageType=r={}));
},{}],"NFNj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createProxyFunction=g,exports.createProxyModule=y;var e=n(require("debug")),r=require("observable-fns"),t=require("../common"),s=require("../observable-promise"),a=require("../transferable"),o=require("../types/messages");function n(e){return e&&e.__esModule?e:{default:e}}const u=(0,e.default)("threads:master:messages");let i=1;const d=e=>Array.from(new Set(e)),l=e=>e&&e.type===o.WorkerMessageType.error,f=e=>e&&e.type===o.WorkerMessageType.result,p=e=>e&&e.type===o.WorkerMessageType.running;function c(e,s){return new r.Observable(r=>{let a;const o=n=>{if(u("Message from worker:",n.data),n.data&&n.data.uid===s)if(p(n.data))a=n.data.resultType;else if(f(n.data))"promise"===a?(void 0!==n.data.payload&&r.next(n.data.payload),r.complete(),e.removeEventListener("message",o)):(n.data.payload&&r.next(n.data.payload),n.data.complete&&(r.complete(),e.removeEventListener("message",o)));else if(l(n.data)){const s=(0,t.rehydrateError)(n.data.error);r.error(s),e.removeEventListener("message",o)}};return e.addEventListener("message",o),()=>e.removeEventListener("message",o)})}function m(e){if(0===e.length)return{args:[],transferables:[]};const r=[],t=[];for(const s of e)(0,a.isTransferDescriptor)(s)?(r.push(s.send),t.push(...s.transferables)):r.push(s);return{args:r,transferables:0===t.length?t:d(t)}}function g(e,t){return(...a)=>{const n=i++,{args:d,transferables:l}=m(a),f={type:o.MasterMessageType.run,uid:n,method:t,args:d};return u("Sending command to run function to worker:",f),e.postMessage(f,l),s.ObservablePromise.from((0,r.multicast)(c(e,n)))}}function y(e,r){const t={};for(const s of r)t[s]=g(e,s);return t}
},{"debug":"c4FO","observable-fns":"MIfF","../common":"Asj5","../observable-promise":"gaoG","../transferable":"U4Yc","../types/messages":"Uh4r"}],"ra1W":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.spawn=x;var r=u(require("debug")),t=require("observable-fns"),n=require("../common"),o=require("../promise"),i=require("../symbols"),s=require("../types/master"),a=require("./invocation-proxy");function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e,r,t,n){return new(t||(t=Promise))(function(o,i){function s(e){try{u(n.next(e))}catch(r){i(r)}}function a(e){try{u(n.throw(e))}catch(r){i(r)}}function u(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t(function(e){e(r)})).then(s,a)}u((n=n.apply(e,r||[])).next())})};const d=(0,r.default)("threads:master:messages"),m=(0,r.default)("threads:master:spawn"),v=(0,r.default)("threads:master:thread-utils"),f=e=>e&&"init"===e.type,l=e=>e&&"uncaughtError"===e.type,p=1e4;function y(e,r,t){return c(this,void 0,void 0,function*(){let n;const o=new Promise((e,o)=>{n=setTimeout(()=>o(Error(t)),r)}),i=yield Promise.race([e,o]);return clearTimeout(n),i})}function h(e){return new Promise((r,t)=>{const o=i=>{d("Message from worker before finishing initialization:",i.data),f(i.data)?(e.removeEventListener("message",o),r(i.data)):l(i.data)&&(e.removeEventListener("message",o),t((0,n.rehydrateError)(i.data.error)))};e.addEventListener("message",o)})}function E(e,r){return new t.Observable(t=>{const n=e=>{const r={type:s.WorkerEventType.message,data:e.data};t.next(r)},o=e=>{v("Unhandled promise rejection event in thread:",e);const r={type:s.WorkerEventType.internalError,error:Error(e.reason)};t.next(r)};e.addEventListener("message",n),e.addEventListener("unhandledrejection",o),r.then(()=>{const r={type:s.WorkerEventType.termination};e.removeEventListener("message",n),e.removeEventListener("unhandledrejection",o),t.next(r),t.complete()})})}function g(e){const[r,t]=(0,o.createPromiseWithResolver)();return{terminate:()=>c(this,void 0,void 0,function*(){v("Terminating worker"),yield e.terminate(),t()}),termination:r}}function w(e,r,t,n){const o=t.filter(e=>e.type===s.WorkerEventType.internalError).map(e=>e.error);return Object.assign(e,{[i.$errors]:o,[i.$events]:t,[i.$terminate]:n,[i.$worker]:r})}function x(e){return c(this,void 0,void 0,function*(){m("Initializing new thread");const r=(yield y(h(e),p,`Timeout: Did not receive an init message from worker after ${p}ms. Make sure the worker calls expose().`)).exposed,{termination:t,terminate:n}=g(e),o=E(e,t);if("function"===r.type){return w((0,a.createProxyFunction)(e),e,o,n)}if("module"===r.type){return w((0,a.createProxyModule)(e,r.methods),e,o,n)}{const e=r.type;throw Error(`Worker init message states unexpected type of expose(): ${e}`)}})}
},{"debug":"c4FO","observable-fns":"MIfF","../common":"Asj5","../promise":"pRJ0","../symbols":"ZKJ0","../types/master":"elkI","./invocation-proxy":"NFNj","process":"FT5O"}],"RhGQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Pool",{enumerable:!0,get:function(){return r.Pool}}),Object.defineProperty(exports,"spawn",{enumerable:!0,get:function(){return t.spawn}}),Object.defineProperty(exports,"Thread",{enumerable:!0,get:function(){return o.Thread}}),exports.Worker=void 0;var e=require("./implementation"),r=require("./pool"),t=require("./spawn"),o=require("./thread");const n=(0,e.selectWorkerImplementation)();exports.Worker=n;
},{"./implementation":"YHZA","./pool":"diRb","./spawn":"ra1W","./thread":"GsWA"}],"xmNH":[function(require,module,exports) {
"use strict";function e(e){var o,r=e.Symbol;return"function"==typeof r?r.observable?o=r.observable:(o=r("observable"),r.observable=o):o="@@observable",o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"G8eR":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var d,o=t(require("./ponyfill.js"));function t(e){return e&&e.__esModule?e:{default:e}}d="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof module?module:Function("return this")();var u=(0,o.default)(d),n=u;exports.default=n;
},{"./ponyfill.js":"xmNH"}],"Txt5":[function(require,module,exports) {
"use strict";const e=require("symbol-observable").default;module.exports=(o=>Boolean(o&&o[e]&&o===o[e]()));
},{"symbol-observable":"G8eR"}],"cO8V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const e=function(){return!("undefined"==typeof self||!self.postMessage)},s=function(e,s){self.postMessage(e,s)},t=function(e){const s=s=>{e(s.data)};return self.addEventListener("message",s),()=>{self.removeEventListener("message",s)}};var o={isWorkerRuntime:e,postMessageToMaster:s,subscribeToMasterMessages:t};exports.default=o;
},{}],"RQAX":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=i(require("./implementation.browser")),t=i(require("./implementation.tiny-worker")),o=i(require("./implementation.worker_threads"));function i(e){return e&&e.__esModule?e:{default:e}}const n=void 0!==e&&"browser"!==e.arch&&"pid"in e;function u(){try{return o.default.testImplementation(),o.default}catch(e){return t.default}}var a=n?u():r.default;exports.default=a;
},{"./implementation.browser":"cO8V","./implementation.tiny-worker":"cLff","./implementation.worker_threads":"cLff","process":"FT5O"}],"lyX6":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.expose=h,Object.defineProperty(exports,"Transfer",{enumerable:!0,get:function(){return o.Transfer}});var t=a(require("is-observable")),r=require("../common"),o=require("../transferable"),s=require("../types/messages"),n=a(require("./implementation"));function a(e){return e&&e.__esModule?e:{default:e}}var i=function(e,t,r,o){return new(r||(r=Promise))(function(s,n){function a(e){try{u(o.next(e))}catch(t){n(t)}}function i(e){try{u(o.throw(e))}catch(t){n(t)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,i)}u((o=o.apply(e,t||[])).next())})};let u=!1;const f=e=>e&&e.type===s.MasterMessageType.run,c=e=>(0,t.default)(e)||p(e);function p(e){return e&&"object"==typeof e&&"function"==typeof e.subscribe}function d(e){return(0,o.isTransferDescriptor)(e)?{payload:e.send,transferables:e.transferables}:{payload:e,transferables:void 0}}function l(){const e={type:s.WorkerMessageType.init,exposed:{type:"function"}};n.default.postMessageToMaster(e)}function y(e){const t={type:s.WorkerMessageType.init,exposed:{type:"module",methods:e}};n.default.postMessageToMaster(t)}function g(e,t){const{payload:o,transferables:a}=d(t),i={type:s.WorkerMessageType.error,uid:e,error:(0,r.serializeError)(o)};n.default.postMessageToMaster(i,a)}function b(e,t,r){const{payload:o,transferables:a}=d(r),i={type:s.WorkerMessageType.result,uid:e,complete:!!t||void 0,payload:o};n.default.postMessageToMaster(i,a)}function m(e,t){const r={type:s.WorkerMessageType.running,uid:e,resultType:t};n.default.postMessageToMaster(r)}function M(e){const t={type:s.WorkerMessageType.uncaughtError,error:(0,r.serializeError)(e)};n.default.postMessageToMaster(t)}function T(e,t,r){return i(this,void 0,void 0,function*(){let o;try{o=t(...r)}catch(n){return g(e,n)}const s=c(o)?"observable":"promise";if(m(e,s),c(o))o.subscribe(t=>b(e,!1,t),t=>g(e,t),()=>b(e,!0));else try{const t=yield o;b(e,!0,t)}catch(n){g(e,n)}})}function h(e){if(!n.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(u)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(u=!0,"function"==typeof e)n.default.subscribeToMasterMessages(t=>{f(t)&&!t.method&&T(t.uid,e,t.args)}),l();else{if("object"!=typeof e||!e)throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${e}`);n.default.subscribeToMasterMessages(t=>{f(t)&&t.method&&T(t.uid,e[t.method],t.args)}),y(Object.keys(e).filter(t=>"function"==typeof e[t]))}}"undefined"!=typeof self&&"function"==typeof self.addEventListener&&n.default.isWorkerRuntime()&&(self.addEventListener("error",e=>{setTimeout(()=>M(e.error||e),250)}),self.addEventListener("unhandledrejection",e=>{const t=e.reason;t&&"string"==typeof t.message&&setTimeout(()=>M(t),250)})),void 0!==e&&"function"==typeof e.on&&n.default.isWorkerRuntime()&&(e.on("uncaughtException",e=>{setTimeout(()=>M(e),250)}),e.on("unhandledRejection",e=>{e&&"string"==typeof e.message&&setTimeout(()=>M(e),250)}));
},{"is-observable":"Txt5","../common":"Asj5","../transferable":"U4Yc","../types/messages":"Uh4r","./implementation":"RQAX","process":"FT5O"}],"mX2T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={expose:!0,Transfer:!0};Object.defineProperty(exports,"expose",{enumerable:!0,get:function(){return t.expose}}),Object.defineProperty(exports,"Transfer",{enumerable:!0,get:function(){return n.Transfer}});var r=require("./master/index");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var t=require("./worker/index"),n=require("./transferable");
},{"./master/index":"RhGQ","./worker/index":"lyX6","./transferable":"U4Yc"}],"MdGg":[function(require,module,exports) {
var r=Array.isArray;module.exports=r;
},{}],"lxuR":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],t="object"==typeof e&&e&&e.Object===Object&&e;module.exports=t;
},{}],"VQ1k":[function(require,module,exports) {
var e=require("./_freeGlobal"),t="object"==typeof self&&self&&self.Object===Object&&self,l=e||t||Function("return this")();module.exports=l;
},{"./_freeGlobal":"lxuR"}],"paVz":[function(require,module,exports) {
var o=require("./_root"),r=o.Symbol;module.exports=r;
},{"./_root":"VQ1k"}],"DjR4":[function(require,module,exports) {
var r=require("./_Symbol"),t=Object.prototype,e=t.hasOwnProperty,o=t.toString,a=r?r.toStringTag:void 0;function l(r){var t=e.call(r,a),l=r[a];try{r[a]=void 0;var c=!0}catch(n){}var i=o.call(r);return c&&(t?r[a]=l:delete r[a]),i}module.exports=l;
},{"./_Symbol":"paVz"}],"kd6M":[function(require,module,exports) {
var t=Object.prototype,o=t.toString;function r(t){return o.call(t)}module.exports=r;
},{}],"CCpz":[function(require,module,exports) {
var e=require("./_Symbol"),r=require("./_getRawTag"),o=require("./_objectToString"),t="[object Null]",i="[object Undefined]",n=e?e.toStringTag:void 0;function u(e){return null==e?void 0===e?i:t:n&&n in Object(e)?r(e):o(e)}module.exports=u;
},{"./_Symbol":"paVz","./_getRawTag":"DjR4","./_objectToString":"kd6M"}],"uCpm":[function(require,module,exports) {
function e(e){return null!=e&&"object"==typeof e}module.exports=e;
},{}],"Vjhf":[function(require,module,exports) {
var e=require("./_baseGetTag"),r=require("./isObjectLike"),o="[object Symbol]";function t(t){return"symbol"==typeof t||r(t)&&e(t)==o}module.exports=t;
},{"./_baseGetTag":"CCpz","./isObjectLike":"uCpm"}],"XIzs":[function(require,module,exports) {
var e=require("./isArray"),r=require("./isSymbol"),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function u(u,l){if(e(u))return!1;var o=typeof u;return!("number"!=o&&"symbol"!=o&&"boolean"!=o&&null!=u&&!r(u))||(n.test(u)||!t.test(u)||null!=l&&u in Object(l))}module.exports=u;
},{"./isArray":"MdGg","./isSymbol":"Vjhf"}],"MXp1":[function(require,module,exports) {
function n(n){var o=typeof n;return null!=n&&("object"==o||"function"==o)}module.exports=n;
},{}],"KGxx":[function(require,module,exports) {
var e=require("./_baseGetTag"),r=require("./isObject"),t="[object AsyncFunction]",n="[object Function]",o="[object GeneratorFunction]",c="[object Proxy]";function u(u){if(!r(u))return!1;var i=e(u);return i==n||i==o||i==t||i==c}module.exports=u;
},{"./_baseGetTag":"CCpz","./isObject":"MXp1"}],"BVWz":[function(require,module,exports) {
var r=require("./_root"),e=r["__core-js_shared__"];module.exports=e;
},{"./_root":"VQ1k"}],"ZWFe":[function(require,module,exports) {
var e=require("./_coreJsData"),r=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(e){return!!r&&r in e}module.exports=n;
},{"./_coreJsData":"BVWz"}],"AfA5":[function(require,module,exports) {
var t=Function.prototype,r=t.toString;function n(t){if(null!=t){try{return r.call(t)}catch(n){}try{return t+""}catch(n){}}return""}module.exports=n;
},{}],"MTtl":[function(require,module,exports) {
var e=require("./isFunction"),r=require("./_isMasked"),t=require("./isObject"),o=require("./_toSource"),n=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,i=Function.prototype,u=Object.prototype,p=i.toString,s=u.hasOwnProperty,a=RegExp("^"+p.call(s).replace(n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function l(n){return!(!t(n)||r(n))&&(e(n)?a:c).test(o(n))}module.exports=l;
},{"./isFunction":"KGxx","./_isMasked":"ZWFe","./isObject":"MXp1","./_toSource":"AfA5"}],"CouD":[function(require,module,exports) {
function n(n,o){return null==n?void 0:n[o]}module.exports=n;
},{}],"AijS":[function(require,module,exports) {
var e=require("./_baseIsNative"),r=require("./_getValue");function u(u,a){var i=r(u,a);return e(i)?i:void 0}module.exports=u;
},{"./_baseIsNative":"MTtl","./_getValue":"CouD"}],"dsTJ":[function(require,module,exports) {
var e=require("./_getNative"),r=e(Object,"create");module.exports=r;
},{"./_getNative":"AijS"}],"IqRJ":[function(require,module,exports) {
var e=require("./_nativeCreate");function t(){this.__data__=e?e(null):{},this.size=0}module.exports=t;
},{"./_nativeCreate":"dsTJ"}],"qIWk":[function(require,module,exports) {
function t(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}module.exports=t;
},{}],"C6p9":[function(require,module,exports) {
var e=require("./_nativeCreate"),r="__lodash_hash_undefined__",t=Object.prototype,a=t.hasOwnProperty;function _(t){var _=this.__data__;if(e){var o=_[t];return o===r?void 0:o}return a.call(_,t)?_[t]:void 0}module.exports=_;
},{"./_nativeCreate":"dsTJ"}],"yXIv":[function(require,module,exports) {
var e=require("./_nativeCreate"),r=Object.prototype,t=r.hasOwnProperty;function a(r){var a=this.__data__;return e?void 0!==a[r]:t.call(a,r)}module.exports=a;
},{"./_nativeCreate":"dsTJ"}],"EHgb":[function(require,module,exports) {
var e=require("./_nativeCreate"),_="__lodash_hash_undefined__";function i(i,t){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=e&&void 0===t?_:t,this}module.exports=i;
},{"./_nativeCreate":"dsTJ"}],"VLZ6":[function(require,module,exports) {
var e=require("./_hashClear"),r=require("./_hashDelete"),t=require("./_hashGet"),h=require("./_hashHas"),o=require("./_hashSet");function a(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var h=e[r];this.set(h[0],h[1])}}a.prototype.clear=e,a.prototype.delete=r,a.prototype.get=t,a.prototype.has=h,a.prototype.set=o,module.exports=a;
},{"./_hashClear":"IqRJ","./_hashDelete":"qIWk","./_hashGet":"C6p9","./_hashHas":"yXIv","./_hashSet":"EHgb"}],"RiGr":[function(require,module,exports) {
function t(){this.__data__=[],this.size=0}module.exports=t;
},{}],"EW21":[function(require,module,exports) {
function e(e,n){return e===n||e!=e&&n!=n}module.exports=e;
},{}],"WpMd":[function(require,module,exports) {
var r=require("./eq");function e(e,n){for(var t=e.length;t--;)if(r(e[t][0],n))return t;return-1}module.exports=e;
},{"./eq":"EW21"}],"Oadt":[function(require,module,exports) {
var e=require("./_assocIndexOf"),r=Array.prototype,t=r.splice;function a(r){var a=this.__data__,o=e(a,r);return!(o<0)&&(o==a.length-1?a.pop():t.call(a,o,1),--this.size,!0)}module.exports=a;
},{"./_assocIndexOf":"WpMd"}],"JYyI":[function(require,module,exports) {
var r=require("./_assocIndexOf");function e(e){var a=this.__data__,o=r(a,e);return o<0?void 0:a[o][1]}module.exports=e;
},{"./_assocIndexOf":"WpMd"}],"mbio":[function(require,module,exports) {
var e=require("./_assocIndexOf");function r(r){return e(this.__data__,r)>-1}module.exports=r;
},{"./_assocIndexOf":"WpMd"}],"lALI":[function(require,module,exports) {
var s=require("./_assocIndexOf");function e(e,r){var t=this.__data__,i=s(t,e);return i<0?(++this.size,t.push([e,r])):t[i][1]=r,this}module.exports=e;
},{"./_assocIndexOf":"WpMd"}],"feFl":[function(require,module,exports) {
var e=require("./_listCacheClear"),t=require("./_listCacheDelete"),r=require("./_listCacheGet"),l=require("./_listCacheHas"),o=require("./_listCacheSet");function a(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var l=e[t];this.set(l[0],l[1])}}a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=l,a.prototype.set=o,module.exports=a;
},{"./_listCacheClear":"RiGr","./_listCacheDelete":"Oadt","./_listCacheGet":"JYyI","./_listCacheHas":"mbio","./_listCacheSet":"lALI"}],"pXsE":[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),o=e(r,"Map");module.exports=o;
},{"./_getNative":"AijS","./_root":"VQ1k"}],"w2u7":[function(require,module,exports) {
var e=require("./_Hash"),i=require("./_ListCache"),r=require("./_Map");function a(){this.size=0,this.__data__={hash:new e,map:new(r||i),string:new e}}module.exports=a;
},{"./_Hash":"VLZ6","./_ListCache":"feFl","./_Map":"pXsE"}],"e876":[function(require,module,exports) {
function o(o){var n=typeof o;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==o:null===o}module.exports=o;
},{}],"k3Fb":[function(require,module,exports) {
var r=require("./_isKeyable");function e(e,a){var t=e.__data__;return r(a)?t["string"==typeof a?"string":"hash"]:t.map}module.exports=e;
},{"./_isKeyable":"e876"}],"tEiJ":[function(require,module,exports) {
var e=require("./_getMapData");function t(t){var r=e(this,t).delete(t);return this.size-=r?1:0,r}module.exports=t;
},{"./_getMapData":"k3Fb"}],"XnUX":[function(require,module,exports) {
var e=require("./_getMapData");function t(t){return e(this,t).get(t)}module.exports=t;
},{"./_getMapData":"k3Fb"}],"YCUr":[function(require,module,exports) {
var e=require("./_getMapData");function r(r){return e(this,r).has(r)}module.exports=r;
},{"./_getMapData":"k3Fb"}],"lAj5":[function(require,module,exports) {
var e=require("./_getMapData");function t(t,i){var s=e(this,t),r=s.size;return s.set(t,i),this.size+=s.size==r?0:1,this}module.exports=t;
},{"./_getMapData":"k3Fb"}],"gJex":[function(require,module,exports) {
var e=require("./_mapCacheClear"),r=require("./_mapCacheDelete"),t=require("./_mapCacheGet"),a=require("./_mapCacheHas"),p=require("./_mapCacheSet");function o(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=t,o.prototype.has=a,o.prototype.set=p,module.exports=o;
},{"./_mapCacheClear":"w2u7","./_mapCacheDelete":"tEiJ","./_mapCacheGet":"XnUX","./_mapCacheHas":"YCUr","./_mapCacheSet":"lAj5"}],"Xofr":[function(require,module,exports) {
var e=require("./_MapCache"),r="Expected a function";function t(n,a){if("function"!=typeof n||null!=a&&"function"!=typeof a)throw new TypeError(r);var c=function(){var e=arguments,r=a?a.apply(this,e):e[0],t=c.cache;if(t.has(r))return t.get(r);var o=n.apply(this,e);return c.cache=t.set(r,o)||t,o};return c.cache=new(t.Cache||e),c}t.Cache=e,module.exports=t;
},{"./_MapCache":"gJex"}],"Fva7":[function(require,module,exports) {
var e=require("./memoize"),r=500;function n(n){var u=e(n,function(e){return c.size===r&&c.clear(),e}),c=u.cache;return u}module.exports=n;
},{"./memoize":"Xofr"}],"jEJ8":[function(require,module,exports) {
var e=require("./_memoizeCapped"),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,u=e(function(e){var u=[];return 46===e.charCodeAt(0)&&u.push(""),e.replace(r,function(e,r,a,o){u.push(a?o.replace(p,"$1"):r||e)}),u});module.exports=u;
},{"./_memoizeCapped":"Fva7"}],"WiTf":[function(require,module,exports) {
function r(r,n){for(var e=-1,l=null==r?0:r.length,o=Array(l);++e<l;)o[e]=n(r[e],e,r);return o}module.exports=r;
},{}],"YwPt":[function(require,module,exports) {
var r=require("./_Symbol"),e=require("./_arrayMap"),i=require("./isArray"),t=require("./isSymbol"),o=1/0,u=r?r.prototype:void 0,n=u?u.toString:void 0;function a(r){if("string"==typeof r)return r;if(i(r))return e(r,a)+"";if(t(r))return n?n.call(r):"";var u=r+"";return"0"==u&&1/r==-o?"-0":u}module.exports=a;
},{"./_Symbol":"paVz","./_arrayMap":"WiTf","./isArray":"MdGg","./isSymbol":"Vjhf"}],"IZpt":[function(require,module,exports) {
var r=require("./_baseToString");function e(e){return null==e?"":r(e)}module.exports=e;
},{"./_baseToString":"YwPt"}],"Uv9i":[function(require,module,exports) {
var r=require("./isArray"),e=require("./_isKey"),i=require("./_stringToPath"),t=require("./toString");function u(u,n){return r(u)?u:e(u,n)?[u]:i(t(u))}module.exports=u;
},{"./isArray":"MdGg","./_isKey":"XIzs","./_stringToPath":"jEJ8","./toString":"IZpt"}],"eqwJ":[function(require,module,exports) {
var r=require("./isSymbol"),e=1/0;function t(t){if("string"==typeof t||r(t))return t;var i=t+"";return"0"==i&&1/t==-e?"-0":i}module.exports=t;
},{"./isSymbol":"Vjhf"}],"aChD":[function(require,module,exports) {
var r=require("./_castPath"),e=require("./_toKey");function t(t,o){for(var u=0,n=(o=r(o,t)).length;null!=t&&u<n;)t=t[e(o[u++])];return u&&u==n?t:void 0}module.exports=t;
},{"./_castPath":"Uv9i","./_toKey":"eqwJ"}],"lIrN":[function(require,module,exports) {
var e=require("./_baseGet");function r(r,o,u){var i=null==r?void 0:e(r,o);return void 0===i?u:i}module.exports=r;
},{"./_baseGet":"aChD"}],"r4Da":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.indexValues=u,exports.checkIfModifiedIndexes=f,exports.indexers=void 0;var e,r=require("../interfaces"),t=n(require("lodash/get"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e,r,t){return t.value||(t.value={}),e.forEach(function(e){void 0!==e&&(t.value[e]||(t.value[e]=[],t.sortedKeys||(t.sortedKeys=[]),t.sortedKeys.push(e)),t.value[e].push(r))}),t}function i(e,r,n){var i=(0,t.default)(e,n.path||n.key);return"string"==typeof i&&(i=[i]),u(i.filter(Boolean),r,n)}function a(e,r,n){var i=(0,t.default)(e,n.path||n.key);return Array.isArray(i)||(i=[i]),u(i=i.map(function(e){return"string"==typeof e&&(e=parseFloat(e)),e}).filter(function(e){return!isNaN(e)}),r,n)}function o(e,r,n){try{var i=(0,t.default)(e,n.path||n.key);return"string"==typeof i&&(i=new Date(i)),u([i.toISOString()],r,n)}catch(a){return u([],r,n)}}var s=((e={})[r.IndexType.String]=i,e[r.IndexType.Number]=a,e[r.IndexType.Date]=o,e);function f(e,r){return JSON.stringify(e)!==JSON.stringify(r)}exports.indexers=s;
},{"../interfaces":"qu0L","lodash/get":"lIrN"}],"SFSL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.__read=o,exports.__rest=t,exports.__spread=n,exports.__values=e,exports.__assign=void 0;var r=function(){return exports.__assign=r=Object.assign||function(r){for(var t,e=1,o=arguments.length;e<o;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},r.apply(this,arguments)};function t(r,t){var e={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&t.indexOf(o)<0&&(e[o]=r[o]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(r);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(r,o[n])&&(e[o[n]]=r[o[n]])}return e}function e(r){var t="function"==typeof Symbol&&r[Symbol.iterator],e=0;return t?t.call(r):{next:function(){return r&&e>=r.length&&(r=void 0),{value:r&&r[e++],done:!r}}}}function o(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var o,n,a=e.call(r),l=[];try{for(;(void 0===t||t-- >0)&&!(o=a.next()).done;)l.push(o.value)}catch(i){n={error:i}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(n)throw n.error}}return l}function n(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(o(arguments[t]));return r}exports.__assign=r;
},{}],"WRg7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TARGETLESS_KEY=exports.STATE_DELIMITER=exports.EMPTY_ACTIVITY_MAP=exports.DEFAULT_GUARD_TYPE=void 0;var T=".";exports.STATE_DELIMITER=T;var e={};exports.EMPTY_ACTIVITY_MAP=e;var E="xstate.guard";exports.DEFAULT_GUARD_TYPE=E;var r="";exports.TARGETLESS_KEY=r;
},{}],"ClP7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IS_PRODUCTION=void 0;var e=!0;exports.IS_PRODUCTION=e;
},{}],"dF0W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flatten=x,exports.getEventType=a,exports.isArray=T,exports.isBuiltInEvent=b,exports.isFunction=A,exports.isMachine=C,exports.isObservable=k,exports.isPromiseLike=g,exports.isStateLike=u,exports.isString=j,exports.keys=n,exports.mapContext=_,exports.mapFilterValues=l,exports.mapValues=f,exports.matchesState=o,exports.nestedPath=v,exports.normalizeTarget=M,exports.partition=m,exports.pathToStateValue=c,exports.reportUnhandledExceptionOnInvocation=$,exports.toArray=h,exports.toArrayStrict=d,exports.toEventObject=U,exports.toGuard=I,exports.toSCXMLEvent=L,exports.toStatePath=i,exports.toStatePaths=y,exports.toStateValue=s,exports.toTransitionConfigArray=R,exports.updateContext=w,exports.updateHistoryStates=S,exports.updateHistoryValue=E,exports.warn=exports.uniqueId=exports.symbolObservable=exports.path=void 0;var r=require("./_virtual/_tslib.js"),t=require("./constants.js"),e=require("./environment.js");function n(r){return Object.keys(r)}function o(r,e,a){void 0===a&&(a=t.STATE_DELIMITER);var i=s(r,a),u=s(e,a);return j(u)?!!j(i)&&u===i:j(i)?i in u:n(i).every(function(r){return r in u&&o(i[r],u[r])})}function a(r){try{return j(r)||"number"==typeof r?""+r:r.type}catch(t){throw new Error("Events must be strings or objects with a string event.type property.")}}function i(r,t){try{return T(r)?r:r.toString().split(t)}catch(e){throw new Error("'"+r+"' is not a valid state path.")}}function u(r){return"object"==typeof r&&"value"in r&&"context"in r&&"event"in r&&"_event"in r}function s(r,t){return u(r)?r.value:T(r)?c(r):"string"!=typeof r?r:c(i(r,t))}function c(r){if(1===r.length)return r[0];for(var t={},e=t,n=0;n<r.length-1;n++)n===r.length-2?e[r[n]]=r[n+1]:(e[r[n]]={},e=e[r[n]]);return t}function f(r,t){for(var e={},o=n(r),a=0;a<o.length;a++){var i=o[a];e[i]=t(r[i],i,r,a)}return e}function l(t,e,o){var a,i,u={};try{for(var s=(0,r.__values)(n(t)),c=s.next();!c.done;c=s.next()){var f=c.value,l=t[f];o(l)&&(u[f]=e(l,f,t))}}catch(p){a={error:p}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}return u}var p=function(t){return function(e){var n,o,a=e;try{for(var i=(0,r.__values)(t),u=i.next();!u.done;u=i.next()){a=a[u.value]}}catch(s){n={error:s}}finally{try{u&&!u.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return a}};function v(t,e){return function(n){var o,a,i=n;try{for(var u=(0,r.__values)(t),s=u.next();!s.done;s=u.next()){var c=s.value;i=i[e][c]}}catch(f){o={error:f}}finally{try{s&&!s.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}return i}}function y(r){return r?j(r)?[[r]]:x(n(r).map(function(t){var e=r[t];return"string"==typeof e||e&&Object.keys(e).length?y(r[t]).map(function(r){return[t].concat(r)}):[[t]]})):[[]]}function x(t){var e;return(e=[]).concat.apply(e,(0,r.__spread)(t))}function d(r){return T(r)?r:[r]}function h(r){return void 0===r?[]:d(r)}function _(t,e,o){var a,i;if(A(t))return t(e,o.data);var u={};try{for(var s=(0,r.__values)(n(t)),c=s.next();!c.done;c=s.next()){var f=c.value,l=t[f];A(l)?u[f]=l(e,o.data):u[f]=l}}catch(p){a={error:p}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}return u}function b(r){return/^(done|error)\./.test(r)}function g(r){return r instanceof Promise||!(null===r||!A(r)&&"object"!=typeof r||!A(r.then))}function m(t,e){var n,o,a=(0,r.__read)([[],[]],2),i=a[0],u=a[1];try{for(var s=(0,r.__values)(t),c=s.next();!c.done;c=s.next()){var f=c.value;e(f)?i.push(f):u.push(f)}}catch(l){n={error:l}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return[i,u]}function S(r,t){return f(r.states,function(r,e){if(r){var n=(j(t)?void 0:t[e])||(r?r.current:void 0);if(n)return{current:n,states:S(r,n)}}})}function E(r,t){return{current:t,states:S(r,t)}}function w(t,o,a,i){return e.IS_PRODUCTION||O(!!t,"Attempting to update undefined context"),t?a.reduce(function(t,e){var a,u,s=e.assignment,c={state:i,action:e,_event:o},f={};if(A(s))f=s(t,o.data,c);else try{for(var l=(0,r.__values)(n(s)),p=l.next();!p.done;p=l.next()){var v=p.value,y=s[v];f[v]=A(y)?y(t,o.data,c):y}}catch(x){a={error:x}}finally{try{p&&!p.done&&(u=l.return)&&u.call(l)}finally{if(a)throw a.error}}return Object.assign({},t,f)},t):t}exports.path=p;var O=function(){};function T(r){return Array.isArray(r)}function A(r){return"function"==typeof r}function j(r){return"string"==typeof r}function I(r,e){if(r)return j(r)?{type:t.DEFAULT_GUARD_TYPE,name:r,predicate:e?e[r]:void 0}:A(r)?{type:t.DEFAULT_GUARD_TYPE,name:r.name,predicate:r}:r}function k(r){try{return"subscribe"in r&&A(r.subscribe)}catch(t){return!1}}exports.warn=O,e.IS_PRODUCTION||(exports.warn=O=function(r,t){var e=r instanceof Error?r:void 0;if((e||!r)&&void 0!==console){var n=["Warning: "+t];e&&n.push(e),console.warn.apply(console,n)}});var P=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function C(r){try{return"__xstatenode"in r}catch(t){return!1}}exports.symbolObservable=P;var D=function(){var r=0;return function(){return(++r).toString(16)}}();function U(t,e){return j(t)||"number"==typeof t?(0,r.__assign)({type:t},e):t}function L(t,e){if(!j(t)&&"$$type"in t&&"scxml"===t.$$type)return t;var n=U(t);return(0,r.__assign)({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function R(t,e){return d(e).map(function(e){return void 0===e||"string"==typeof e||C(e)?{target:e,event:t}:(0,r.__assign)((0,r.__assign)({},e),{event:t})})}function M(r){if(void 0!==r&&r!==t.TARGETLESS_KEY)return h(r)}function $(r,t,n){if(!e.IS_PRODUCTION){var o=r.stack?" Stacktrace was '"+r.stack+"'":"";if(r===t)console.error("Missing onError handler for invocation '"+n+"', error was '"+r+"'."+o);else{var a=t.stack?" Stacktrace was '"+t.stack+"'":"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '"+n+"'. Original error: '"+r+"'. "+o+" Current error is '"+t+"'."+a)}}}exports.uniqueId=D;
},{"./_virtual/_tslib.js":"SFSL","./constants.js":"WRg7","./environment.js":"ClP7"}],"z26Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mapState=t;var e=require("./_virtual/_tslib.js"),r=require("./utils.js");function t(t,a){var l,n,s;try{for(var u=(0,e.__values)((0,r.keys)(t)),i=u.next();!i.done;i=u.next()){var o=i.value;(0,r.matchesState)(o,a)&&(!s||a.length>s.length)&&(s=o)}}catch(v){l={error:v}}finally{try{i&&!i.done&&(n=u.return)&&n.call(u)}finally{if(l)throw l.error}}return t[s]}
},{"./_virtual/_tslib.js":"SFSL","./utils.js":"dF0W"}],"kaSj":[function(require,module,exports) {
"use strict";var t,e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpecialTargets=exports.ActionTypes=void 0,exports.ActionTypes=t,function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure"}(t||(exports.ActionTypes=t={})),exports.SpecialTargets=e,function(t){t.Parent="#_parent",t.Internal="#_internal"}(e||(exports.SpecialTargets=e={}));
},{}],"Y0yJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.update=exports.stop=exports.start=exports.send=exports.raise=exports.pure=exports.nullEvent=exports.log=exports.invoke=exports.init=exports.errorPlatform=exports.errorExecution=exports.error=exports.doneState=exports.cancel=exports.assign=exports.after=void 0;var e=require("./types.js"),r=e.ActionTypes.Start;exports.start=r;var t=e.ActionTypes.Stop;exports.stop=t;var o=e.ActionTypes.Raise;exports.raise=o;var s=e.ActionTypes.Send;exports.send=s;var p=e.ActionTypes.Cancel;exports.cancel=p;var n=e.ActionTypes.NullEvent;exports.nullEvent=n;var a=e.ActionTypes.Assign;exports.assign=a;var x=e.ActionTypes.After;exports.after=x;var i=e.ActionTypes.DoneState;exports.doneState=i;var c=e.ActionTypes.Log;exports.log=c;var v=e.ActionTypes.Init;exports.init=v;var y=e.ActionTypes.Invoke;exports.invoke=y;var A=e.ActionTypes.ErrorExecution;exports.errorExecution=A;var T=e.ActionTypes.ErrorPlatform;exports.errorPlatform=T;var l=e.ActionTypes.ErrorCustom;exports.error=l;var u=e.ActionTypes.Update;exports.update=u;var d=e.ActionTypes.Pure;exports.pure=d;
},{"./types.js":"kaSj"}],"RPqm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.after=j,exports.done=F,exports.doneInvoke=E,exports.error=m,exports.escalate=P,exports.forwardTo=O,exports.getActionFunction=o,exports.log=x,exports.raise=c,exports.resolveRaise=p,exports.resolveSend=d,exports.respond=f,exports.send=v,exports.sendParent=y,exports.sendUpdate=_,exports.start=A,exports.stop=T,exports.toActionObject=s,exports.toActivityDefinition=u,exports.toActionObjects=exports.resolveLog=exports.initEvent=exports.cancel=exports.assign=void 0;var t=require("./_virtual/_tslib.js"),e=require("./utils.js"),n=require("./types.js"),r=require("./actionTypes.js"),i=(0,e.toSCXMLEvent)({type:r.init});function o(t,e){return e&&e[t]||void 0}function s(n,r){var i;if((0,e.isString)(n)||"number"==typeof n){var s=o(n,r);i=(0,e.isFunction)(s)?{type:n,exec:s}:s||{type:n,exec:void 0}}else if((0,e.isFunction)(n))i={type:n.name||n.toString(),exec:n};else{s=o(n.type,r);if((0,e.isFunction)(s))i=(0,t.__assign)((0,t.__assign)({},n),{exec:s});else if(s){var a=n.type,u=(0,t.__rest)(n,["type"]);i=(0,t.__assign)((0,t.__assign)({type:a},s),u)}else i=n}return Object.defineProperty(i,"toString",{value:function(){return i.type},enumerable:!1,configurable:!0}),i}exports.initEvent=i;var a=function(t,n){return t?((0,e.isArray)(t)?t:[t]).map(function(t){return s(t,n)}):[]};function u(n){var r=s(n);return(0,t.__assign)((0,t.__assign)({id:(0,e.isString)(n)?n:r.id},r),{type:r.type})}function c(t){return(0,e.isString)(t)?{type:r.raise,event:t}:v(t,{to:n.SpecialTargets.Internal})}function p(t){return{type:r.raise,_event:(0,e.toSCXMLEvent)(t.event)}}function v(t,n){return{to:n?n.to:void 0,type:r.send,event:(0,e.isFunction)(t)?t:(0,e.toEventObject)(t),delay:n?n.delay:void 0,id:n&&void 0!==n.id?n.id:(0,e.isFunction)(t)?t.name:(0,e.getEventType)(t)}}function d(n,r,i,o){var s,a={_event:i},u=(0,e.toSCXMLEvent)((0,e.isFunction)(n.event)?n.event(r,i.data,a):n.event);if((0,e.isString)(n.delay)){var c=o&&o[n.delay];s=(0,e.isFunction)(c)?c(r,i.data,a):c}else s=(0,e.isFunction)(n.delay)?n.delay(r,i.data,a):n.delay;var p=(0,e.isFunction)(n.to)?n.to(r,i.data,a):n.to;return(0,t.__assign)((0,t.__assign)({},n),{to:p,_event:u,event:u.data,delay:s})}function y(e,r){return v(e,(0,t.__assign)((0,t.__assign)({},r),{to:n.SpecialTargets.Parent}))}function _(){return y(r.update)}function f(e,n){return v(e,(0,t.__assign)((0,t.__assign)({},n),{to:function(t,e,n){return n._event.origin}}))}exports.toActionObjects=a;var g=function(t,e){return{context:t,event:e}};function x(t,e){return void 0===t&&(t=g),{type:r.log,label:e,expr:t}}var l=function(n,r,i){return(0,t.__assign)((0,t.__assign)({},n),{value:(0,e.isString)(n.expr)?n.expr:n.expr(r,i.data,{_event:i})})};exports.resolveLog=l;var S=function(t){return{type:r.cancel,sendId:t}};function A(t){var e=u(t);return{type:n.ActionTypes.Start,activity:e,exec:void 0}}function T(t){var e=u(t);return{type:n.ActionTypes.Stop,activity:e,exec:void 0}}exports.cancel=S;var b=function(t){return{type:r.assign,assignment:t}};function j(t,e){var r=e?"#"+e:"";return n.ActionTypes.After+"("+t+")"+r}function F(t,e){var r=n.ActionTypes.DoneState+"."+t,i={type:r,data:e,toString:function(){return r}};return i}function E(t,e){var r=n.ActionTypes.DoneInvoke+"."+t,i={type:r,data:e,toString:function(){return r}};return i}function m(t,e){var r=n.ActionTypes.ErrorPlatform+"."+t,i={type:r,data:e,toString:function(){return r}};return i}function O(e,n){return v(function(t,e){return e},(0,t.__assign)((0,t.__assign)({},n),{to:e}))}function P(e,i){return y({type:r.error,data:e},(0,t.__assign)((0,t.__assign)({},i),{to:n.SpecialTargets.Parent}))}exports.assign=b;
},{"./_virtual/_tslib.js":"SFSL","./utils.js":"dF0W","./types.js":"kaSj","./actionTypes.js":"Y0yJ"}],"p0He":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAdjList=u,exports.getAllStateNodes=a,exports.getChildren=n,exports.getConfiguration=o,exports.getValue=l,exports.has=f,exports.isInFinalState=c,exports.nextEvents=s,exports.isLeafNode=void 0;var r=require("./_virtual/_tslib.js"),e=require("./utils.js"),t=function(r){return"atomic"===r.type||"final"===r.type};function n(r){return(0,e.keys)(r.states).map(function(e){return r.states[e]})}function a(r){var o=[r];return t(r)?o:o.concat((0,e.flatten)(n(r).map(a)))}function o(e,t){var a,o,i,l,f,s,c,p,d=u(new Set(e)),y=new Set(t);try{for(var v=(0,r.__values)(y),h=v.next();!h.done;h=v.next())for(var x=(A=h.value).parent;x&&!y.has(x);)y.add(x),x=x.parent}catch(k){a={error:k}}finally{try{h&&!h.done&&(o=v.return)&&o.call(v)}finally{if(a)throw a.error}}var _=u(y);try{for(var g=(0,r.__values)(y),w=g.next();!w.done;w=g.next()){if("compound"!==(A=w.value).type||_.get(A)&&_.get(A).length){if("parallel"===A.type)try{for(var m=(f=void 0,(0,r.__values)(n(A))),S=m.next();!S.done;S=m.next()){var E=S.value;"history"!==E.type&&(y.has(E)||(y.add(E),d.get(E)?d.get(E).forEach(function(r){return y.add(r)}):E.initialStateNodes.forEach(function(r){return y.add(r)})))}}catch(L){f={error:L}}finally{try{S&&!S.done&&(s=m.return)&&s.call(m)}finally{if(f)throw f.error}}}else d.get(A)?d.get(A).forEach(function(r){return y.add(r)}):A.initialStateNodes.forEach(function(r){return y.add(r)})}}catch(b){i={error:b}}finally{try{w&&!w.done&&(l=g.return)&&l.call(g)}finally{if(i)throw i.error}}try{for(var N=(0,r.__values)(y),j=N.next();!j.done;j=N.next()){var A;for(x=(A=j.value).parent;x&&!y.has(x);)y.add(x),x=x.parent}}catch(q){c={error:q}}finally{try{j&&!j.done&&(p=N.return)&&p.call(N)}finally{if(c)throw c.error}}return y}function i(r,e){var n=e.get(r);if(!n)return{};if("compound"===r.type){var a=n[0];if(!a)return{};if(t(a))return a.key}var o={};return n.forEach(function(r){o[r.key]=i(r,e)}),o}function u(e){var t,n,a=new Map;try{for(var o=(0,r.__values)(e),i=o.next();!i.done;i=o.next()){var u=i.value;a.has(u)||a.set(u,[]),u.parent&&(a.has(u.parent)||a.set(u.parent,[]),a.get(u.parent).push(u))}}catch(l){t={error:l}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return a}function l(r,e){return i(r,u(o([r],e)))}function f(r,e){return Array.isArray(r)?r.some(function(r){return r===e}):r instanceof Set&&r.has(e)}function s(t){return(0,e.flatten)((0,r.__spread)(new Set(t.map(function(r){return r.ownEvents}))))}function c(r,e){return"compound"===e.type?n(e).some(function(e){return"final"===e.type&&f(r,e)}):"parallel"===e.type&&n(e).every(function(e){return c(r,e)})}exports.isLeafNode=t;
},{"./_virtual/_tslib.js":"SFSL","./utils.js":"dF0W"}],"Iv8e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bindActionToState=a,exports.isState=o,exports.stateValuesEqual=r,exports.State=void 0;var t=require("./_virtual/_tslib.js"),i=require("./constants.js"),e=require("./utils.js"),n=require("./stateUtils.js"),s=require("./actions.js");function r(t,i){if(t===i)return!0;if(void 0===t||void 0===i)return!1;if((0,e.isString)(t)||(0,e.isString)(i))return t===i;var n=(0,e.keys)(t),s=(0,e.keys)(i);return n.length===s.length&&n.every(function(e){return r(t[e],i[e])})}function o(t){return!(0,e.isString)(t)&&("value"in t&&"history"in t)}function a(i,e){var n=i.exec;return(0,t.__assign)((0,t.__assign)({},i),{exec:void 0!==n?function(){return n(e.context,e.event,{action:i,state:e,_event:e._event})}:void 0})}var u=function(){function r(t){this.actions=[],this.activities=i.EMPTY_ACTIVITY_MAP,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||i.EMPTY_ACTIVITY_MAP,this.meta=t.meta||{},this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,Object.defineProperty(this,"nextEvents",{get:function(){return(0,n.nextEvents)(t.configuration)}})}return r.from=function(t,i){return t instanceof r?t.context!==i?new r({value:t.value,context:i,_event:t._event,_sessionid:null,historyValue:t.historyValue,history:t.history,actions:[],activities:t.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):t:new r({value:t,context:i,_event:s.initEvent,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},r.create=function(t){return new r(t)},r.inert=function(t,i){if(t instanceof r){if(!t.actions.length)return t;var e=s.initEvent;return new r({value:t.value,context:i,_event:e,_sessionid:null,historyValue:t.historyValue,history:t.history,activities:t.activities,configuration:t.configuration,transitions:[],children:{}})}return r.from(t,i)},r.prototype.toStrings=function(i,n){var s=this;if(void 0===i&&(i=this.value),void 0===n&&(n="."),(0,e.isString)(i))return[i];var r=(0,e.keys)(i);return r.concat.apply(r,(0,t.__spread)(r.map(function(t){return s.toStrings(i[t],n).map(function(i){return t+n+i})})))},r.prototype.toJSON=function(){this.configuration,this.transitions;return(0,t.__rest)(this,["configuration","transitions"])},r.prototype.matches=function(t){return(0,e.matchesState)(t,this.value)},r}();exports.State=u;
},{"./_virtual/_tslib.js":"SFSL","./constants.js":"WRg7","./utils.js":"dF0W","./stateUtils.js":"p0He","./actions.js":"RPqm"}],"iNa7":[function(require,module,exports) {
"use strict";function t(t){return{id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},toJSON:function(){return{id:t}}}}function e(e){var r=t(e.id);return r.meta=e,r}function r(t){try{return"function"==typeof t.send}catch(e){return!1}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createInvocableActor=e,exports.createNullActor=t,exports.isActor=r;
},{}],"ifhd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StateNode=void 0;var t=require("./_virtual/_tslib.js"),e=require("./constants.js"),i=require("./environment.js"),n=require("./utils.js"),r=require("./types.js"),a=require("./stateUtils.js"),o=require("./actionTypes.js"),s=require("./actions.js"),h=require("./State.js"),c=require("./Actor.js"),u="",l="#",f="*",d={},p=function(t){return t[0]===l},v=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},y=function(t,e,i){var r=i.slice(0,-1).some(function(t){return!("cond"in t)&&!("in"in t)&&((0,n.isString)(t.target)||(0,n.isMachine)(t.target))}),a=e===u?"the transient event":"event '"+e+"'";(0,n.warn)(!r,"One or more transitions for "+a+" on state '"+t.id+"' are unreachable. Make sure that the default transition is the last one defined.")},g=function(){function g(r,h,c){var l=this;this.config=r,this.context=c,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.options=Object.assign(v(),h),this.parent=this.options._parent,this.key=this.config.key||this.options._key||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:e.STATE_DELIMITER),this.id=this.config.id||(0,t.__spread)([this.machine.key],this.path).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&(0,n.keys)(this.config.states).length?"compound":this.config.history?"history":"atomic"),i.IS_PRODUCTION||(0,n.warn)(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '+(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '"+this.type+"'`")+" in the config for state node '"+this.id+"' instead."),this.initial=this.config.initial,this.states=this.config.states?(0,n.mapValues)(this.config.states,function(e,i){var n,r=new g(e,{_parent:l,_key:i});return Object.assign(l.idMap,(0,t.__assign)(((n={})[r.id]=r,n),r.idMap)),r}):d;var f=0;!function e(i){var n,r;i.order=f++;try{for(var o=(0,t.__values)((0,a.getChildren)(i)),s=o.next();!s.done;s=o.next())e(s.value)}catch(h){n={error:h}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some(function(t){return t.event===u}):u in this.config.on),this.strict=!!this.config.strict,this.onEntry=(0,n.toArray)(this.config.entry||this.config.onEntry).map(function(t){return(0,s.toActionObject)(t)}),this.onExit=(0,n.toArray)(this.config.exit||this.config.onExit).map(function(t){return(0,s.toActionObject)(t)}),this.meta=this.config.meta,this.data="final"===this.type?this.config.data:void 0,this.invoke=(0,n.toArray)(this.config.invoke).map(function(e,i){var r,a;if((0,n.isMachine)(e))return l.machine.options.services=(0,t.__assign)(((r={})[e.id]=e,r),l.machine.options.services),{type:o.invoke,src:e.id,id:e.id};if("string"!=typeof e.src){var s=l.id+":invocation["+i+"]";return l.machine.options.services=(0,t.__assign)(((a={})[s]=e.src,a),l.machine.options.services),(0,t.__assign)((0,t.__assign)({type:o.invoke,id:s},e),{src:s})}return(0,t.__assign)((0,t.__assign)({},e),{type:o.invoke,id:e.id||e.src,src:e.src})}),this.activities=(0,n.toArray)(this.config.activities).concat(this.invoke).map(function(t){return(0,s.toActivityDefinition)(t)}),this.transition=this.transition.bind(this)}return g.prototype._init=function(){this.__cache.transitions||(0,a.getAllStateNodes)(this).forEach(function(t){return t.on})},g.prototype.withConfig=function(e,i){void 0===i&&(i=this.context);var n=this.options,r=n.actions,a=n.activities,o=n.guards,s=n.services,h=n.delays;return new g(this.config,{actions:(0,t.__assign)((0,t.__assign)({},r),e.actions),activities:(0,t.__assign)((0,t.__assign)({},a),e.activities),guards:(0,t.__assign)((0,t.__assign)({},o),e.guards),services:(0,t.__assign)((0,t.__assign)({},s),e.services),delays:(0,t.__assign)((0,t.__assign)({},h),e.delays)},i)},g.prototype.withContext=function(t){return new g(this.config,this.options,t)},Object.defineProperty(g.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,type:this.type,initial:this.initial,history:this.history,states:(0,n.mapValues)(this.states,function(t){return t.definition}),on:this.on,transitions:this.transitions,onEntry:this.onEntry,onExit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.data,invoke:this.invoke}},enumerable:!0,configurable:!0}),g.prototype.toJSON=function(){return this.definition},Object.defineProperty(g.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce(function(t,e){return t[e.eventType]=t[e.eventType]||[],t[e.eventType].push(e),t},{})},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!0,configurable:!0}),g.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var e=t===u,i=this.transitions.filter(function(i){var n=i.eventType===t;return e?n:n||i.eventType===f});return this.__cache.candidates[t]=i,i},g.prototype.getDelayedTransitions=function(){var e=this,i=this.config.after;if(!i)return[];var r=function(t,i){var r=(0,n.isFunction)(t)?e.id+":delay["+i+"]":t,a=(0,s.after)(r,e.id);return e.onEntry.push((0,s.send)(a,{delay:t})),e.onExit.push((0,s.cancel)(a)),a};return((0,n.isArray)(i)?i.map(function(e,i){var n=r(e.delay,i);return(0,t.__assign)((0,t.__assign)({},e),{event:n})}):(0,n.flatten)((0,n.keys)(i).map(function(e,a){var o=i[e],s=(0,n.isString)(o)?{target:o}:o,h=isNaN(+e)?e:+e,c=r(h,a);return(0,n.toArray)(s).map(function(e){return(0,t.__assign)((0,t.__assign)({},e),{event:c,delay:h})})}))).map(function(i){var n=i.delay;return(0,t.__assign)((0,t.__assign)({},e.formatTransition(i)),{delay:n})})},g.prototype.getStateNodes=function(t){var e,i=this;if(!t)return[];var r=t instanceof h.State?t.value:(0,n.toStateValue)(t,this.delimiter);if((0,n.isString)(r)){var a=this.getStateNode(r).initial;return void 0!==a?this.getStateNodes(((e={})[r]=a,e)):[this.states[r]]}var o=(0,n.keys)(r);return o.map(function(t){return i.getStateNode(t)}).concat(o.reduce(function(t,e){var n=i.getStateNode(e).getStateNodes(r[e]);return t.concat(n)},[]))},g.prototype.handles=function(t){var e=(0,n.getEventType)(t);return this.events.includes(e)},g.prototype.resolveState=function(e){var i=Array.from((0,a.getConfiguration)([],this.getStateNodes(e.value)));return new h.State((0,t.__assign)((0,t.__assign)({},e),{value:this.resolve(e.value),configuration:i}))},g.prototype.transitionLeafNode=function(t,e,i){var n=this.getStateNode(t).next(e,i);return n&&n.transitions.length?n:this.next(e,i)},g.prototype.transitionCompoundNode=function(t,e,i){var r=(0,n.keys)(t),a=this.getStateNode(r[0])._transition(t[r[0]],e,i);return a&&a.transitions.length?a:this.next(e,i)},g.prototype.transitionParallelNode=function(e,i,r){var a,o,s={};try{for(var h=(0,t.__values)((0,n.keys)(e)),c=h.next();!c.done;c=h.next()){var u=c.value,l=e[u];if(l){var f=this.getStateNode(u)._transition(l,i,r);f&&(s[u]=f)}}}catch(g){a={error:g}}finally{try{c&&!c.done&&(o=h.return)&&o.call(h)}finally{if(a)throw a.error}}var d=(0,n.keys)(s).map(function(t){return s[t]}),p=(0,n.flatten)(d.map(function(t){return t.transitions}));if(!d.some(function(t){return t.transitions.length>0}))return this.next(i,r);var v=(0,n.flatten)(d.map(function(t){return t.entrySet})),y=(0,n.flatten)((0,n.keys)(s).map(function(t){return s[t].configuration}));return{transitions:p,entrySet:v,exitSet:(0,n.flatten)(d.map(function(t){return t.exitSet})),configuration:y,source:i,actions:(0,n.flatten)((0,n.keys)(s).map(function(t){return s[t].actions}))}},g.prototype._transition=function(t,e,i){return(0,n.isString)(t)?this.transitionLeafNode(t,e,i):1===(0,n.keys)(t).length?this.transitionCompoundNode(t,e,i):this.transitionParallelNode(t,e,i)},g.prototype.next=function(e,i){var r,a,o,s=this,h=i.name,c=[],u=[];try{for(var l=(0,t.__values)(this.getCandidates(h)),f=l.next();!f.done;f=l.next()){var d=f.value,v=d.cond,y=d.in,g=e.context,_=!y||((0,n.isString)(y)&&p(y)?e.matches((0,n.toStateValue)(this.getStateNodeById(y).path,this.delimiter)):(0,n.matchesState)((0,n.toStateValue)(y,this.delimiter),(0,n.path)(this.path.slice(0,-2))(e.value))),m=!1;try{m=!v||this.evaluateGuard(v,g,i,e)}catch(x){throw new Error("Unable to evaluate guard '"+(v.name||v.type)+"' in transition for event '"+h+"' in state node '"+this.id+"':\n"+x.message)}if(m&&_){void 0!==d.target&&(u=d.target),c.push.apply(c,(0,t.__spread)(d.actions)),o=d;break}}}catch(b){r={error:b}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}if(o){if(!u.length)return{transitions:[o],entrySet:[],exitSet:[],configuration:e.value?[this]:[],source:e,actions:c};var S=(0,n.flatten)(u.map(function(t){return s.getRelativeStateNodes(t,e.historyValue)})),w=!!o.internal;return{transitions:[o],entrySet:w?[]:(0,n.flatten)(S.map(function(t){return s.nodesFromChild(t)})),exitSet:w?[]:[this],configuration:S,source:e,actions:c}}},g.prototype.nodesFromChild=function(t){if(t.escapes(this))return[];for(var e=[],i=t;i&&i!==this;)e.push(i),i=i.parent;return e.push(this),e},g.prototype.escapes=function(t){if(this===t)return!1;for(var e=this.parent;e;){if(e===t)return!1;e=e.parent}return!0},g.prototype.evaluateGuard=function(t,i,n,r){var a=this.machine.options.guards,o={state:r,cond:t,_event:n};if(t.type===e.DEFAULT_GUARD_TYPE)return t.predicate(i,n.data,o);var s=a[t.type];if(!s)throw new Error("Guard '"+t.type+"' is not implemented on machine '"+this.machine.id+"'.");return s(i,n.data,o)},g.prototype.getActions=function(e,i,r,o){var h,c,u,l,f=(0,a.getConfiguration)([],o?this.getStateNodes(o.value):[this]),d=e.configuration.length?(0,a.getConfiguration)(f,e.configuration):f;try{for(var p=(0,t.__values)(d),v=p.next();!v.done;v=p.next()){var y=v.value;(0,a.has)(f,y)||e.entrySet.push(y)}}catch(T){h={error:T}}finally{try{v&&!v.done&&(c=p.return)&&c.call(p)}finally{if(h)throw h.error}}try{for(var g=(0,t.__values)(f),_=g.next();!_.done;_=g.next()){y=_.value;(0,a.has)(d,y)&&!(0,a.has)(e.exitSet,y.parent)||e.exitSet.push(y)}}catch(V){u={error:V}}finally{try{_&&!_.done&&(l=g.return)&&l.call(g)}finally{if(u)throw u.error}}e.source||(e.exitSet=[],e.entrySet.push(this));var m=(0,n.flatten)(e.entrySet.map(function(t){var o=[];if("final"!==t.type)return o;var h=t.parent;if(o.push((0,s.done)(t.id,t.data),(0,s.done)(h.id,t.data?(0,n.mapContext)(t.data,i,r):void 0)),h.parent){var c=h.parent;"parallel"===c.type&&(0,a.getChildren)(c).every(function(t){return(0,a.isInFinalState)(e.configuration,t)})&&o.push((0,s.done)(c.id,c.data))}return o}));e.exitSet.sort(function(t,e){return e.order-t.order}),e.entrySet.sort(function(t,e){return t.order-e.order});var S=new Set(e.entrySet),w=new Set(e.exitSet),x=(0,t.__read)([(0,n.flatten)(Array.from(S).map(function(e){return(0,t.__spread)(e.activities.map(function(t){return(0,s.start)(t)}),e.onEntry)})).concat(m.map(s.raise)),(0,n.flatten)(Array.from(w).map(function(e){return(0,t.__spread)(e.onExit,e.activities.map(function(t){return(0,s.stop)(t)}))}))],2),b=x[0],N=x[1];return(0,s.toActionObjects)(N.concat(e.actions).concat(b),this.machine.options.actions)},g.prototype.transition=function(e,r,o){void 0===e&&(e=this.initialState);var s,c=(0,n.toSCXMLEvent)(r);if(e instanceof h.State)s=void 0===o?e:this.resolveState(h.State.from(e,o));else{var u=(0,n.isString)(e)?this.resolve((0,n.pathToStateValue)(this.getResolvedPath(e))):this.resolve(e),l=o||this.machine.context;s=this.resolveState(h.State.from(u,l))}if(!i.IS_PRODUCTION&&c.name===f)throw new Error("An event cannot have the wildcard type ('"+f+"')");if(this.strict&&!this.events.includes(c.name)&&!(0,n.isBuiltInEvent)(c.name))throw new Error("Machine '"+this.id+"' does not accept event '"+c.name+"'");var d=this._transition(s.value,s,c)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:s,actions:[]},p=(0,a.getConfiguration)([],this.getStateNodes(s.value)),v=d.configuration.length?(0,a.getConfiguration)(p,d.configuration):p;return d.configuration=(0,t.__spread)(v),this.resolveTransition(d,s,c)},g.prototype.resolveRaisedTransition=function(e,i,n){var r,a=e.actions;return(e=this.transition(e,i))._event=n,e.event=n.data,(r=e.actions).unshift.apply(r,(0,t.__spread)(a)),e},g.prototype.resolveTransition=function(e,u,l,f){var d,p,v=this;void 0===l&&(l=s.initEvent),void 0===f&&(f=this.machine.context);var y=e.configuration,g=!u||e.transitions.length>0?(0,a.getValue)(this.machine,y):void 0,_=u?u.historyValue?u.historyValue:e.source?this.machine.historyValue(u.value):void 0:void 0,m=u?u.context:f,S=this.getActions(e,m,l,u),w=u?(0,t.__assign)({},u.activities):{};try{for(var x=(0,t.__values)(S),b=x.next();!b.done;b=x.next()){var N=b.value;N.type===o.start?w[N.activity.type]=N:N.type===o.stop&&(w[N.activity.type]=!1)}}catch(L){d={error:L}}finally{try{b&&!b.done&&(p=x.return)&&p.call(x)}finally{if(d)throw d.error}}var T=(0,t.__read)((0,n.partition)(S,function(t){return t.type===o.assign}),2),V=T[0],E=T[1],k=V.length?(0,n.updateContext)(m,l,V,u):m,P=(0,n.flatten)(E.map(function(t){switch(t.type){case o.raise:return(0,s.resolveRaise)(t);case o.send:var e=(0,s.resolveSend)(t,k,l,v.machine.options.delays);return i.IS_PRODUCTION||(0,n.warn)(!(0,n.isString)(t.delay)||"number"==typeof e.delay,"No delay reference for delay expression '"+t.delay+"' was found on machine '"+v.machine.id+"'"),e;case o.log:return(0,s.resolveLog)(t,k,l);case o.pure:return t.get(k,l.data)||[];default:return(0,s.toActionObject)(t,v.options.actions)}})),A=(0,t.__read)((0,n.partition)(P,function(t){return t.type===o.raise||t.type===o.send&&t.to===r.SpecialTargets.Internal}),2),C=A[0],O=A[1],j=P.filter(function(t){return t.type===o.start&&t.activity.type===o.invoke}).reduce(function(t,e){return t[e.activity.id]=(0,c.createInvocableActor)(e.activity),t},u?(0,t.__assign)({},u.children):{}),I=g?e.configuration:u?u.configuration:[],R=I.reduce(function(t,e){return void 0!==e.meta&&(t[e.id]=e.meta),t},{}),D=(0,a.isInFinalState)(I,this),F=new h.State({value:g||u.value,context:k,_event:l,_sessionid:u?u._sessionid:null,historyValue:g?_?(0,n.updateHistoryValue)(_,g):void 0:u?u.historyValue:void 0,history:!g||e.source?u:void 0,actions:g?O:[],activities:g?w:u?u.activities:{},meta:g?R:u?u.meta:void 0,events:[],configuration:I,transitions:e.transitions,children:j,done:D});F.changed=l.name===o.update||!!V.length;var M=F.history;if(M&&delete M.history,!g)return F;var U=F;if(!D)for((this._transient||y.some(function(t){return t._transient}))&&(U=this.resolveRaisedTransition(U,{type:o.nullEvent},l));C.length;){var q=C.shift();U=this.resolveRaisedTransition(U,q._event,l)}var B=U.changed||(M?!!U.actions.length||!!V.length||typeof M.value!=typeof U.value||!(0,h.stateValuesEqual)(U.value,M.value):void 0);return U.changed=B,U.historyValue=F.historyValue,U.history=M,U},g.prototype.getStateNode=function(t){if(p(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '"+t+"' from '"+this.id+"'; no child states exist.");var e=this.states[t];if(!e)throw new Error("Child state '"+t+"' does not exist on '"+this.id+"'");return e},g.prototype.getStateNodeById=function(t){var e=p(t)?t.slice(l.length):t;if(e===this.id)return this;var i=this.machine.idMap[e];if(!i)throw new Error("Child state node '#"+e+"' does not exist on machine '"+this.id+"'");return i},g.prototype.getStateNodeByPath=function(t){if("string"==typeof t&&p(t))try{return this.getStateNodeById(t.slice(1))}catch(a){}for(var e=(0,n.toStatePath)(t,this.delimiter).slice(),i=this;e.length;){var r=e.shift();if(!r.length)break;i=i.getStateNode(r)}return i},g.prototype.resolve=function(t){var e,i=this;if(!t)return this.initialStateValue||d;switch(this.type){case"parallel":return(0,n.mapValues)(this.initialStateValue,function(e,n){return e?i.getStateNode(n).resolve(t[n]||e):d});case"compound":if((0,n.isString)(t)){var r=this.getStateNode(t);return"parallel"===r.type||"compound"===r.type?((e={})[t]=r.initialStateValue,e):t}return(0,n.keys)(t).length?(0,n.mapValues)(t,function(t,e){return t?i.getStateNode(e).resolve(t):d}):this.initialStateValue||{};default:return t||d}},g.prototype.getResolvedPath=function(t){if(p(t)){var e=this.machine.idMap[t.slice(l.length)];if(!e)throw new Error("Unable to find state node '"+t+"'");return e.path}return(0,n.toStatePath)(t,this.delimiter)},Object.defineProperty(g.prototype,"initialStateValue",{get:function(){var t,e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)e=(0,n.mapFilterValues)(this.states,function(t){return t.initialStateValue||d},function(t){return!("history"===t.type)});else if(void 0!==this.initial){if(!this.states[this.initial])throw new Error("Initial state '"+this.initial+"' not found on '"+this.key+"'");e=(0,a.isLeafNode)(this.states[this.initial])?this.initial:((t={})[this.initial]=this.states[this.initial].initialStateValue,t)}return this.__cache.initialStateValue=e,this.__cache.initialStateValue},enumerable:!0,configurable:!0}),g.prototype.getInitialState=function(t,e){var i=this.getStateNodes(t);return this.resolveTransition({configuration:i,entrySet:i,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,void 0,e)},Object.defineProperty(g.prototype,"initialState",{get:function(){this._init();var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '"+this.id+"'.");return this.getInitialState(t)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"target",{get:function(){var t;if("history"===this.type){var e=this.config;t=(0,n.isString)(e.target)&&p(e.target)?(0,n.pathToStateValue)(this.machine.getStateNodeById(e.target).path.slice(this.path.length-1)):e.target}return t},enumerable:!0,configurable:!0}),g.prototype.getRelativeStateNodes=function(t,e,i){return void 0===i&&(i=!0),i?"history"===t.type?t.resolveHistory(e):t.initialStateNodes:[t]},Object.defineProperty(g.prototype,"initialStateNodes",{get:function(){var t=this;if((0,a.isLeafNode)(this))return[this];if("compound"===this.type&&!this.initial)return i.IS_PRODUCTION||(0,n.warn)(!1,"Compound state node '"+this.id+"' has no initial state."),[this];var e=(0,n.toStatePaths)(this.initialStateValue);return(0,n.flatten)(e.map(function(e){return t.getFromRelativePath(e)}))},enumerable:!0,configurable:!0}),g.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var i=(0,t.__read)(e),n=i[0],r=i.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '"+n+"' from node with no states");var a=this.getStateNode(n);if("history"===a.type)return a.resolveHistory();if(!this.states[n])throw new Error("Child state '"+n+"' does not exist on '"+this.id+"'");return this.states[n].getFromRelativePath(r)},g.prototype.historyValue=function(t){if((0,n.keys)(this.states).length)return{current:t||this.initialStateValue,states:(0,n.mapFilterValues)(this.states,function(e,i){if(!t)return e.historyValue();var r=(0,n.isString)(t)?void 0:t[i];return e.historyValue(r||e.initialStateValue)},function(t){return!t.history})}},g.prototype.resolveHistory=function(t){var e=this;if("history"!==this.type)return[this];var i=this.parent;if(!t){var r=this.target;return r?(0,n.flatten)((0,n.toStatePaths)(r).map(function(t){return i.getFromRelativePath(t)})):i.initialStateNodes}var a=(0,n.nestedPath)(i.path,"states")(t).current;return(0,n.isString)(a)?[i.getStateNode(a)]:(0,n.flatten)((0,n.toStatePaths)(a).map(function(t){return"deep"===e.history?i.getFromRelativePath(t):[i.states[t[0]]]}))},Object.defineProperty(g.prototype,"stateIds",{get:function(){var t=this,e=(0,n.flatten)((0,n.keys)(this.states).map(function(e){return t.states[e].stateIds}));return[this.id].concat(e)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"events",{get:function(){var e,i,r,a;if(this.__cache.events)return this.__cache.events;var o=this.states,s=new Set(this.ownEvents);if(o)try{for(var h=(0,t.__values)((0,n.keys)(o)),c=h.next();!c.done;c=h.next()){var u=o[c.value];if(u.states)try{for(var l=(r=void 0,(0,t.__values)(u.events)),f=l.next();!f.done;f=l.next()){var d=f.value;s.add(""+d)}}catch(p){r={error:p}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}}}catch(v){e={error:v}}finally{try{c&&!c.done&&(i=h.return)&&i.call(h)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(s)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter(function(t){return!(!t.target&&!t.actions.length&&t.internal)}).map(function(t){return t.eventType}));return Array.from(t)},enumerable:!0,configurable:!0}),g.prototype.resolveTarget=function(t){var e=this;if(void 0!==t)return t.map(function(t){if(!(0,n.isString)(t))return t;var i=t[0]===e.delimiter;if(i&&!e.parent)return e.getStateNodeByPath(t.slice(1));var r=i?e.key+t:t;if(!e.parent)return e.getStateNodeByPath(r);try{return e.parent.getStateNodeByPath(r)}catch(a){throw new Error("Invalid transition definition for state node '"+e.id+"':\n"+a.message)}})},g.prototype.formatTransition=function(e){var i=this,r=(0,n.normalizeTarget)(e.target),a="internal"in e?e.internal:!r||r.some(function(t){return(0,n.isString)(t)&&t[0]===i.delimiter}),o=this.machine.options.guards,h=this.resolveTarget(r);return(0,t.__assign)((0,t.__assign)({},e),{actions:(0,s.toActionObjects)((0,n.toArray)(e.actions)),cond:(0,n.toGuard)(e.cond,o),target:h,source:this,internal:a,eventType:e.event})},g.prototype.formatTransitions=function(){var e,r,a,o=this;if(this.config.on)if(Array.isArray(this.config.on))a=this.config.on;else{var h=this.config.on,c=f,u=h[c],l=void 0===u?[]:u,d=(0,t.__rest)(h,["symbol"==typeof c?c:c+""]);a=(0,n.flatten)((0,n.keys)(d).map(function(t){var e=(0,n.toTransitionConfigArray)(t,d[t]);return i.IS_PRODUCTION||y(o,t,e),e}).concat((0,n.toTransitionConfigArray)(f,l)))}else a=[];var p=this.config.onDone?(0,n.toTransitionConfigArray)(String((0,s.done)(this.id)),this.config.onDone):[],v=(0,n.flatten)(this.invoke.map(function(e){var i=[];return e.onDone&&i.push.apply(i,(0,t.__spread)((0,n.toTransitionConfigArray)(String((0,s.doneInvoke)(e.id)),e.onDone))),e.onError&&i.push.apply(i,(0,t.__spread)((0,n.toTransitionConfigArray)(String((0,s.error)(e.id)),e.onError))),i})),g=this.after,_=(0,n.flatten)((0,t.__spread)(p,v,a).map(function(t){return(0,n.toArray)(t).map(function(t){return o.formatTransition(t)})}));try{for(var m=(0,t.__values)(g),S=m.next();!S.done;S=m.next()){var w=S.value;_.push(w)}}catch(x){e={error:x}}finally{try{S&&!S.done&&(r=m.return)&&r.call(m)}finally{if(e)throw e.error}}return _},g}();exports.StateNode=g;
},{"./_virtual/_tslib.js":"SFSL","./constants.js":"WRg7","./environment.js":"ClP7","./utils.js":"dF0W","./types.js":"kaSj","./stateUtils.js":"p0He","./actionTypes.js":"Y0yJ","./actions.js":"RPqm","./State.js":"Iv8e","./Actor.js":"iNa7"}],"pjkI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Machine=t,exports.createMachine=n;var e=require("./StateNode.js");function t(t,n,o){void 0===o&&(o=t.context);var r="function"==typeof o?o():o;return new e.StateNode(t,n,r)}function n(t,n){var o="function"==typeof t.context?t.context():t.context;return new e.StateNode(t,n,o)}
},{"./StateNode.js":"ifhd"}],"DS4x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Scheduler=void 0;var e=require("./_virtual/_tslib.js"),t={deferEvents:!1},s=function(){function s(s){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=(0,e.__assign)((0,e.__assign)({},t),s)}return s.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents)return void this.schedule(e);this.process(e)}this.flushEvents()},s.prototype.schedule=function(e){if(this.initialized&&!this.processingEvent){if(0!==this.queue.length)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()}else this.queue.push(e)},s.prototype.clear=function(){this.queue=[]},s.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},s.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(t){throw this.clear(),t}finally{this.processingEvent=!1}},s}();exports.Scheduler=s;
},{"./_virtual/_tslib.js":"SFSL"}],"xSSc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registry=void 0;var e=new Map,t=new Map,r=0,n={register:function(n){var o="x:"+r++;return e.set(o,n),t.set(n,o),o},get:function(t){return e.get(t)},lookup:function(e){return t.get(e)}};exports.registry=n;
},{}],"XpEp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerService=t;var e=require("./environment.js");function r(){var e=window;if(e.__xstate__)return e.__xstate__}function t(t){if(!e.IS_PRODUCTION&&"undefined"!=typeof window){var i=r();i&&i.register(t)}}
},{"./environment.js":"ClP7"}],"tF8M":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpret=S,exports.spawn=m,exports.Interpreter=void 0;var e,n=require("./_virtual/_tslib.js"),i=require("./environment.js"),r=require("./utils.js"),s=require("./types.js"),o=require("./stateUtils.js"),a=require("./actionTypes.js"),c=require("./actions.js"),d=require("./State.js"),u=require("./Actor.js"),h=require("./scheduler.js"),l=require("./registry.js"),f=require("./devTools.js"),v={sync:!1,autoForward:!1},p=function(){var t=[];return function(e,n){e&&t.push(e);var i=n(e||t[t.length-1]);return e&&t.pop(),i}}();!function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"}(e||(e={}));var y=function(){function y(t,o,d){var f=this;void 0===o&&(o=y.defaultOptions),this.machine=t,this.scheduler=new h.Scheduler,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this._status=e.NotStarted,this.children=new Map,this.forwardTo=new Set,this.init=this.start,this.send=function(t,n){if((0,r.isArray)(t))return f.batch(t),f.state;var s=(0,r.toSCXMLEvent)((0,r.toEventObject)(t,n));if(f._status===e.Stopped)return i.IS_PRODUCTION||(0,r.warn)(!1,'Event "'+s.name+'" was sent to stopped service "'+f.machine.id+'". This service has already reached its final state, and will not transition.\nEvent: '+JSON.stringify(s.data)),f.state;if(f._status===e.NotStarted&&f.options.deferEvents)i.IS_PRODUCTION||(0,r.warn)(!1,'Event "'+s.name+'" was sent to uninitialized service "'+f.machine.id+'" and is deferred. Make sure .start() is called for this service.\nEvent: '+JSON.stringify(s.data));else if(f._status!==e.Running)throw new Error('Event "'+s.name+'" was sent to uninitialized service "'+f.machine.id+'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: '+JSON.stringify(s.data));return f.scheduler.schedule(function(){f.forward(s);var t=f.nextState(s);f.update(t,s)}),f._state},this.sendTo=function(t,e){var o=f.parent&&(e===s.SpecialTargets.Parent||f.parent.id===e),d=o?f.parent:(0,u.isActor)(e)?e:f.children.get(e)||l.registry.get(e);if(d)"machine"in d?d.send((0,n.__assign)((0,n.__assign)({},t),{name:t.name===a.error?""+(0,c.error)(f.id):t.name,origin:f.sessionId})):d.send(t.data);else{if(!o)throw new Error("Unable to send event to child '"+e+"' from service '"+f.id+"'.");i.IS_PRODUCTION||(0,r.warn)(!1,"Service '"+f.id+"' has no parent: unable to send event "+t.type)}};var v=(0,n.__assign)((0,n.__assign)({},y.defaultOptions),o),p=v.clock,_=v.logger,w=v.parent,m=v.id,S=void 0!==m?m:t.id;this.id=S,this.logger=_,this.clock=p,this.parent=w,this.options=v,this.scheduler=new h.Scheduler({deferEvents:this.options.deferEvents}),this.sessionId=void 0!==d?d:l.registry.register(this)}return Object.defineProperty(y.prototype,"initialState",{get:function(){var t=this;return this._initialState?this._initialState:p(this,function(){return t._initialState=t.machine.initialState,t._initialState})},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"state",{get:function(){return i.IS_PRODUCTION||(0,r.warn)(this._status!==e.NotStarted,"Attempted to read state from uninitialized service '"+this.id+"'. Make sure the service is started first."),this._state},enumerable:!0,configurable:!0}),y.prototype.execute=function(t,e){var i,r;try{for(var s=(0,n.__values)(t.actions),o=s.next();!o.done;o=s.next()){var a=o.value;this.exec(a,t,e)}}catch(c){i={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}},y.prototype.update=function(t,e){var i,s,a,d,u,h,l,f,v=this;if(t._sessionid=this.sessionId,this._state=t,this.options.execute&&this.execute(this.state),this.devTools&&this.devTools.send(e.data,t),t.event)try{for(var p=(0,n.__values)(this.eventListeners),y=p.next();!y.done;y=p.next()){(0,y.value)(t.event)}}catch(T){i={error:T}}finally{try{y&&!y.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}try{for(var _=(0,n.__values)(this.listeners),w=_.next();!w.done;w=_.next()){(0,w.value)(t,t.event)}}catch(L){a={error:L}}finally{try{w&&!w.done&&(d=_.return)&&d.call(_)}finally{if(a)throw a.error}}try{for(var m=(0,n.__values)(this.contextListeners),S=m.next();!S.done;S=m.next()){(0,S.value)(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(I){u={error:I}}finally{try{S&&!S.done&&(h=m.return)&&h.call(m)}finally{if(u)throw u.error}}var g=(0,o.isInFinalState)(t.configuration||[],this.machine);if(this.state.configuration&&g){var b=t.configuration.find(function(t){return"final"===t.type&&t.parent===v.machine}),x=b&&b.data?(0,r.mapContext)(b.data,t.context,e):void 0;try{for(var E=(0,n.__values)(this.doneListeners),O=E.next();!O.done;O=E.next()){(0,O.value)((0,c.doneInvoke)(this.id,x))}}catch(N){l={error:N}}finally{try{O&&!O.done&&(f=E.return)&&f.call(E)}finally{if(l)throw l.error}}this.stop()}},y.prototype.onTransition=function(t){return this.listeners.add(t),this._status===e.Running&&t(this.state,this.state.event),this},y.prototype.subscribe=function(t,n,i){var r,s=this;if(!t)return{unsubscribe:function(){}};var o=i;return"function"==typeof t?r=t:(r=t.next.bind(t),o=t.complete.bind(t)),this.listeners.add(r),this._status===e.Running&&r(this.state),o&&this.onDone(o),{unsubscribe:function(){r&&s.listeners.delete(r),o&&s.doneListeners.delete(o)}}},y.prototype.onEvent=function(t){return this.eventListeners.add(t),this},y.prototype.onSend=function(t){return this.sendListeners.add(t),this},y.prototype.onChange=function(t){return this.contextListeners.add(t),this},y.prototype.onStop=function(t){return this.stopListeners.add(t),this},y.prototype.onDone=function(t){return this.doneListeners.add(t),this},y.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},y.prototype.start=function(t){var n=this;if(this._status===e.Running)return this;this.initialized=!0,this._status=e.Running;var i=void 0===t?this.initialState:p(this,function(){return(0,d.isState)(t)?n.machine.resolveState(t):n.machine.resolveState(d.State.from(t,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(i,c.initEvent)}),this},y.prototype.stop=function(){var t,i,s,o,a,c,d,u,h,l;try{for(var f=(0,n.__values)(this.listeners),v=f.next();!v.done;v=f.next()){var p=v.value;this.listeners.delete(p)}}catch(O){t={error:O}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(t)throw t.error}}try{for(var y=(0,n.__values)(this.stopListeners),_=y.next();!_.done;_=y.next()){(p=_.value)(),this.stopListeners.delete(p)}}catch(T){s={error:T}}finally{try{_&&!_.done&&(o=y.return)&&o.call(y)}finally{if(s)throw s.error}}try{for(var w=(0,n.__values)(this.contextListeners),m=w.next();!m.done;m=w.next()){p=m.value;this.contextListeners.delete(p)}}catch(L){a={error:L}}finally{try{m&&!m.done&&(c=w.return)&&c.call(w)}finally{if(a)throw a.error}}try{for(var S=(0,n.__values)(this.doneListeners),g=S.next();!g.done;g=S.next()){p=g.value;this.doneListeners.delete(p)}}catch(I){d={error:I}}finally{try{g&&!g.done&&(u=S.return)&&u.call(S)}finally{if(d)throw d.error}}this.children.forEach(function(t){(0,r.isFunction)(t.stop)&&t.stop()});try{for(var b=(0,n.__values)((0,r.keys)(this.delayedEventsMap)),x=b.next();!x.done;x=b.next()){var E=x.value;this.clock.clearTimeout(this.delayedEventsMap[E])}}catch(N){h={error:N}}finally{try{x&&!x.done&&(l=b.return)&&l.call(b)}finally{if(h)throw h.error}}return this.scheduler.clear(),this.initialized=!1,this._status=e.Stopped,this},y.prototype.batch=function(t){var s=this;if(this._status===e.NotStarted&&this.options.deferEvents)i.IS_PRODUCTION||(0,r.warn)(!1,t.length+' event(s) were sent to uninitialized service "'+this.machine.id+'" and are deferred. Make sure .start() is called for this service.\nEvent: '+JSON.stringify(event));else if(this._status!==e.Running)throw new Error(t.length+' event(s) were sent to uninitialized service "'+this.machine.id+'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.');this.scheduler.schedule(function(){var e,i,o=s.state,a=!1,c=[],u=function(t){var e=(0,r.toSCXMLEvent)(t);s.forward(e),o=p(s,function(){return s.machine.transition(o,e)}),c.push.apply(c,(0,n.__spread)(o.actions.map(function(t){return(0,d.bindActionToState)(t,o)}))),a=a||!!o.changed};try{for(var h=(0,n.__values)(t),l=h.next();!l.done;l=h.next()){u(l.value)}}catch(f){e={error:f}}finally{try{l&&!l.done&&(i=h.return)&&i.call(h)}finally{if(e)throw e.error}}o.changed=a,o.actions=c,s.update(o,(0,r.toSCXMLEvent)(t[t.length-1]))})},y.prototype.sender=function(t){return this.send.bind(this,t)},y.prototype.nextState=function(t){var e=this,n=(0,r.toSCXMLEvent)(t);if(0===n.name.indexOf(a.errorPlatform)&&!this.state.nextEvents.some(function(t){return 0===t.indexOf(a.errorPlatform)}))throw n.data.data;return p(this,function(){return e.machine.transition(e.state,n)})},y.prototype.forward=function(t){var e,i;try{for(var r=(0,n.__values)(this.forwardTo),s=r.next();!s.done;s=r.next()){var o=s.value,a=this.children.get(o);if(!a)throw new Error("Unable to forward event '"+t+"' from interpreter '"+this.id+"' to nonexistant child '"+o+"'.");a.send(t)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}},y.prototype.defer=function(t){var e=this;this.delayedEventsMap[t.id]=this.clock.setTimeout(function(){t.to?e.sendTo(t._event,t.to):e.send(t._event)},t.delay)},y.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},y.prototype.exec=function(t,e,n){var o=e.context,d=e._event,u=(0,c.getActionFunction)(t.type,n)||t.exec,h=(0,r.isFunction)(u)?u:u?u.exec:t.exec;if(h)try{return h(o,d.data,{action:t,state:this.state,_event:d})}catch(g){throw this.parent&&this.parent.send({type:"xstate.error",data:g}),g}switch(t.type){case a.send:var l=t;if("number"==typeof l.delay)return void this.defer(l);l.to?this.sendTo(l._event,l.to):this.send(l._event);break;case a.cancel:this.cancel(t.sendId);break;case a.start:var f=t.activity;if(!this.state.activities[f.type])break;if(f.type===s.ActionTypes.Invoke){var v=this.machine.options.services?this.machine.options.services[f.src]:void 0,p=f.id,y=f.data;i.IS_PRODUCTION||(0,r.warn)(!("forward"in f),"`forward` property is deprecated (found in invocation of '"+f.src+"' in in machine '"+this.machine.id+"'). Please use `autoForward` instead.");var _="autoForward"in f?f.autoForward:!!f.forward;if(!v)return void(i.IS_PRODUCTION||(0,r.warn)(!1,"No service found for invocation '"+f.src+"' in machine '"+this.machine.id+"'."));var w=(0,r.isFunction)(v)?v(o,d.data):v;(0,r.isPromiseLike)(w)?this.state.children[p]=this.spawnPromise(Promise.resolve(w),p):(0,r.isFunction)(w)?this.state.children[p]=this.spawnCallback(w,p):(0,r.isObservable)(w)?this.state.children[p]=this.spawnObservable(w,p):(0,r.isMachine)(w)&&(this.state.children[p]=this.spawnMachine(y?w.withContext((0,r.mapContext)(y,o,d)):w,{id:p,autoForward:_}))}else this.spawnActivity(f);break;case a.stop:this.stopChild(t.activity.id);break;case a.log:var m=t.label,S=t.value;m?this.logger(m,S):this.logger(S);break;default:i.IS_PRODUCTION||(0,r.warn)(!1,"No implementation found for action type '"+t.type+"'")}},y.prototype.stopChild=function(t){var e=this.children.get(t);e&&(this.children.delete(t),this.forwardTo.delete(t),delete this.state.children[t],(0,r.isFunction)(e.stop)&&e.stop())},y.prototype.spawn=function(t,e,i){if((0,r.isPromiseLike)(t))return this.spawnPromise(Promise.resolve(t),e);if((0,r.isFunction)(t))return this.spawnCallback(t,e);if((0,u.isActor)(t))return this.spawnActor(t);if((0,r.isObservable)(t))return this.spawnObservable(t,e);if((0,r.isMachine)(t))return this.spawnMachine(t,(0,n.__assign)((0,n.__assign)({},i),{id:e}));throw new Error('Unable to spawn entity "'+e+'" of type "'+typeof t+'".')},y.prototype.spawnMachine=function(t,e){var i=this;void 0===e&&(e={});var s=new y(t,(0,n.__assign)((0,n.__assign)({},this.options),{parent:this,id:e.id||t.id})),o=(0,n.__assign)((0,n.__assign)({},v),e);o.sync&&s.onTransition(function(t){i.send(a.update,{state:t,id:s.id})}),s.onDone(function(t){i.send((0,r.toSCXMLEvent)(t,{origin:s.id}))}).start();var c=s;return this.children.set(s.id,c),o.autoForward&&this.forwardTo.add(s.id),c},y.prototype.spawnPromise=function(t,e){var n=this,i=!1;t.then(function(t){i||n.send((0,r.toSCXMLEvent)((0,c.doneInvoke)(e,t),{origin:e}))},function(t){if(!i){var s=(0,c.error)(e,t);try{n.send((0,r.toSCXMLEvent)(s,{origin:e}))}catch(o){(0,r.reportUnhandledExceptionOnInvocation)(t,o,e),n.devTools&&n.devTools.send(s,n.state),n.machine.strict&&n.stop()}}});var s={id:e,send:function(){},subscribe:function(e,n,i){var r=!1;return t.then(function(t){r||(e&&e(t),r||i&&i())},function(t){r||n(t)}),{unsubscribe:function(){return r=!0}}},stop:function(){i=!0},toJSON:function(){return{id:e}}};return this.children.set(e,s),s},y.prototype.spawnCallback=function(t,e){var n,i=this,s=!1,o=new Set,a=new Set;try{n=t(function(t){a.forEach(function(e){return e(t)}),s||i.send(t)},function(t){o.add(t)})}catch(u){this.send((0,c.error)(e,u))}if((0,r.isPromiseLike)(n))return this.spawnPromise(n,e);var d={id:e,send:function(t){return o.forEach(function(e){return e(t)})},subscribe:function(t){return a.add(t),{unsubscribe:function(){a.delete(t)}}},stop:function(){s=!0,(0,r.isFunction)(n)&&n()},toJSON:function(){return{id:e}}};return this.children.set(e,d),d},y.prototype.spawnObservable=function(t,e){var n=this,i=t.subscribe(function(t){n.send((0,r.toSCXMLEvent)(t,{origin:e}))},function(t){n.send((0,r.toSCXMLEvent)((0,c.error)(e,t),{origin:e}))},function(){n.send((0,r.toSCXMLEvent)((0,c.doneInvoke)(e),{origin:e}))}),s={id:e,send:function(){},subscribe:function(e,n,i){return t.subscribe(e,n,i)},stop:function(){return i.unsubscribe()},toJSON:function(){return{id:e}}};return this.children.set(e,s),s},y.prototype.spawnActor=function(t){return this.children.set(t.id,t),t},y.prototype.spawnActivity=function(t){var e=this.machine.options&&this.machine.options.activities?this.machine.options.activities[t.type]:void 0;if(e){var n=e(this.state.context,t);this.spawnEffect(t.id,n)}else i.IS_PRODUCTION||(0,r.warn)(!1,"No implementation found for activity '"+t.type+"'")},y.prototype.spawnEffect=function(t,e){this.children.set(t,{id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:e||void 0,toJSON:function(){return{id:t}}})},y.prototype.attachDev=function(){if(this.options.devTools&&"undefined"!=typeof window){if(window.__REDUX_DEVTOOLS_EXTENSION__){var t="object"==typeof this.options.devTools?this.options.devTools:void 0;this.devTools=window.__REDUX_DEVTOOLS_EXTENSION__.connect((0,n.__assign)((0,n.__assign)({name:this.id,autoPause:!0,stateSanitizer:function(t){return{value:t.value,context:t.context,actions:t.actions}}},t),{features:(0,n.__assign)({jump:!1,skip:!1},t?t.features:void 0)}),this.machine),this.devTools.init(this.state)}(0,f.registerService)(this)}},y.prototype.toJSON=function(){return{id:this.id}},y.prototype[r.symbolObservable]=function(){return this},y.defaultOptions=function(t){return{execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return t.setTimeout.call(null,e,n)},clearTimeout:function(e){return t.clearTimeout.call(null,e)}},logger:t.console.log.bind(console),devTools:!1}}("undefined"==typeof window?t:window),y.interpret=S,y}();exports.Interpreter=y;var _=function(t){return void 0===t&&(t="null"),{id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},toJSON:function(){return{id:t}}}},w=function(t){return(0,r.isString)(t)?(0,n.__assign)((0,n.__assign)({},v),{name:t}):(0,n.__assign)((0,n.__assign)((0,n.__assign)({},v),{name:(0,r.uniqueId)()}),t)};function m(t,e){var n=w(e);return p(void 0,function(e){return i.IS_PRODUCTION||(0,r.warn)(!!e,'Attempted to spawn an Actor (ID: "'+((0,r.isMachine)(t)?t.id:"undefined")+'") outside of a service. This will have no effect.'),e?e.spawn(t,n.name,n):_(n.name)})}function S(t,e){return new y(t,e)}
},{"./_virtual/_tslib.js":"SFSL","./environment.js":"ClP7","./utils.js":"dF0W","./types.js":"kaSj","./stateUtils.js":"p0He","./actionTypes.js":"Y0yJ","./actions.js":"RPqm","./State.js":"Iv8e","./Actor.js":"iNa7","./scheduler.js":"DS4x","./registry.js":"xSSc","./devTools.js":"XpEp"}],"S0fd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.matchState=t;var e=require("./_virtual/_tslib.js"),r=require("./State.js");function t(t,a,n){var o,i,l=r.State.from(t,t instanceof r.State?t.context:void 0);try{for(var u=(0,e.__values)(a),s=u.next();!s.done;s=u.next()){var c=(0,e.__read)(s.value,2),f=c[0],v=c[1];if(l.matches(f))return v(l)}}catch(_){o={error:_}}finally{try{s&&!s.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}return n(l)}
},{"./_virtual/_tslib.js":"SFSL","./State.js":"Iv8e"}],"UVdL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"matchesState",{enumerable:!0,get:function(){return e.matchesState}}),Object.defineProperty(exports,"mapState",{enumerable:!0,get:function(){return t.mapState}}),Object.defineProperty(exports,"ActionTypes",{enumerable:!0,get:function(){return r.ActionTypes}}),Object.defineProperty(exports,"SpecialTargets",{enumerable:!0,get:function(){return r.SpecialTargets}}),Object.defineProperty(exports,"assign",{enumerable:!0,get:function(){return n.assign}}),Object.defineProperty(exports,"doneInvoke",{enumerable:!0,get:function(){return n.doneInvoke}}),Object.defineProperty(exports,"forwardTo",{enumerable:!0,get:function(){return n.forwardTo}}),Object.defineProperty(exports,"send",{enumerable:!0,get:function(){return n.send}}),Object.defineProperty(exports,"sendParent",{enumerable:!0,get:function(){return n.sendParent}}),Object.defineProperty(exports,"sendUpdate",{enumerable:!0,get:function(){return n.sendUpdate}}),Object.defineProperty(exports,"State",{enumerable:!0,get:function(){return o.State}}),Object.defineProperty(exports,"StateNode",{enumerable:!0,get:function(){return a.StateNode}}),Object.defineProperty(exports,"Machine",{enumerable:!0,get:function(){return s.Machine}}),Object.defineProperty(exports,"createMachine",{enumerable:!0,get:function(){return s.createMachine}}),Object.defineProperty(exports,"Interpreter",{enumerable:!0,get:function(){return i.Interpreter}}),Object.defineProperty(exports,"interpret",{enumerable:!0,get:function(){return i.interpret}}),Object.defineProperty(exports,"spawn",{enumerable:!0,get:function(){return i.spawn}}),Object.defineProperty(exports,"matchState",{enumerable:!0,get:function(){return u.matchState}}),exports.actions=void 0;var e=require("./utils.js"),t=require("./mapState.js"),r=require("./types.js"),n=require("./actions.js"),o=require("./State.js"),a=require("./StateNode.js"),s=require("./Machine.js"),i=require("./interpreter.js"),u=require("./match.js"),c={raise:n.raise,send:n.send,sendParent:n.sendParent,sendUpdate:n.sendUpdate,log:n.log,cancel:n.cancel,start:n.start,stop:n.stop,assign:n.assign,after:n.after,done:n.done,respond:n.respond,forwardTo:n.forwardTo,escalate:n.escalate};exports.actions=c;
},{"./utils.js":"dF0W","./mapState.js":"z26Q","./types.js":"kaSj","./actions.js":"RPqm","./State.js":"Iv8e","./StateNode.js":"ifhd","./Machine.js":"pjkI","./interpreter.js":"tF8M","./match.js":"S0fd"}],"vOXj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStateMachine=n,exports.createMachineConfig=I;var e=require("xstate"),t=require("./interfaces");function n(t,n){return void 0===n&&(n=function(e){}),(0,e.interpret)(t).onTransition(function(e){var t;return n(null===(t=e)||void 0===t?void 0:t.value)}).start()}function I(n,I,r){var a,o,E,d,i,x,S;return void 0===r&&(r=750),(0,e.Machine)({id:"indexer",initial:t.IndexState.IDLE,states:(a={},a[t.IndexState.STALE]={on:(o={},o[t.IndexEvent.INDEX_START]=t.IndexState.PENDING,o),after:(E={},E[r]=t.IndexState.PENDING,E)},a[t.IndexState.PENDING]={on:(d={},d[t.IndexEvent.INVALIDATE]=t.IndexState.STALE,d),invoke:{id:"reindex",src:function(){return n()},onDone:{target:t.IndexState.QUERYING},onError:{target:t.IndexState.FAILED,actions:function(e,t){return console.log("INDEX ERROR",t.data)}}}},a[t.IndexState.QUERYING]={on:(i={},i[t.IndexEvent.INVALIDATE]=t.IndexState.STALE,i[t.IndexEvent.QUERY_START]=t.IndexState.QUERYING,i),invoke:{id:"query",src:function(){return I()},onDone:{target:t.IndexState.IDLE},onError:{target:t.IndexState.FAILED,actions:function(e,t){return console.log("QUERY ERROR",t.data)}}}},a[t.IndexState.IDLE]={on:(x={},x[t.IndexEvent.INVALIDATE]=t.IndexState.STALE,x[t.IndexEvent.QUERY_START]=t.IndexState.QUERYING,x)},a[t.IndexState.FAILED]={on:(S={},S[t.IndexEvent.INVALIDATE]=t.IndexState.STALE,S[t.IndexEvent.RETRY]=t.IndexState.PENDING,S)},a)})}
},{"xstate":"UVdL","./interfaces":"qu0L"}],"JZaC":[function(require,module,exports) {
function e(e,n){for(var r=-1,t=n.length,o=e.length;++r<t;)e[o+r]=n[r];return e}module.exports=e;
},{}],"Fseb":[function(require,module,exports) {
var e=require("./_baseGetTag"),r=require("./isObjectLike"),t="[object Arguments]";function u(u){return r(u)&&e(u)==t}module.exports=u;
},{"./_baseGetTag":"CCpz","./isObjectLike":"uCpm"}],"Mbrk":[function(require,module,exports) {
var e=require("./_baseIsArguments"),r=require("./isObjectLike"),t=Object.prototype,l=t.hasOwnProperty,n=t.propertyIsEnumerable,u=e(function(){return arguments}())?e:function(e){return r(e)&&l.call(e,"callee")&&!n.call(e,"callee")};module.exports=u;
},{"./_baseIsArguments":"Fseb","./isObjectLike":"uCpm"}],"QGUu":[function(require,module,exports) {
var r=require("./_Symbol"),e=require("./isArguments"),i=require("./isArray"),u=r?r.isConcatSpreadable:void 0;function o(r){return i(r)||e(r)||!!(u&&r&&r[u])}module.exports=o;
},{"./_Symbol":"paVz","./isArguments":"Mbrk","./isArray":"MdGg"}],"PnzQ":[function(require,module,exports) {
var r=require("./_arrayPush"),e=require("./_isFlattenable");function a(t,n,u,l,i){var o=-1,h=t.length;for(u||(u=e),i||(i=[]);++o<h;){var s=t[o];n>0&&u(s)?n>1?a(s,n-1,u,l,i):r(i,s):l||(i[i.length]=s)}return i}module.exports=a;
},{"./_arrayPush":"JZaC","./_isFlattenable":"QGUu"}],"oyaQ":[function(require,module,exports) {
var e=require("./_baseFlatten");function n(n){return(null==n?0:n.length)?e(n,1):[]}module.exports=n;
},{"./_baseFlatten":"PnzQ"}],"da4J":[function(require,module,exports) {
var _="__lodash_hash_undefined__";function t(t){return this.__data__.set(t,_),this}module.exports=t;
},{}],"zU4y":[function(require,module,exports) {
function t(t){return this.__data__.has(t)}module.exports=t;
},{}],"lZBL":[function(require,module,exports) {
var e=require("./_MapCache"),t=require("./_setCacheAdd"),r=require("./_setCacheHas");function a(t){var r=-1,a=null==t?0:t.length;for(this.__data__=new e;++r<a;)this.add(t[r])}a.prototype.add=a.prototype.push=t,a.prototype.has=r,module.exports=a;
},{"./_MapCache":"gJex","./_setCacheAdd":"da4J","./_setCacheHas":"zU4y"}],"TTLj":[function(require,module,exports) {
function r(r,e,n,t){for(var o=r.length,u=n+(t?1:-1);t?u--:++u<o;)if(e(r[u],u,r))return u;return-1}module.exports=r;
},{}],"T6wu":[function(require,module,exports) {
function e(e){return e!=e}module.exports=e;
},{}],"KZDX":[function(require,module,exports) {
function r(r,e,n){for(var t=n-1,o=r.length;++t<o;)if(r[t]===e)return t;return-1}module.exports=r;
},{}],"mGcU":[function(require,module,exports) {
var e=require("./_baseFindIndex"),r=require("./_baseIsNaN"),i=require("./_strictIndexOf");function n(n,u,s){return u==u?i(n,u,s):e(n,r,s)}module.exports=n;
},{"./_baseFindIndex":"TTLj","./_baseIsNaN":"T6wu","./_strictIndexOf":"KZDX"}],"lyKR":[function(require,module,exports) {
var e=require("./_baseIndexOf");function n(n,r){return!!(null==n?0:n.length)&&e(n,r,0)>-1}module.exports=n;
},{"./_baseIndexOf":"mGcU"}],"EN9G":[function(require,module,exports) {
function r(r,n,e){for(var t=-1,u=null==r?0:r.length;++t<u;)if(e(n,r[t]))return!0;return!1}module.exports=r;
},{}],"nfre":[function(require,module,exports) {
function e(e,n){return e.has(n)}module.exports=e;
},{}],"wJ1B":[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),t=e(r,"Set");module.exports=t;
},{"./_getNative":"AijS","./_root":"VQ1k"}],"OTfq":[function(require,module,exports) {
function o(){}module.exports=o;
},{}],"I4Ee":[function(require,module,exports) {
function r(r){var n=-1,o=Array(r.size);return r.forEach(function(r){o[++n]=r}),o}module.exports=r;
},{}],"Jv1V":[function(require,module,exports) {
var e=require("./_Set"),r=require("./noop"),n=require("./_setToArray"),o=1/0,u=e&&1/n(new e([,-0]))[1]==o?function(r){return new e(r)}:r;module.exports=u;
},{"./_Set":"wJ1B","./noop":"OTfq","./_setToArray":"I4Ee"}],"VOf0":[function(require,module,exports) {
var e=require("./_SetCache"),r=require("./_arrayIncludes"),u=require("./_arrayIncludesWith"),a=require("./_cacheHas"),i=require("./_createSet"),n=require("./_setToArray"),s=200;function t(t,l,h){var c=-1,f=r,o=t.length,q=!0,_=[],p=_;if(h)q=!1,f=u;else if(o>=s){var v=l?null:i(t);if(v)return n(v);q=!1,f=a,p=new e}else p=l?[]:_;e:for(;++c<o;){var d=t[c],y=l?l(d):d;if(d=h||0!==d?d:0,q&&y==y){for(var g=p.length;g--;)if(p[g]===y)continue e;l&&p.push(y),_.push(d)}else f(p,y,h)||(p!==_&&p.push(y),_.push(d))}return _}module.exports=t;
},{"./_SetCache":"lZBL","./_arrayIncludes":"lyKR","./_arrayIncludesWith":"EN9G","./_cacheHas":"nfre","./_createSet":"Jv1V","./_setToArray":"I4Ee"}],"LsHW":[function(require,module,exports) {
var e=require("./_baseUniq");function r(r){return r&&r.length?e(r):[]}module.exports=r;
},{"./_baseUniq":"VOf0"}],"QM7F":[function(require,module,exports) {
function n(n){return function(r){return n(r)}}module.exports=n;
},{}],"H68j":[function(require,module,exports) {
var r=require("./_SetCache"),e=require("./_arrayIncludes"),a=require("./_arrayIncludesWith"),n=require("./_arrayMap"),u=require("./_baseUnary"),i=require("./_cacheHas"),t=Math.min;function h(h,l,o){for(var c=o?a:e,s=h[0].length,v=h.length,f=v,q=Array(v),_=1/0,g=[];f--;){var y=h[f];f&&l&&(y=n(y,u(l))),_=t(y.length,_),q[f]=!o&&(l||s>=120&&y.length>=120)?new r(f&&y):void 0}y=h[0];var d=-1,p=q[0];r:for(;++d<s&&g.length<_;){var m=y[d],I=l?l(m):m;if(m=o||0!==m?m:0,!(p?i(p,I):c(g,I,o))){for(f=v;--f;){var M=q[f];if(!(M?i(M,I):c(h[f],I,o)))continue r}p&&p.push(I),g.push(m)}}return g}module.exports=h;
},{"./_SetCache":"lZBL","./_arrayIncludes":"lyKR","./_arrayIncludesWith":"EN9G","./_arrayMap":"WiTf","./_baseUnary":"QM7F","./_cacheHas":"nfre"}],"wmEn":[function(require,module,exports) {
function e(e){return e}module.exports=e;
},{}],"c7k6":[function(require,module,exports) {
function e(e,l,r){switch(r.length){case 0:return e.call(l);case 1:return e.call(l,r[0]);case 2:return e.call(l,r[0],r[1]);case 3:return e.call(l,r[0],r[1],r[2])}return e.apply(l,r)}module.exports=e;
},{}],"ISOC":[function(require,module,exports) {
var r=require("./_apply"),t=Math.max;function a(a,e,n){return e=t(void 0===e?a.length-1:e,0),function(){for(var o=arguments,u=-1,i=t(o.length-e,0),f=Array(i);++u<i;)f[u]=o[e+u];u=-1;for(var h=Array(e+1);++u<e;)h[u]=o[u];return h[e]=n(f),r(a,this,h)}}module.exports=a;
},{"./_apply":"c7k6"}],"r0fg":[function(require,module,exports) {
function n(n){return function(){return n}}module.exports=n;
},{}],"qTWM":[function(require,module,exports) {
var e=require("./_getNative"),r=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch(t){}}();module.exports=r;
},{"./_getNative":"AijS"}],"uMBx":[function(require,module,exports) {
var e=require("./constant"),r=require("./_defineProperty"),t=require("./identity"),i=r?function(t,i){return r(t,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:t;module.exports=i;
},{"./constant":"r0fg","./_defineProperty":"qTWM","./identity":"wmEn"}],"beQ9":[function(require,module,exports) {
var r=800,e=16,n=Date.now;function t(t){var o=0,u=0;return function(){var a=n(),i=e-(a-u);if(u=a,i>0){if(++o>=r)return arguments[0]}else o=0;return t.apply(void 0,arguments)}}module.exports=t;
},{}],"fKzF":[function(require,module,exports) {
var e=require("./_baseSetToString"),r=require("./_shortOut"),t=r(e);module.exports=t;
},{"./_baseSetToString":"uMBx","./_shortOut":"beQ9"}],"HVdE":[function(require,module,exports) {
var e=require("./identity"),r=require("./_overRest"),t=require("./_setToString");function i(i,u){return t(r(i,u,e),i+"")}module.exports=i;
},{"./identity":"wmEn","./_overRest":"ISOC","./_setToString":"fKzF"}],"cl1f":[function(require,module,exports) {
var e=9007199254740991;function r(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=e}module.exports=r;
},{}],"GQ83":[function(require,module,exports) {
var e=require("./isFunction"),n=require("./isLength");function r(r){return null!=r&&n(r.length)&&!e(r)}module.exports=r;
},{"./isFunction":"KGxx","./isLength":"cl1f"}],"JGLM":[function(require,module,exports) {
var e=require("./isArrayLike"),r=require("./isObjectLike");function i(i){return r(i)&&e(i)}module.exports=i;
},{"./isArrayLike":"GQ83","./isObjectLike":"uCpm"}],"Uaor":[function(require,module,exports) {
var r=require("./isArrayLikeObject");function e(e){return r(e)?e:[]}module.exports=e;
},{"./isArrayLikeObject":"JGLM"}],"UsJN":[function(require,module,exports) {
var e=require("./_arrayMap"),r=require("./_baseIntersection"),a=require("./_baseRest"),t=require("./_castArrayLikeObject"),i=a(function(a){var i=e(a,t);return i.length&&i[0]===a[0]?r(i):[]});module.exports=i;
},{"./_arrayMap":"WiTf","./_baseIntersection":"H68j","./_baseRest":"HVdE","./_castArrayLikeObject":"Uaor"}],"B4tW":[function(require,module,exports) {
"use strict";function e(e,n,r,t){for(var u,o,i=0,f=e.length-1;i<=f;)if((o=+r(e[u=i+(f-i>>>1)],n))<0)i=u+1;else{if(!(o>0))return u;f=u-1}return"up"===t?f+1>e.length-1?-1:f+1:"down"===t?f<0?-1:f<=e.length-1?f:e.length-1:~i}function n(n,r,t,u){var o=0,i=n.length-1;return t&&(o=e(n,t,r,"up")),u&&(i=e(n,u,r,"down")),i<0||o<0?[]:n.slice(o,i+1)}function r(e,r,t){return n(e,o,r,t)}function t(e,r,t){return n(e,u,r,t)}function u(e,n){return e===n?0:e<n?-1:1}function o(e,n){return e-n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,exports.findRange=n,exports.findNumberRange=r,exports.findStringRange=t,exports.compareStrings=u,exports.compareNumbers=o;
},{}],"Xmqf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.finders=void 0;var e=require("../interfaces"),n=u(require("lodash/flatten")),t=u(require("lodash/uniq")),r=u(require("lodash/intersection")),i=require("./binarySearch");function u(e){return e&&e.__esModule?e:{default:e}}function o(e,r,u){if(void 0===r&&void 0===u)return null;var o=(0,i.findNumberRange)(e.sortedKeys,r,u);return(0,t.default)((0,n.default)(o.map(function(n){return e.value[n]})))}function f(e,r,u){if(void 0===r&&void 0===u)return null;var o=r?r.toISOString():"",f=u?u.toISOString():"",a=(0,i.findStringRange)(e.sortedKeys,o,f);return(0,t.default)((0,n.default)(a.map(function(n){return e.value[n]})))}function a(e,r){if(!(r=r.filter(Boolean)).find(function(e){return e.indexOf("*")>-1}))return e.sortedKeys.reduce(function(n,t){(r.indexOf(t)>-1||!r.length)&&e.value[t].forEach(function(e){n.indexOf(e)<0&&n.push(e)});return n},[]);var i=r.map(function(e){return e.replace(/\*/gi,"").toLowerCase()}),u=e.sortedKeys.filter(function(e){return i.filter(function(n){return e.toLowerCase().indexOf(n)>-1}).length}).map(function(n){return e.value[n]});return(0,t.default)((0,n.default)(u))}function d(n,t){var r=n.indexDefinition,i=n.values,u=n.min,d=n.max;return r&&t?void 0===i&&void 0===u&&void 0===d?null:r.type===e.IndexType.String?a(t,i):r.type===e.IndexType.Number?o(t,u,d):r.type===e.IndexType.Date?f(t,u,d):void 0:[]}function l(e,n){for(var t=n.filter(function(n){return n.indexKey!==e.key}),i=r.default.apply(void 0,t.map(function(e){return e.matches})),u=[],o=Object.keys(e.value),f=0;f<o.length;f++){var a=t&&t.length?i.length?(0,r.default)(e.value[o[f]],i).length:0:e.value[o[f]].length;a&&u.push({key:o[f],count:a})}return u}var s={findByDate:f,findByNumber:o,findByString:a,findByIndexFilter:d,getRefinerOptions:l};exports.finders=s;
},{"../interfaces":"qu0L","lodash/flatten":"oyaQ","lodash/uniq":"LsHW","lodash/intersection":"UsJN","./binarySearch":"B4tW"}],"BFUS":[function(require,module,exports) {
var e=require("./_ListCache");function i(){this.__data__=new e,this.size=0}module.exports=i;
},{"./_ListCache":"feFl"}],"vJkQ":[function(require,module,exports) {
function e(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}module.exports=e;
},{}],"MihR":[function(require,module,exports) {
function t(t){return this.__data__.get(t)}module.exports=t;
},{}],"Py75":[function(require,module,exports) {
var e=require("./_ListCache"),i=require("./_Map"),t=require("./_MapCache"),s=200;function _(_,a){var r=this.__data__;if(r instanceof e){var h=r.__data__;if(!i||h.length<s-1)return h.push([_,a]),this.size=++r.size,this;r=this.__data__=new t(h)}return r.set(_,a),this.size=r.size,this}module.exports=_;
},{"./_ListCache":"feFl","./_Map":"pXsE","./_MapCache":"gJex"}],"Ti4V":[function(require,module,exports) {
var e=require("./_ListCache"),t=require("./_stackClear"),r=require("./_stackDelete"),a=require("./_stackGet"),s=require("./_stackHas"),o=require("./_stackSet");function i(t){var r=this.__data__=new e(t);this.size=r.size}i.prototype.clear=t,i.prototype.delete=r,i.prototype.get=a,i.prototype.has=s,i.prototype.set=o,module.exports=i;
},{"./_ListCache":"feFl","./_stackClear":"BFUS","./_stackDelete":"vJkQ","./_stackGet":"MihR","./_stackHas":"zU4y","./_stackSet":"Py75"}],"qGBm":[function(require,module,exports) {
function n(n,r){for(var e=-1,l=null==n?0:n.length;++e<l&&!1!==r(n[e],e,n););return n}module.exports=n;
},{}],"K8cD":[function(require,module,exports) {
var e=require("./_defineProperty");function r(r,o,u){"__proto__"==o&&e?e(r,o,{configurable:!0,enumerable:!0,value:u,writable:!0}):r[o]=u}module.exports=r;
},{"./_defineProperty":"qTWM"}],"lQ9H":[function(require,module,exports) {
var e=require("./_baseAssignValue"),r=require("./eq"),o=Object.prototype,a=o.hasOwnProperty;function i(o,i,t){var n=o[i];a.call(o,i)&&r(n,t)&&(void 0!==t||i in o)||e(o,i,t)}module.exports=i;
},{"./_baseAssignValue":"K8cD","./eq":"EW21"}],"jdas":[function(require,module,exports) {
var r=require("./_assignValue"),e=require("./_baseAssignValue");function a(a,i,u,n){var o=!u;u||(u={});for(var s=-1,v=i.length;++s<v;){var l=i[s],t=n?n(u[l],a[l],l,u,a):void 0;void 0===t&&(t=a[l]),o?e(u,l,t):r(u,l,t)}return u}module.exports=a;
},{"./_assignValue":"lQ9H","./_baseAssignValue":"K8cD"}],"qLlz":[function(require,module,exports) {
function r(r,o){for(var e=-1,n=Array(r);++e<r;)n[e]=o(e);return n}module.exports=r;
},{}],"SVLt":[function(require,module,exports) {
function e(){return!1}module.exports=e;
},{}],"APIu":[function(require,module,exports) {

var e=require("./_root"),o=require("./stubFalse"),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,t=r&&"object"==typeof module&&module&&!module.nodeType&&module,p=t&&t.exports===r,u=p?e.Buffer:void 0,d=u?u.isBuffer:void 0,s=d||o;module.exports=s;
},{"./_root":"VQ1k","./stubFalse":"SVLt"}],"AjIP":[function(require,module,exports) {
var e=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function t(t,n){var o=typeof t;return!!(n=null==n?e:n)&&("number"==o||"symbol"!=o&&r.test(t))&&t>-1&&t%1==0&&t<n}module.exports=t;
},{}],"koUJ":[function(require,module,exports) {
var e=require("./_baseGetTag"),t=require("./isLength"),r=require("./isObjectLike"),o="[object Arguments]",b="[object Array]",c="[object Boolean]",j="[object Date]",a="[object Error]",n="[object Function]",i="[object Map]",A="[object Number]",y="[object Object]",u="[object RegExp]",g="[object Set]",l="[object String]",p="[object WeakMap]",s="[object ArrayBuffer]",m="[object DataView]",U="[object Float32Array]",f="[object Float64Array]",q="[object Int8Array]",F="[object Int16Array]",I="[object Int32Array]",d="[object Uint8Array]",h="[object Uint8ClampedArray]",k="[object Uint16Array]",x="[object Uint32Array]",B={};function D(o){return r(o)&&t(o.length)&&!!B[e(o)]}B[U]=B[f]=B[q]=B[F]=B[I]=B[d]=B[h]=B[k]=B[x]=!0,B[o]=B[b]=B[s]=B[c]=B[m]=B[j]=B[a]=B[n]=B[i]=B[A]=B[y]=B[u]=B[g]=B[l]=B[p]=!1,module.exports=D;
},{"./_baseGetTag":"CCpz","./isLength":"cl1f","./isObjectLike":"uCpm"}],"m7ov":[function(require,module,exports) {
var e=require("./_freeGlobal"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,r=o&&"object"==typeof module&&module&&!module.nodeType&&module,t=r&&r.exports===o,p=t&&e.process,u=function(){try{var e=r&&r.require&&r.require("util").types;return e||p&&p.binding&&p.binding("util")}catch(o){}}();module.exports=u;
},{"./_freeGlobal":"lxuR"}],"SAjJ":[function(require,module,exports) {
var e=require("./_baseIsTypedArray"),r=require("./_baseUnary"),a=require("./_nodeUtil"),i=a&&a.isTypedArray,s=i?r(i):e;module.exports=s;
},{"./_baseIsTypedArray":"koUJ","./_baseUnary":"QM7F","./_nodeUtil":"m7ov"}],"asoi":[function(require,module,exports) {
var e=require("./_baseTimes"),r=require("./isArguments"),t=require("./isArray"),i=require("./isBuffer"),n=require("./_isIndex"),s=require("./isTypedArray"),u=Object.prototype,f=u.hasOwnProperty;function a(u,a){var o=t(u),p=!o&&r(u),y=!o&&!p&&i(u),g=!o&&!p&&!y&&s(u),h=o||p||y||g,l=h?e(u.length,String):[],q=l.length;for(var b in u)!a&&!f.call(u,b)||h&&("length"==b||y&&("offset"==b||"parent"==b)||g&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||n(b,q))||l.push(b);return l}module.exports=a;
},{"./_baseTimes":"qLlz","./isArguments":"Mbrk","./isArray":"MdGg","./isBuffer":"APIu","./_isIndex":"AjIP","./isTypedArray":"SAjJ"}],"DYZZ":[function(require,module,exports) {
var t=Object.prototype;function o(o){var r=o&&o.constructor;return o===("function"==typeof r&&r.prototype||t)}module.exports=o;
},{}],"hUHa":[function(require,module,exports) {
function n(n,r){return function(t){return n(r(t))}}module.exports=n;
},{}],"Y386":[function(require,module,exports) {
var e=require("./_overArg"),r=e(Object.keys,Object);module.exports=r;
},{"./_overArg":"hUHa"}],"IwDl":[function(require,module,exports) {
var r=require("./_isPrototype"),e=require("./_nativeKeys"),t=Object.prototype,o=t.hasOwnProperty;function n(t){if(!r(t))return e(t);var n=[];for(var u in Object(t))o.call(t,u)&&"constructor"!=u&&n.push(u);return n}module.exports=n;
},{"./_isPrototype":"DYZZ","./_nativeKeys":"Y386"}],"rC10":[function(require,module,exports) {
var e=require("./_arrayLikeKeys"),r=require("./_baseKeys"),i=require("./isArrayLike");function u(u){return i(u)?e(u):r(u)}module.exports=u;
},{"./_arrayLikeKeys":"asoi","./_baseKeys":"IwDl","./isArrayLike":"GQ83"}],"MOga":[function(require,module,exports) {
var e=require("./_copyObject"),r=require("./keys");function u(u,o){return u&&e(o,r(o),u)}module.exports=u;
},{"./_copyObject":"jdas","./keys":"rC10"}],"BbYR":[function(require,module,exports) {
function r(r){var n=[];if(null!=r)for(var u in Object(r))n.push(u);return n}module.exports=r;
},{}],"Jobt":[function(require,module,exports) {
var r=require("./isObject"),e=require("./_isPrototype"),t=require("./_nativeKeysIn"),o=Object.prototype,i=o.hasOwnProperty;function n(o){if(!r(o))return t(o);var n=e(o),u=[];for(var s in o)("constructor"!=s||!n&&i.call(o,s))&&u.push(s);return u}module.exports=n;
},{"./isObject":"MXp1","./_isPrototype":"DYZZ","./_nativeKeysIn":"BbYR"}],"vON2":[function(require,module,exports) {
var e=require("./_arrayLikeKeys"),r=require("./_baseKeysIn"),i=require("./isArrayLike");function u(u){return i(u)?e(u,!0):r(u)}module.exports=u;
},{"./_arrayLikeKeys":"asoi","./_baseKeysIn":"Jobt","./isArrayLike":"GQ83"}],"wX7T":[function(require,module,exports) {
var e=require("./_copyObject"),r=require("./keysIn");function u(u,n){return u&&e(n,r(n),u)}module.exports=u;
},{"./_copyObject":"jdas","./keysIn":"vON2"}],"QpEu":[function(require,module,exports) {

var e=require("./_root"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,r=o&&"object"==typeof module&&module&&!module.nodeType&&module,t=r&&r.exports===o,p=t?e.Buffer:void 0,u=p?p.allocUnsafe:void 0;function n(e,o){if(o)return e.slice();var r=e.length,t=u?u(r):new e.constructor(r);return e.copy(t),t}module.exports=n;
},{"./_root":"VQ1k"}],"UcRH":[function(require,module,exports) {
function r(r,e){var n=-1,o=r.length;for(e||(e=Array(o));++n<o;)e[n]=r[n];return e}module.exports=r;
},{}],"i1Ey":[function(require,module,exports) {
function r(r,n){for(var e=-1,l=null==r?0:r.length,o=0,t=[];++e<l;){var u=r[e];n(u,e,r)&&(t[o++]=u)}return t}module.exports=r;
},{}],"PYXc":[function(require,module,exports) {
function e(){return[]}module.exports=e;
},{}],"A6cy":[function(require,module,exports) {
var r=require("./_arrayFilter"),e=require("./stubArray"),t=Object.prototype,u=t.propertyIsEnumerable,n=Object.getOwnPropertySymbols,o=n?function(e){return null==e?[]:(e=Object(e),r(n(e),function(r){return u.call(e,r)}))}:e;module.exports=o;
},{"./_arrayFilter":"i1Ey","./stubArray":"PYXc"}],"Lcp4":[function(require,module,exports) {
var e=require("./_copyObject"),r=require("./_getSymbols");function o(o,t){return e(o,r(o),t)}module.exports=o;
},{"./_copyObject":"jdas","./_getSymbols":"A6cy"}],"p8sb":[function(require,module,exports) {
var e=require("./_overArg"),r=e(Object.getPrototypeOf,Object);module.exports=r;
},{"./_overArg":"hUHa"}],"kXMg":[function(require,module,exports) {
var r=require("./_arrayPush"),e=require("./_getPrototype"),t=require("./_getSymbols"),o=require("./stubArray"),u=Object.getOwnPropertySymbols,y=u?function(o){for(var u=[];o;)r(u,t(o)),o=e(o);return u}:o;module.exports=y;
},{"./_arrayPush":"JZaC","./_getPrototype":"p8sb","./_getSymbols":"A6cy","./stubArray":"PYXc"}],"pVn7":[function(require,module,exports) {
var e=require("./_copyObject"),r=require("./_getSymbolsIn");function o(o,t){return e(o,r(o),t)}module.exports=o;
},{"./_copyObject":"jdas","./_getSymbolsIn":"kXMg"}],"tFQC":[function(require,module,exports) {
var r=require("./_arrayPush"),e=require("./isArray");function u(u,a,i){var n=a(u);return e(u)?n:r(n,i(u))}module.exports=u;
},{"./_arrayPush":"JZaC","./isArray":"MdGg"}],"IPko":[function(require,module,exports) {
var e=require("./_baseGetAllKeys"),r=require("./_getSymbols"),u=require("./keys");function s(s){return e(s,u,r)}module.exports=s;
},{"./_baseGetAllKeys":"tFQC","./_getSymbols":"A6cy","./keys":"rC10"}],"YpG6":[function(require,module,exports) {
var e=require("./_baseGetAllKeys"),r=require("./_getSymbolsIn"),u=require("./keysIn");function n(n){return e(n,u,r)}module.exports=n;
},{"./_baseGetAllKeys":"tFQC","./_getSymbolsIn":"kXMg","./keysIn":"vON2"}],"tLzw":[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),t=e(r,"DataView");module.exports=t;
},{"./_getNative":"AijS","./_root":"VQ1k"}],"KjT3":[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),o=e(r,"Promise");module.exports=o;
},{"./_getNative":"AijS","./_root":"VQ1k"}],"ddK9":[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),a=e(r,"WeakMap");module.exports=a;
},{"./_getNative":"AijS","./_root":"VQ1k"}],"tNzG":[function(require,module,exports) {
var e=require("./_DataView"),r=require("./_Map"),t=require("./_Promise"),a=require("./_Set"),u=require("./_WeakMap"),c=require("./_baseGetTag"),o=require("./_toSource"),i="[object Map]",n="[object Object]",s="[object Promise]",b="[object Set]",w="[object WeakMap]",j="[object DataView]",q=o(e),_=o(r),p=o(t),f=o(a),v=o(u),M=c;(e&&M(new e(new ArrayBuffer(1)))!=j||r&&M(new r)!=i||t&&M(t.resolve())!=s||a&&M(new a)!=b||u&&M(new u)!=w)&&(M=function(e){var r=c(e),t=r==n?e.constructor:void 0,a=t?o(t):"";if(a)switch(a){case q:return j;case _:return i;case p:return s;case f:return b;case v:return w}return r}),module.exports=M;
},{"./_DataView":"tLzw","./_Map":"pXsE","./_Promise":"KjT3","./_Set":"wJ1B","./_WeakMap":"ddK9","./_baseGetTag":"CCpz","./_toSource":"AfA5"}],"OFAg":[function(require,module,exports) {
var t=Object.prototype,n=t.hasOwnProperty;function e(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}module.exports=e;
},{}],"ysan":[function(require,module,exports) {
var r=require("./_root"),e=r.Uint8Array;module.exports=e;
},{"./_root":"VQ1k"}],"WAmC":[function(require,module,exports) {
var e=require("./_Uint8Array");function r(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}module.exports=r;
},{"./_Uint8Array":"ysan"}],"xYOm":[function(require,module,exports) {
var e=require("./_cloneArrayBuffer");function r(r,f){var t=f?e(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}module.exports=r;
},{"./_cloneArrayBuffer":"WAmC"}],"fNI5":[function(require,module,exports) {
var e=/\w*$/;function r(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}module.exports=r;
},{}],"FLXW":[function(require,module,exports) {
var e=require("./_Symbol"),o=e?e.prototype:void 0,r=o?o.valueOf:void 0;function t(e){return r?Object(r.call(e)):{}}module.exports=t;
},{"./_Symbol":"paVz"}],"kEIG":[function(require,module,exports) {
var r=require("./_cloneArrayBuffer");function e(e,f){var t=f?r(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}module.exports=e;
},{"./_cloneArrayBuffer":"WAmC"}],"xYnk":[function(require,module,exports) {
var e=require("./_cloneArrayBuffer"),r=require("./_cloneDataView"),c=require("./_cloneRegExp"),t=require("./_cloneSymbol"),a=require("./_cloneTypedArray"),o="[object Boolean]",n="[object Date]",b="[object Map]",s="[object Number]",u="[object RegExp]",j="[object Set]",y="[object String]",i="[object Symbol]",l="[object ArrayBuffer]",A="[object DataView]",w="[object Float32Array]",p="[object Float64Array]",f="[object Int8Array]",m="[object Int16Array]",q="[object Int32Array]",_="[object Uint8Array]",S="[object Uint8ClampedArray]",U="[object Uint16Array]",d="[object Uint32Array]";function g(g,x,B){var D=g.constructor;switch(x){case l:return e(g);case o:case n:return new D(+g);case A:return r(g,B);case w:case p:case f:case m:case q:case _:case S:case U:case d:return a(g,B);case b:return new D;case s:case y:return new D(g);case u:return c(g);case j:return new D;case i:return t(g)}}module.exports=g;
},{"./_cloneArrayBuffer":"WAmC","./_cloneDataView":"xYOm","./_cloneRegExp":"fNI5","./_cloneSymbol":"FLXW","./_cloneTypedArray":"kEIG"}],"HRDU":[function(require,module,exports) {
var r=require("./isObject"),e=Object.create,t=function(){function t(){}return function(n){if(!r(n))return{};if(e)return e(n);t.prototype=n;var o=new t;return t.prototype=void 0,o}}();module.exports=t;
},{"./isObject":"MXp1"}],"iVSu":[function(require,module,exports) {
var e=require("./_baseCreate"),r=require("./_getPrototype"),t=require("./_isPrototype");function o(o){return"function"!=typeof o.constructor||t(o)?{}:e(r(o))}module.exports=o;
},{"./_baseCreate":"HRDU","./_getPrototype":"p8sb","./_isPrototype":"DYZZ"}],"JEK6":[function(require,module,exports) {
var e=require("./_getTag"),r=require("./isObjectLike"),t="[object Map]";function i(i){return r(i)&&e(i)==t}module.exports=i;
},{"./_getTag":"tNzG","./isObjectLike":"uCpm"}],"N6ID":[function(require,module,exports) {
var e=require("./_baseIsMap"),r=require("./_baseUnary"),a=require("./_nodeUtil"),i=a&&a.isMap,s=i?r(i):e;module.exports=s;
},{"./_baseIsMap":"JEK6","./_baseUnary":"QM7F","./_nodeUtil":"m7ov"}],"EpNq":[function(require,module,exports) {
var e=require("./_getTag"),r=require("./isObjectLike"),t="[object Set]";function i(i){return r(i)&&e(i)==t}module.exports=i;
},{"./_getTag":"tNzG","./isObjectLike":"uCpm"}],"OQqK":[function(require,module,exports) {
var e=require("./_baseIsSet"),r=require("./_baseUnary"),i=require("./_nodeUtil"),s=i&&i.isSet,a=s?r(s):e;module.exports=a;
},{"./_baseIsSet":"EpNq","./_baseUnary":"QM7F","./_nodeUtil":"m7ov"}],"ZxeG":[function(require,module,exports) {
var e=require("./_Stack"),r=require("./_arrayEach"),t=require("./_assignValue"),i=require("./_baseAssign"),o=require("./_baseAssignIn"),n=require("./_cloneBuffer"),a=require("./_copyArray"),c=require("./_copySymbols"),u=require("./_copySymbolsIn"),b=require("./_getAllKeys"),j=require("./_getAllKeysIn"),y=require("./_getTag"),s=require("./_initCloneArray"),f=require("./_initCloneByTag"),q=require("./_initCloneObject"),l=require("./isArray"),A=require("./isBuffer"),_=require("./isMap"),g=require("./isObject"),p=require("./isSet"),v=require("./keys"),m=1,I=2,S=4,d="[object Arguments]",B="[object Array]",E="[object Boolean]",k="[object Date]",C="[object Error]",F="[object Function]",U="[object GeneratorFunction]",h="[object Map]",M="[object Number]",O="[object Object]",w="[object RegExp]",x="[object Set]",D="[object String]",K="[object Symbol]",T="[object WeakMap]",V="[object ArrayBuffer]",G="[object DataView]",N="[object Float32Array]",R="[object Float64Array]",W="[object Int8Array]",z="[object Int16Array]",H="[object Int32Array]",J="[object Uint8Array]",L="[object Uint8ClampedArray]",P="[object Uint16Array]",Q="[object Uint32Array]",X={};function Y(B,E,k,C,h,M){var w,x=E&m,D=E&I,K=E&S;if(k&&(w=h?k(B,C,h,M):k(B)),void 0!==w)return w;if(!g(B))return B;var T=l(B);if(T){if(w=s(B),!x)return a(B,w)}else{var V=y(B),G=V==F||V==U;if(A(B))return n(B,x);if(V==O||V==d||G&&!h){if(w=D||G?{}:q(B),!x)return D?u(B,o(w,B)):c(B,i(w,B))}else{if(!X[V])return h?B:{};w=f(B,V,x)}}M||(M=new e);var N=M.get(B);if(N)return N;M.set(B,w),p(B)?B.forEach(function(e){w.add(Y(e,E,k,e,B,M))}):_(B)&&B.forEach(function(e,r){w.set(r,Y(e,E,k,r,B,M))});var R=K?D?j:b:D?keysIn:v,W=T?void 0:R(B);return r(W||B,function(e,r){W&&(e=B[r=e]),t(w,r,Y(e,E,k,r,B,M))}),w}X[d]=X[B]=X[V]=X[G]=X[E]=X[k]=X[N]=X[R]=X[W]=X[z]=X[H]=X[h]=X[M]=X[O]=X[w]=X[x]=X[D]=X[K]=X[J]=X[L]=X[P]=X[Q]=!0,X[C]=X[F]=X[T]=!1,module.exports=Y;
},{"./_Stack":"Ti4V","./_arrayEach":"qGBm","./_assignValue":"lQ9H","./_baseAssign":"MOga","./_baseAssignIn":"wX7T","./_cloneBuffer":"QpEu","./_copyArray":"UcRH","./_copySymbols":"Lcp4","./_copySymbolsIn":"pVn7","./_getAllKeys":"IPko","./_getAllKeysIn":"YpG6","./_getTag":"tNzG","./_initCloneArray":"OFAg","./_initCloneByTag":"xYnk","./_initCloneObject":"iVSu","./isArray":"MdGg","./isBuffer":"APIu","./isMap":"N6ID","./isObject":"MXp1","./isSet":"OQqK","./keys":"rC10"}],"RSWu":[function(require,module,exports) {
function n(n){var e=null==n?0:n.length;return e?n[e-1]:void 0}module.exports=n;
},{}],"FeBi":[function(require,module,exports) {
function r(r,e,n){var o=-1,t=r.length;e<0&&(e=-e>t?0:t+e),(n=n>t?t:n)<0&&(n+=t),t=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(t);++o<t;)a[o]=r[o+e];return a}module.exports=r;
},{}],"X5uk":[function(require,module,exports) {
var e=require("./_baseGet"),r=require("./_baseSlice");function t(t,u){return u.length<2?t:e(t,r(u,0,-1))}module.exports=t;
},{"./_baseGet":"aChD","./_baseSlice":"FeBi"}],"Oiu0":[function(require,module,exports) {
var e=require("./_castPath"),r=require("./last"),t=require("./_parent"),u=require("./_toKey");function a(a,i){return i=e(i,a),null==(a=t(a,i))||delete a[u(r(i))]}module.exports=a;
},{"./_castPath":"Uv9i","./last":"RSWu","./_parent":"X5uk","./_toKey":"eqwJ"}],"EVIr":[function(require,module,exports) {
var t=require("./_baseGetTag"),e=require("./_getPrototype"),r=require("./isObjectLike"),o="[object Object]",c=Function.prototype,n=Object.prototype,u=c.toString,i=n.hasOwnProperty,a=u.call(Object);function l(c){if(!r(c)||t(c)!=o)return!1;var n=e(c);if(null===n)return!0;var l=i.call(n,"constructor")&&n.constructor;return"function"==typeof l&&l instanceof l&&u.call(l)==a}module.exports=l;
},{"./_baseGetTag":"CCpz","./_getPrototype":"p8sb","./isObjectLike":"uCpm"}],"AceO":[function(require,module,exports) {
var e=require("./isPlainObject");function r(r){return e(r)?void 0:r}module.exports=r;
},{"./isPlainObject":"EVIr"}],"RmZd":[function(require,module,exports) {
var e=require("./flatten"),r=require("./_overRest"),t=require("./_setToString");function i(i){return t(r(i,void 0,e),i+"")}module.exports=i;
},{"./flatten":"oyaQ","./_overRest":"ISOC","./_setToString":"fKzF"}],"ws3a":[function(require,module,exports) {
var e=require("./_arrayMap"),r=require("./_baseClone"),t=require("./_baseUnset"),u=require("./_castPath"),n=require("./_copyObject"),a=require("./_customOmitClone"),i=require("./_flatRest"),l=require("./_getAllKeysIn"),o=1,q=2,s=4,_=i(function(i,_){var c={};if(null==i)return c;var f=!1;_=e(_,function(e){return e=u(e,i),f||(f=e.length>1),e}),n(i,l(i),c),f&&(c=r(c,o|q|s,a));for(var v=_.length;v--;)t(c,_[v]);return c});module.exports=_;
},{"./_arrayMap":"WiTf","./_baseClone":"ZxeG","./_baseUnset":"Oiu0","./_castPath":"Uv9i","./_copyObject":"jdas","./_customOmitClone":"AceO","./_flatRest":"RmZd","./_getAllKeysIn":"YpG6"}],"m1KH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseFilter=n,exports.filterToString=i;var t=e(require("lodash/omit"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=function(){return(o=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function n(t){return t?Object.keys(t).map(function(e){var n={indexKey:e},i=t[e];return Array.isArray(i)?n.values=i:"object"===r(i)?n=o(o({},n),i):n.values=[i],n}):[]}function i(e){return e?JSON.stringify((0,t.default)(e,"indexDefinition")):""}
},{"lodash/omit":"ws3a"}],"DdMC":[function(require,module,exports) {
"use strict";function r(r,e){return Object.prototype.hasOwnProperty.call(r,e)}module.exports=function(t,n,o,a){n=n||"&",o=o||"=";var s={};if("string"!=typeof t||0===t.length)return s;var p=/\+/g;t=t.split(n);var u=1e3;a&&"number"==typeof a.maxKeys&&(u=a.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var i=0;i<c;++i){var y,l,f,v,b=t[i].replace(p,"%20"),d=b.indexOf(o);d>=0?(y=b.substr(0,d),l=b.substr(d+1)):(y=b,l=""),f=decodeURIComponent(y),v=decodeURIComponent(l),r(s,f)?e(s[f])?s[f].push(v):s[f]=[s[f],v]:s[f]=v}return s};var e=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};
},{}],"ipy0":[function(require,module,exports) {
"use strict";var n=function(n){switch(typeof n){case"string":return n;case"boolean":return n?"true":"false";case"number":return isFinite(n)?n:"";default:return""}};module.exports=function(o,u,c,a){return u=u||"&",c=c||"=",null===o&&(o=void 0),"object"==typeof o?r(t(o),function(t){var a=encodeURIComponent(n(t))+c;return e(o[t])?r(o[t],function(e){return a+encodeURIComponent(n(e))}).join(u):a+encodeURIComponent(n(o[t]))}).join(u):a?encodeURIComponent(n(a))+c+encodeURIComponent(n(o)):""};var e=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)};function r(n,e){if(n.map)return n.map(e);for(var r=[],t=0;t<n.length;t++)r.push(e(n[t],t));return r}var t=Object.keys||function(n){var e=[];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.push(r);return e};
},{}],"njjI":[function(require,module,exports) {
"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode");
},{"./decode":"DdMC","./encode":"ipy0"}],"ftXt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.cachify=exports.setCache=exports.getCache=void 0;var e=require("querystring"),t=function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},r=function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function c(e){try{u(n.next(e))}catch(t){a(t)}}function i(e){try{u(n.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(c,i)}u((n=n.apply(e,t||[])).next())})},n=function(e,t){var r,n,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,n=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(o=(o=c.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){c.label=a[1];break}if(6===a[0]&&c.label<o[1]){c.label=o[1],o=a;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(a);break}o[2]&&c.ops.pop(),c.trys.pop();continue}a=t.call(e,c)}catch(i){a=[6,i],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};function o(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}}var a=!1===o();console.log("TCL: noLocalStorage",a);var c=function(e){return e.expiration&&Date.now()>e.expiration},i=function(e){if(a)return{};var r={duration:2592e6,location:localStorage,cacheBustKey:"bustcache"};return"string"==typeof e&&(e={key:e}),t(t({},r),e)},u=function(t){if(!a){t=t.toLowerCase();try{if(window.location.search){var r=(0,e.parse)(window.location.search.substr(1));return Object.keys(r).map(function(e){return e.toLowerCase()}).indexOf(t)>-1}}catch(n){console.log("Error: Unable to check 'shouldBustCache'",n)}return!1}},s=function(e){if(!a){var t=i(e);if(u(t.cacheBustKey))return null;var r=t.location;if(!t.key&&!t.getCacheKey)throw new Error("key is required");var n=r.getItem(t.key);if(n){var o=JSON.parse(n);return c(o)?null:o.payload}return null}};exports.getCache=s;var l=function(e,t){if(!a){var r=i(e),n=r.duration,o=r.location;if(!r.key&&!r.getCacheKey)throw new Error("key is required");var c=Date.now(),u=n&&c+n||null;return o.setItem(r.key,JSON.stringify({payload:t,expiration:u})),s(r)}};exports.setCache=l;var f=function(e,o,a){if(void 0===a&&(a=this),!e||"function"!=typeof e)throw new Error("Cachify Error: You must pass an async function as the first param");if(!o&&!o.getCacheKey)throw new Error("Cachify Error: You must pass a cacheConfig object with a 'key' or 'getCacheKey', Ex: cachify(fetchUsers, { key: 'myapp-users' }");return function(){for(var c=[],i=0;i<arguments.length;i++)c[i]=arguments[i];return r(this,void 0,void 0,function(){var r,i;return n(this,function(n){switch(n.label){case 0:return(r=t({},o)).key||(r.key=r.getCacheKey.apply(r,c)),(i=s(r))?[3,2]:[4,e.apply(a,c)];case 1:i=n.sent(),l(r,i),n.label=2;case 2:return[2,i]}})})}};exports.cachify=f;var h={get:s,set:l};exports.default=h;
},{"querystring":"njjI"}],"d58T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=require("../helpers/indexers"),t=r(require("dexie")),n=r(require("lodash/omit"));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{l(r.next(e))}catch(t){i(t)}}function a(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(u,a)}l((r=r.apply(e,t||[])).next())})},u=function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=-1;function l(r,l){return void 0===l&&(l=Date.now()),i(this,void 0,void 0,function(){return u(this,function(i){return a=l,[2,r.transaction("rw",r.allItems,r.indexes,r.filterResults,r.queryResults,function(){r.filterResults.clear(),r.queryResults.clear();var i=r._indexRegistrations.map(function(e){return o(o({},e),{value:{},sortedKeys:[]})});r.allItems.each(function(t,n){var o=n.primaryKey;r._indexRegistrations.forEach(function(n,r){var u=e.indexers[n.type];u&&u(t,o,i[r])})}).then(function(){a===l&&i.forEach(function(e){e.sortedKeys=e.sortedKeys.sort(),r.indexes.put((0,n.default)(e,"hashFn"))})}),a!==l&&(console.log("ABORTING REINDEX TRANSACTION"),t.default.currentTransaction.abort())})]})})}
},{"../helpers/indexers":"r4Da","dexie":"dqWB","lodash/omit":"ws3a"}],"cUVU":[function(require,module,exports) {
"use strict";function e(e,t){return e.transaction("rw",e.allItems,e.indexes,e.filterResults,e.queryResults,function(){e.indexes.clear(),e.filterResults.clear(),e.allItems.clear(),e.queryResults.clear(),e.allItems.bulkAdd(t)})}function t(e,t){return e.transaction("rw",e.allItems,e.indexes,e.filterResults,e.queryResults,function(){e.indexes.clear(),e.filterResults.clear(),e.allItems.clear(),e.queryResults.clear(),e.allItems.bulkPut(t)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.setItems=e,exports.pushItems=t;
},{}],"lXTG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("dexie")),t=require("./interfaces"),n=require("threads"),i=require("./helpers/indexers"),r=require("./stateMachine"),s=require("./helpers/finders"),o=f(require("lodash/intersection")),a=require("./helpers/filterParser"),u=require("./helpers/cache"),c=f(require("./transactions/reindex")),l=require("./transactions/setItems");function f(e){return e&&e.__esModule?e:{default:e}}var d=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),h=function(){return(h=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},y=function(e,t,n,i){return new(n||(n=Promise))(function(r,s){function o(e){try{u(i.next(e))}catch(t){s(t)}}function a(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}u((i=i.apply(e,t||[])).next())})},v=function(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},x=function(f){function x(e,d){var x=f.call(this,e)||this;return x._criteria={filter:null},x._indexRegistrations=[],x.activeIndexingId=-1,x.activeQueryId=-1,x.config={indexDelay:750,itemsIndexSchema:"++_id",isWebWorker:!1},x.initDB=function(){x.version(1).stores({allItems:x.config.itemsIndexSchema,indexes:"key",filterResults:"key",queryResults:"key"}),x.allItems=x.table("allItems"),x.indexes=x.table("indexes"),x.filterResults=x.table("filterResults")},x.setCriteria=function(e){e&&(x._criteria=e,x.stateMachine.send(t.IndexEvent.QUERY_START))},x.getCriteriaKey=function(){return JSON.stringify(x._criteria)},x.setIndexes=function(e,n){void 0===n&&(n=!1),(!0===n||(0,i.checkIfModifiedIndexes)(x._indexRegistrations,e))&&(x._indexRegistrations=e,x.config.isWebWorker||(0,u.setCache)(x.name+"-indexes",x._indexRegistrations),x.stateMachine.send(t.IndexEvent.INVALIDATE))},x.getIndexState=function(){var e,t;return null===(t=null===(e=x.stateMachine)||void 0===e?void 0:e.state)||void 0===t?void 0:t.value},x.setItems=function(e){return y(x,void 0,void 0,function(){var n;return v(this,function(i){switch(i.label){case 0:return this.stateMachine.send(t.IndexEvent.INVALIDATE),this.config.workerPath?[4,this.workerIsReady]:[3,3];case 1:return i.sent(),[4,this.worker.setItems(this.name,e)];case 2:return n=i.sent(),console.log("TCL: setItems -> Web Worker result",n),[3,5];case 3:return[4,(0,l.setItems)(this,e)];case 4:i.sent(),i.label=5;case 5:return this.stateMachine.send(t.IndexEvent.INVALIDATE),[2]}})})},x.pushItems=function(e){return y(x,void 0,void 0,function(){return v(this,function(n){switch(n.label){case 0:return this.stateMachine.send(t.IndexEvent.INVALIDATE),[4,(0,l.pushItems)(this,e)];case 1:return n.sent(),this.stateMachine.send(t.IndexEvent.INVALIDATE),[2]}})})},x.waitForState=function(e){return new Promise(function(t,n){x.stateMachine.onTransition(function n(i){var r;(null===(r=i)||void 0===r?void 0:r.value)===e&&(x.stateMachine.off(n),t(!0))})})},x.reIndex=function(){return y(x,void 0,void 0,function(){return v(this,function(e){switch(e.label){case 0:return this.stateMachine.send(t.IndexEvent.INDEX_START),[4,this.waitForState(t.IndexState.IDLE)];case 1:return e.sent(),[2]}})})},x.getQueryResult=function(){return y(x,void 0,void 0,function(){return v(this,function(e){switch(e.label){case 0:return[4,this.waitForState(t.IndexState.IDLE)];case 1:return e.sent(),[2,this.queryResults.get(this.getCriteriaKey())]}})})},x.query=function(e){return y(x,void 0,void 0,function(){return v(this,function(t){return e&&this.setCriteria(e),[2,this.getQueryResult()]})})},x._query=function(e){return void 0===e&&(e=Date.now()),y(x,void 0,Promise,function(){var t,n,i,r=this;return v(this,function(u){switch(u.label){case 0:return this.activeQueryId=e,t=null,n=(0,a.parseFilter)(this._criteria.filter),[4,this.indexes.bulkGet(this._indexRegistrations.map(function(e){return e.key}))];case 1:return i=u.sent(),this.activeQueryId!==e?[2]:[4,this.transaction("rw",this.indexes,this.allItems,this.filterResults,this.queryResults,function(){return y(r,void 0,void 0,function(){var r,u,c,l,f,d,y,x,p,g,I,b=this;return v(this,function(v){switch(v.label){case 0:for(r=[],u=function(){var e=n[l],t=(0,a.filterToString)(e),o=[],u=c._indexRegistrations.find(function(t){return t.key===e.indexKey}),f=c.filterResults.get(t);f&&f.matches?o=f.itemIds:(o=s.finders.findByIndexFilter(h({indexDefinition:u},e),i.find(function(t){return t.key===e.indexKey})),c.filterResults.put({key:t,matches:o,indexKey:e.indexKey})),r.push({indexKey:e.indexKey,key:t,matches:o})},c=this,l=0;l<n.length;l++)u();return f=null,!1!==this._criteria.includeRefiners&&(d=this._indexRegistrations.map(function(e,t){if(e.skipRefinerOptions)return[];var n=i.find(function(t){return t.key===e.key});return s.finders.getRefinerOptions(n,r)}),f=d.reduce(function(e,t,n){return e[b._indexRegistrations[n].key]=t,e},{})),y=[],0!==r.length?[3,2]:[4,this.allItems.toCollection().primaryKeys()];case 1:return y=v.sent(),[3,3];case 2:y=o.default.apply(void 0,r.map(function(e){return e.matches}).filter(Boolean)),v.label=3;case 3:return x=this._criteria.skip||0,p=this._criteria.limit||1e3,g=y.slice(x,x+p),[4,this.allItems.bulkGet(g)];case 4:return I=v.sent(),this.activeQueryId!==e?[2]:(t={items:I,refiners:f,totalCount:y.length,key:this.getCriteriaKey()},this.queryResults.put(t),[2])}})})})];case 2:return u.sent(),this.activeQueryId!==e?[2]:[2,t]}})})},x._reIndex=function(e){return void 0===e&&(e=Date.now()),y(x,void 0,void 0,function(){var t;return v(this,function(n){switch(n.label){case 0:return this.config.workerPath?[4,this.workerIsReady]:[3,3];case 1:return n.sent(),[4,this.worker.reindex(this.name,this._indexRegistrations)];case 2:return t=n.sent(),console.log("TCL: _reIndex -> Web Worker result",t),[3,4];case 3:return[2,(0,c.default)(this,e)];case 4:return[2]}})})},x.config=h(h({},x.config),d),x.initDB(),x.stateMachine=(0,r.createStateMachine)((0,r.createMachineConfig)(x._reIndex,x._query,x.config.indexDelay),x.config.onTransition),x.config.indexes&&x.config.indexes.length&&(x._indexRegistrations=x.config.indexes),x.config.workerPath&&(x.workerIsReady=(0,n.spawn)(new n.Worker(x.config.workerPath)).then(function(e){return x.worker=e})),x.config.isWebWorker||(x._indexRegistrations=(0,u.getCache)(x.name+"-indexes")||[]),x}return d(x,f),Object.defineProperty(x.prototype,"criteria",{get:function(){return this._criteria},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"indexRegistrations",{get:function(){return this._indexRegistrations},enumerable:!0,configurable:!0}),x.destroy=function(t){e.default.delete(t)},x}(e.default),p=x;exports.default=p;
},{"dexie":"dqWB","./interfaces":"qu0L","threads":"mX2T","./helpers/indexers":"r4Da","./stateMachine":"vOXj","./helpers/finders":"Xmqf","lodash/intersection":"UsJN","./helpers/filterParser":"m1KH","./helpers/cache":"ftXt","./transactions/reindex":"d58T","./transactions/setItems":"cUVU"}],"C8ZQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.$errors=Symbol("thread.errors"),exports.$events=Symbol("thread.events"),exports.$terminate=Symbol("thread.terminate"),exports.$transferable=Symbol("thread.transferable"),exports.$worker=Symbol("thread.worker");
},{}],"vNGw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./symbols");function r(e){return!(!e||"object"!=typeof e)}function t(r){return r&&"object"==typeof r&&r[e.$transferable]}function s(t,s){if(!s){if(!r(t))throw Error();s=[t]}return{[e.$transferable]:!0,send:t,transferables:s}}exports.isTransferDescriptor=t,exports.Transfer=s;
},{"./symbols":"C8ZQ"}],"POjM":[function(require,module,exports) {
"use strict";var e,r;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e.run="run"}(e=exports.MasterMessageType||(exports.MasterMessageType={})),function(e){e.error="error",e.init="init",e.result="result",e.running="running",e.uncaughtError="uncaughtError"}(r=exports.WorkerMessageType||(exports.WorkerMessageType={}));
},{}],"m36H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=function(){return!("undefined"==typeof self||!self.postMessage)},s=function(e,s){self.postMessage(e,s)},t=function(e){const s=s=>{e(s.data)};return self.addEventListener("message",s),()=>{self.removeEventListener("message",s)}};exports.default={isWorkerRuntime:e,postMessageToMaster:s,subscribeToMasterMessages:t};
},{}],"l7cI":[function(require,module,exports) {
var process = require("process");
var e=require("process"),t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const r=t(require("./implementation.browser")),i=t(require("./implementation.tiny-worker")),n=t(require("./implementation.worker_threads")),o=void 0!==e&&"browser"!==e.arch&&"pid"in e;function u(){try{return n.default.testImplementation(),n.default}catch(e){return i.default}}exports.default=o?u():r.default;
},{"./implementation.browser":"m36H","./implementation.tiny-worker":"cLff","./implementation.worker_threads":"cLff","process":"FT5O"}],"gpMA":[function(require,module,exports) {
var process = require("process");
var e=require("process"),t=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(o,n){function a(e){try{u(s.next(e))}catch(t){n(t)}}function i(e){try{u(s.throw(e))}catch(t){n(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,i)}u((s=s.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const s=r(require("is-observable")),o=require("../common"),n=require("../transferable"),a=require("../types/messages"),i=r(require("./implementation"));var u=require("../transferable");exports.Transfer=u.Transfer;let f=!1;const c=e=>e&&e.type===a.MasterMessageType.run,p=e=>s.default(e)||l(e);function l(e){return e&&"object"==typeof e&&"function"==typeof e.subscribe}function d(e){return n.isTransferDescriptor(e)?{payload:e.send,transferables:e.transferables}:{payload:e,transferables:void 0}}function y(){const e={type:a.WorkerMessageType.init,exposed:{type:"function"}};i.default.postMessageToMaster(e)}function g(e){const t={type:a.WorkerMessageType.init,exposed:{type:"module",methods:e}};i.default.postMessageToMaster(t)}function m(e,t){const{payload:r,transferables:s}=d(t),n={type:a.WorkerMessageType.error,uid:e,error:o.serializeError(r)};i.default.postMessageToMaster(n,s)}function b(e,t,r){const{payload:s,transferables:o}=d(r),n={type:a.WorkerMessageType.result,uid:e,complete:!!t||void 0,payload:s};i.default.postMessageToMaster(n,o)}function h(e,t){const r={type:a.WorkerMessageType.running,uid:e,resultType:t};i.default.postMessageToMaster(r)}function M(e){const t={type:a.WorkerMessageType.uncaughtError,error:o.serializeError(e)};i.default.postMessageToMaster(t)}function T(e,r,s){return t(this,void 0,void 0,function*(){let t;try{t=r(...s)}catch(n){return m(e,n)}const o=p(t)?"observable":"promise";if(h(e,o),p(t))t.subscribe(t=>b(e,!1,t),t=>m(e,t),()=>b(e,!0));else try{const r=yield t;b(e,!0,r)}catch(n){m(e,n)}})}function v(e){if(!i.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(f)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(f=!0,"function"==typeof e)i.default.subscribeToMasterMessages(t=>{c(t)&&!t.method&&T(t.uid,e,t.args)}),y();else{if("object"!=typeof e||!e)throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${e}`);i.default.subscribeToMasterMessages(t=>{c(t)&&t.method&&T(t.uid,e[t.method],t.args)}),g(Object.keys(e).filter(t=>"function"==typeof e[t]))}}exports.expose=v,"undefined"!=typeof self&&"function"==typeof self.addEventListener&&i.default.isWorkerRuntime()&&(self.addEventListener("error",e=>{setTimeout(()=>M(e.error||e),250)}),self.addEventListener("unhandledrejection",e=>{const t=e.reason;t&&"string"==typeof t.message&&setTimeout(()=>M(t),250)})),void 0!==e&&"function"==typeof e.on&&i.default.isWorkerRuntime()&&(e.on("uncaughtException",e=>{setTimeout(()=>M(e),250)}),e.on("unhandledRejection",e=>{e&&"string"==typeof e.message&&setTimeout(()=>M(e),250)}));
},{"is-observable":"Txt5","../common":"Asj5","../transferable":"vNGw","../types/messages":"POjM","./implementation":"l7cI","process":"FT5O"}],"NNDR":[function(require,module,exports) {
module.exports=require("./dist/worker/index");
},{"./dist/worker/index":"gpMA"}],"GKky":[function(require,module,exports) {
"use strict";var e=s(require("../RefinerDB")),r=s(require("../transactions/reindex")),t=require("threads/worker"),n=require("../transactions/setItems");function s(e){return e&&e.__esModule?e:{default:e}}(0,t.expose)({reindex:function(t,n){var s=new e.default(t,{indexes:n,isWebWorker:!0});return(0,r.default)(s)},setItems:function(r,t){var s=new e.default(r,{isWebWorker:!0});(0,n.setItems)(s,t)}});
},{"../RefinerDB":"lXTG","../transactions/reindex":"d58T","threads/worker":"NNDR","../transactions/setItems":"cUVU"}]},{},["GKky"], null)
//# sourceMappingURL=/refinerdb.worker.js.map